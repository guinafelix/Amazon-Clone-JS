{"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\server.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _userRouter = _interopRequireDefault(require(\"./routers/userRouter\"));\n\nvar _orderRouter = _interopRequireDefault(require(\"./routers/orderRouter\"));\n\nvar _productRouter = _interopRequireDefault(require(\"./routers/productRouter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-underscore-dangle */\n\n/* eslint-disable linebreak-style */\n\n/* eslint-disable no-console */\n// import config from './config';\n_dotenv.default.config();\n\n_mongoose.default.connect(process.env.MONGODB_URL).then(() => {\n  console.log(\"Connected to mongodb.\");\n}).catch(error => {\n  console.log(error.reason);\n});\n\nconst app = (0, _express.default)();\napp.use((0, _cors.default)());\napp.use(_bodyParser.default.json());\napp.use('/api/users', _userRouter.default);\napp.use('/api/products', _productRouter.default);\napp.use('/api/orders', _orderRouter.default);\napp.get('/api/paypal/clientID', (req, res) => {\n  res.send({\n    clientId: process.env.PAYPAL_CLIENT_ID\n  });\n}); // eslint-disable-next-line no-unused-vars\n\napp.use((err, req, res, next) => {\n  const status = err.name && err.name === 'ValidationError' ? 400 : 500;\n  res.status(status).send({\n    message: err.message\n  });\n});\napp.listen(5000, () => {\n  console.log('serve at http://localhost:5000');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJtb25nb29zZSIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkwiLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyb3IiLCJyZWFzb24iLCJhcHAiLCJ1c2UiLCJib2R5UGFyc2VyIiwianNvbiIsInVzZXJSb3V0ZXIiLCJwcm9kdWN0Um91dGVyIiwib3JkZXJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJzZW5kIiwiY2xpZW50SWQiLCJQQVlQQUxfQ0xJRU5UX0lEIiwiZXJyIiwibmV4dCIsInN0YXR1cyIsIm5hbWUiLCJtZXNzYWdlIiwibGlzdGVuIl0sIm1hcHBpbmdzIjoiOztBQUdBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOzs7O0FBWEE7O0FBQ0E7O0FBQ0E7QUFNQTtBQUtBQSxnQkFBT0MsTUFBUDs7QUFFQUMsa0JBQVNDLE9BQVQsQ0FBaUJDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxXQUE3QixFQUNDQyxJQURELENBQ00sTUFBTTtBQUNWQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSx1QkFBWjtBQUNELENBSEQsRUFJQ0MsS0FKRCxDQUlRQyxLQUFELElBQVc7QUFDaEJILEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRSxLQUFLLENBQUNDLE1BQWxCO0FBQ0QsQ0FORDs7QUFRQSxNQUFNQyxHQUFHLEdBQUcsdUJBQVo7QUFDQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsb0JBQVI7QUFDQUQsR0FBRyxDQUFDQyxHQUFKLENBQVFDLG9CQUFXQyxJQUFYLEVBQVI7QUFDQUgsR0FBRyxDQUFDQyxHQUFKLENBQVEsWUFBUixFQUFzQkcsbUJBQXRCO0FBQ0FKLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLGVBQVIsRUFBeUJJLHNCQUF6QjtBQUNBTCxHQUFHLENBQUNDLEdBQUosQ0FBUSxhQUFSLEVBQXVCSyxvQkFBdkI7QUFDQU4sR0FBRyxDQUFDTyxHQUFKLENBQVEsc0JBQVIsRUFBZ0MsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDNUNBLEVBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTO0FBQUNDLElBQUFBLFFBQVEsRUFBRXBCLE9BQU8sQ0FBQ0MsR0FBUixDQUFZb0I7QUFBdkIsR0FBVDtBQUNELENBRkQsRSxDQUlBOztBQUNBWixHQUFHLENBQUNDLEdBQUosQ0FBUSxDQUFDWSxHQUFELEVBQU1MLEdBQU4sRUFBV0MsR0FBWCxFQUFnQkssSUFBaEIsS0FBeUI7QUFDL0IsUUFBTUMsTUFBTSxHQUFHRixHQUFHLENBQUNHLElBQUosSUFBWUgsR0FBRyxDQUFDRyxJQUFKLEtBQWEsaUJBQXpCLEdBQTZDLEdBQTdDLEdBQWtELEdBQWpFO0FBQ0FQLEVBQUFBLEdBQUcsQ0FBQ00sTUFBSixDQUFXQSxNQUFYLEVBQW1CTCxJQUFuQixDQUF3QjtBQUFFTyxJQUFBQSxPQUFPLEVBQUVKLEdBQUcsQ0FBQ0k7QUFBZixHQUF4QjtBQUNELENBSEQ7QUFJQWpCLEdBQUcsQ0FBQ2tCLE1BQUosQ0FBVyxJQUFYLEVBQWlCLE1BQU07QUFDckJ2QixFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxnQ0FBWjtBQUNELENBRkQiLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxndWlsaGVybWVcXERvd25sb2Fkc1xcanNhbWF6b25hXFxiYWNrZW5kXFwiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlcnNjb3JlLWRhbmdsZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBsaW5lYnJlYWstc3R5bGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xyXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XHJcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcclxuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xyXG4vLyBpbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcclxuaW1wb3J0IHVzZXJSb3V0ZXIgZnJvbSAnLi9yb3V0ZXJzL3VzZXJSb3V0ZXInO1xyXG5pbXBvcnQgb3JkZXJSb3V0ZXIgZnJvbSAnLi9yb3V0ZXJzL29yZGVyUm91dGVyJztcclxuaW1wb3J0IHByb2R1Y3RSb3V0ZXIgZnJvbSAnLi9yb3V0ZXJzL3Byb2R1Y3RSb3V0ZXInO1xyXG5cclxuZG90ZW52LmNvbmZpZygpXHJcblxyXG5tb25nb29zZS5jb25uZWN0KHByb2Nlc3MuZW52Lk1PTkdPREJfVVJMKVxyXG4udGhlbigoKSA9PiB7XHJcbiAgY29uc29sZS5sb2coXCJDb25uZWN0ZWQgdG8gbW9uZ29kYi5cIilcclxufSlcclxuLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGVycm9yLnJlYXNvbik7XHJcbn0pO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5hcHAudXNlKGNvcnMoKSk7XHJcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xyXG5hcHAudXNlKCcvYXBpL3VzZXJzJywgdXNlclJvdXRlcik7XHJcbmFwcC51c2UoJy9hcGkvcHJvZHVjdHMnLCBwcm9kdWN0Um91dGVyKTtcclxuYXBwLnVzZSgnL2FwaS9vcmRlcnMnLCBvcmRlclJvdXRlcik7XHJcbmFwcC5nZXQoJy9hcGkvcGF5cGFsL2NsaWVudElEJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgcmVzLnNlbmQoe2NsaWVudElkOiBwcm9jZXNzLmVudi5QQVlQQUxfQ0xJRU5UX0lEfSlcclxufSlcclxuXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xyXG5hcHAudXNlKChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgY29uc3Qgc3RhdHVzID0gZXJyLm5hbWUgJiYgZXJyLm5hbWUgPT09ICdWYWxpZGF0aW9uRXJyb3InID8gNDAwOiA1MDA7XHJcbiAgcmVzLnN0YXR1cyhzdGF0dXMpLnNlbmQoeyBtZXNzYWdlOiBlcnIubWVzc2FnZX0pO1xyXG59KTtcclxuYXBwLmxpc3Rlbig1MDAwLCAoKSA9PiB7XHJcbiAgY29uc29sZS5sb2coJ3NlcnZlIGF0IGh0dHA6Ly9sb2NhbGhvc3Q6NTAwMCcpO1xyXG59KTtcclxuIl19","map":{"version":3,"sources":["server.js"],"names":["dotenv","config","mongoose","connect","process","env","MONGODB_URL","then","console","log","catch","error","reason","app","use","bodyParser","json","userRouter","productRouter","orderRouter","get","req","res","send","clientId","PAYPAL_CLIENT_ID","err","next","status","name","message","listen"],"mappings":";;AAGA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;AAXA;;AACA;;AACA;AAMA;AAKAA,gBAAOC,MAAP;;AAEAC,kBAASC,OAAT,CAAiBC,OAAO,CAACC,GAAR,CAAYC,WAA7B,EACCC,IADD,CACM,MAAM;AACVC,EAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACD,CAHD,EAICC,KAJD,CAIQC,KAAD,IAAW;AAChBH,EAAAA,OAAO,CAACC,GAAR,CAAYE,KAAK,CAACC,MAAlB;AACD,CAND;;AAQA,MAAMC,GAAG,GAAG,uBAAZ;AACAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR;AACAD,GAAG,CAACC,GAAJ,CAAQC,oBAAWC,IAAX,EAAR;AACAH,GAAG,CAACC,GAAJ,CAAQ,YAAR,EAAsBG,mBAAtB;AACAJ,GAAG,CAACC,GAAJ,CAAQ,eAAR,EAAyBI,sBAAzB;AACAL,GAAG,CAACC,GAAJ,CAAQ,aAAR,EAAuBK,oBAAvB;AACAN,GAAG,CAACO,GAAJ,CAAQ,sBAAR,EAAgC,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC5CA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AAACC,IAAAA,QAAQ,EAAEpB,OAAO,CAACC,GAAR,CAAYoB;AAAvB,GAAT;AACD,CAFD,E,CAIA;;AACAZ,GAAG,CAACC,GAAJ,CAAQ,CAACY,GAAD,EAAML,GAAN,EAAWC,GAAX,EAAgBK,IAAhB,KAAyB;AAC/B,QAAMC,MAAM,GAAGF,GAAG,CAACG,IAAJ,IAAYH,GAAG,CAACG,IAAJ,KAAa,iBAAzB,GAA6C,GAA7C,GAAkD,GAAjE;AACAP,EAAAA,GAAG,CAACM,MAAJ,CAAWA,MAAX,EAAmBL,IAAnB,CAAwB;AAAEO,IAAAA,OAAO,EAAEJ,GAAG,CAACI;AAAf,GAAxB;AACD,CAHD;AAIAjB,GAAG,CAACkB,MAAJ,CAAW,IAAX,EAAiB,MAAM;AACrBvB,EAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACD,CAFD","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\","sourcesContent":["/* eslint-disable no-underscore-dangle */\r\n/* eslint-disable linebreak-style */\r\n/* eslint-disable no-console */\r\nimport express from 'express';\r\nimport cors from 'cors';\r\nimport mongoose from 'mongoose';\r\nimport bodyParser from 'body-parser';\r\nimport dotenv from 'dotenv';\r\n// import config from './config';\r\nimport userRouter from './routers/userRouter';\r\nimport orderRouter from './routers/orderRouter';\r\nimport productRouter from './routers/productRouter';\r\n\r\ndotenv.config()\r\n\r\nmongoose.connect(process.env.MONGODB_URL)\r\n.then(() => {\r\n  console.log(\"Connected to mongodb.\")\r\n})\r\n.catch((error) => {\r\n  console.log(error.reason);\r\n});\r\n\r\nconst app = express();\r\napp.use(cors());\r\napp.use(bodyParser.json());\r\napp.use('/api/users', userRouter);\r\napp.use('/api/products', productRouter);\r\napp.use('/api/orders', orderRouter);\r\napp.get('/api/paypal/clientID', (req, res) => {\r\n  res.send({clientId: process.env.PAYPAL_CLIENT_ID})\r\n})\r\n\r\n// eslint-disable-next-line no-unused-vars\r\napp.use((err, req, res, next) => {\r\n  const status = err.name && err.name === 'ValidationError' ? 400: 500;\r\n  res.status(status).send({ message: err.message});\r\n});\r\napp.listen(5000, () => {\r\n  console.log('serve at http://localhost:5000');\r\n});\r\n"]}},"mtime":1651316233590},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\data.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\n/* eslint-disable linebreak-style */\nmodule.exports = {\n  products: [{\n    _id: '111111111111111111111111',\n    name: \"Regata Nike Legend 2.0 Tee Masculina - Preto+Branco\",\n    category: \"Shirts\",\n    image: \"/images/product-1.jpg\",\n    price: 149.99,\n    brand: \"Nike\",\n    rating: 4.5,\n    numReviews: 10,\n    countInStock: 6\n  }, {\n    _id: \"2\",\n    name: \"Calça AEROREADY Sereno Slim Tapered Cut 3-Stripes\",\n    category: \"Pants\",\n    image: \"/images/product-2.jpg\",\n    price: 249.99,\n    brand: \"Adidas\",\n    rating: 4.0,\n    numReviews: 8,\n    countInStock: 12\n  }, {\n    _id: \"3\",\n    name: \"Moletom Fila Letter New I Preto - Preto\",\n    category: \"Shirts\",\n    image: \"/images/product-3.jpg\",\n    price: 119.99,\n    brand: \"Fila\",\n    rating: 5,\n    numReviews: 1,\n    countInStock: 4\n  }, {\n    _id: \"4\",\n    name: \"Camiseta Adidas Designed to Move Sport 3 Listras Masculina - Preto\",\n    category: 'Shirts',\n    image: \"/images/product-4.jpg\",\n    price: 89.99,\n    brand: \"Adidas\",\n    rating: 4.51,\n    numReviews: 117,\n    countInStock: 7\n  }, {\n    _id: \"5\",\n    name: \"Camiseta Nike Essentials Icon Futura Feminina - Rosa Claro\",\n    category: \"Shirts\",\n    image: \"/images/product-5.jpg\",\n    price: 85.49,\n    brand: \"Nike\",\n    rating: 4.67,\n    numReviews: 528,\n    countInStock: 3\n  }, {\n    _id: \"6\",\n    name: \"Camiseta Puma Cropped Small Logo Feminina - Branco\",\n    category: \"Shirts\",\n    image: \"/images/product-6.jpg\",\n    price: 75.49,\n    brand: \"Puma\",\n    rating: 4.5,\n    numReviews: 10,\n    countInStock: 5\n  }]\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGEuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsInByb2R1Y3RzIiwiX2lkIiwibmFtZSIsImNhdGVnb3J5IiwiaW1hZ2UiLCJwcmljZSIsImJyYW5kIiwicmF0aW5nIiwibnVtUmV2aWV3cyIsImNvdW50SW5TdG9jayJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBQSxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZkMsRUFBQUEsUUFBUSxFQUFFLENBQ1I7QUFDRUMsSUFBQUEsR0FBRyxFQUFFLDBCQURQO0FBRUVDLElBQUFBLElBQUksRUFBRSxxREFGUjtBQUdFQyxJQUFBQSxRQUFRLEVBQUUsUUFIWjtBQUlFQyxJQUFBQSxLQUFLLEVBQUUsdUJBSlQ7QUFLRUMsSUFBQUEsS0FBSyxFQUFFLE1BTFQ7QUFNRUMsSUFBQUEsS0FBSyxFQUFFLE1BTlQ7QUFPRUMsSUFBQUEsTUFBTSxFQUFFLEdBUFY7QUFRRUMsSUFBQUEsVUFBVSxFQUFFLEVBUmQ7QUFTRUMsSUFBQUEsWUFBWSxFQUFFO0FBVGhCLEdBRFEsRUFZUjtBQUNFUixJQUFBQSxHQUFHLEVBQUUsR0FEUDtBQUVFQyxJQUFBQSxJQUFJLEVBQUUsbURBRlI7QUFHRUMsSUFBQUEsUUFBUSxFQUFFLE9BSFo7QUFJRUMsSUFBQUEsS0FBSyxFQUFFLHVCQUpUO0FBS0VDLElBQUFBLEtBQUssRUFBRSxNQUxUO0FBTUVDLElBQUFBLEtBQUssRUFBRSxRQU5UO0FBT0VDLElBQUFBLE1BQU0sRUFBRSxHQVBWO0FBUUVDLElBQUFBLFVBQVUsRUFBRSxDQVJkO0FBU0VDLElBQUFBLFlBQVksRUFBRTtBQVRoQixHQVpRLEVBdUJSO0FBQ0VSLElBQUFBLEdBQUcsRUFBRSxHQURQO0FBRUVDLElBQUFBLElBQUksRUFBRSx5Q0FGUjtBQUdFQyxJQUFBQSxRQUFRLEVBQUUsUUFIWjtBQUlFQyxJQUFBQSxLQUFLLEVBQUUsdUJBSlQ7QUFLRUMsSUFBQUEsS0FBSyxFQUFFLE1BTFQ7QUFNRUMsSUFBQUEsS0FBSyxFQUFFLE1BTlQ7QUFPRUMsSUFBQUEsTUFBTSxFQUFFLENBUFY7QUFRRUMsSUFBQUEsVUFBVSxFQUFFLENBUmQ7QUFTRUMsSUFBQUEsWUFBWSxFQUFFO0FBVGhCLEdBdkJRLEVBa0NSO0FBQ0VSLElBQUFBLEdBQUcsRUFBRSxHQURQO0FBRUVDLElBQUFBLElBQUksRUFBRSxvRUFGUjtBQUdFQyxJQUFBQSxRQUFRLEVBQUUsUUFIWjtBQUlFQyxJQUFBQSxLQUFLLEVBQUUsdUJBSlQ7QUFLRUMsSUFBQUEsS0FBSyxFQUFFLEtBTFQ7QUFNRUMsSUFBQUEsS0FBSyxFQUFFLFFBTlQ7QUFPRUMsSUFBQUEsTUFBTSxFQUFFLElBUFY7QUFRRUMsSUFBQUEsVUFBVSxFQUFFLEdBUmQ7QUFTRUMsSUFBQUEsWUFBWSxFQUFFO0FBVGhCLEdBbENRLEVBNkNSO0FBQ0VSLElBQUFBLEdBQUcsRUFBRSxHQURQO0FBRUVDLElBQUFBLElBQUksRUFBRSw0REFGUjtBQUdFQyxJQUFBQSxRQUFRLEVBQUUsUUFIWjtBQUlFQyxJQUFBQSxLQUFLLEVBQUUsdUJBSlQ7QUFLRUMsSUFBQUEsS0FBSyxFQUFFLEtBTFQ7QUFNRUMsSUFBQUEsS0FBSyxFQUFFLE1BTlQ7QUFPRUMsSUFBQUEsTUFBTSxFQUFFLElBUFY7QUFRRUMsSUFBQUEsVUFBVSxFQUFFLEdBUmQ7QUFTRUMsSUFBQUEsWUFBWSxFQUFFO0FBVGhCLEdBN0NRLEVBd0RSO0FBQ0VSLElBQUFBLEdBQUcsRUFBRSxHQURQO0FBRUVDLElBQUFBLElBQUksRUFBRSxvREFGUjtBQUdFQyxJQUFBQSxRQUFRLEVBQUUsUUFIWjtBQUlFQyxJQUFBQSxLQUFLLEVBQUUsdUJBSlQ7QUFLRUMsSUFBQUEsS0FBSyxFQUFFLEtBTFQ7QUFNRUMsSUFBQUEsS0FBSyxFQUFFLE1BTlQ7QUFPRUMsSUFBQUEsTUFBTSxFQUFFLEdBUFY7QUFRRUMsSUFBQUEsVUFBVSxFQUFFLEVBUmQ7QUFTRUMsSUFBQUEsWUFBWSxFQUFFO0FBVGhCLEdBeERRO0FBREssQ0FBakIiLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxndWlsaGVybWVcXERvd25sb2Fkc1xcanNhbWF6b25hXFxiYWNrZW5kXFwiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBsaW5lYnJlYWstc3R5bGUgKi9cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgcHJvZHVjdHM6IFtcclxuICAgIHtcclxuICAgICAgX2lkOiAnMTExMTExMTExMTExMTExMTExMTExMTExJyxcclxuICAgICAgbmFtZTogXCJSZWdhdGEgTmlrZSBMZWdlbmQgMi4wIFRlZSBNYXNjdWxpbmEgLSBQcmV0bytCcmFuY29cIixcclxuICAgICAgY2F0ZWdvcnk6IFwiU2hpcnRzXCIsXHJcbiAgICAgIGltYWdlOiBcIi9pbWFnZXMvcHJvZHVjdC0xLmpwZ1wiLFxyXG4gICAgICBwcmljZTogMTQ5Ljk5LFxyXG4gICAgICBicmFuZDogXCJOaWtlXCIsXHJcbiAgICAgIHJhdGluZzogNC41LFxyXG4gICAgICBudW1SZXZpZXdzOiAxMCxcclxuICAgICAgY291bnRJblN0b2NrOiA2LFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgX2lkOiBcIjJcIixcclxuICAgICAgbmFtZTogXCJDYWzDp2EgQUVST1JFQURZIFNlcmVubyBTbGltIFRhcGVyZWQgQ3V0IDMtU3RyaXBlc1wiLFxyXG4gICAgICBjYXRlZ29yeTogXCJQYW50c1wiLFxyXG4gICAgICBpbWFnZTogXCIvaW1hZ2VzL3Byb2R1Y3QtMi5qcGdcIixcclxuICAgICAgcHJpY2U6IDI0OS45OSxcclxuICAgICAgYnJhbmQ6IFwiQWRpZGFzXCIsXHJcbiAgICAgIHJhdGluZzogNC4wLFxyXG4gICAgICBudW1SZXZpZXdzOiA4LFxyXG4gICAgICBjb3VudEluU3RvY2s6IDEyLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgX2lkOiBcIjNcIixcclxuICAgICAgbmFtZTogXCJNb2xldG9tIEZpbGEgTGV0dGVyIE5ldyBJIFByZXRvIC0gUHJldG9cIixcclxuICAgICAgY2F0ZWdvcnk6IFwiU2hpcnRzXCIsXHJcbiAgICAgIGltYWdlOiBcIi9pbWFnZXMvcHJvZHVjdC0zLmpwZ1wiLFxyXG4gICAgICBwcmljZTogMTE5Ljk5LFxyXG4gICAgICBicmFuZDogXCJGaWxhXCIsXHJcbiAgICAgIHJhdGluZzogNSxcclxuICAgICAgbnVtUmV2aWV3czogMSxcclxuICAgICAgY291bnRJblN0b2NrOiA0LFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgX2lkOiBcIjRcIixcclxuICAgICAgbmFtZTogXCJDYW1pc2V0YSBBZGlkYXMgRGVzaWduZWQgdG8gTW92ZSBTcG9ydCAzIExpc3RyYXMgTWFzY3VsaW5hIC0gUHJldG9cIixcclxuICAgICAgY2F0ZWdvcnk6ICdTaGlydHMnLFxyXG4gICAgICBpbWFnZTogXCIvaW1hZ2VzL3Byb2R1Y3QtNC5qcGdcIixcclxuICAgICAgcHJpY2U6IDg5Ljk5LFxyXG4gICAgICBicmFuZDogXCJBZGlkYXNcIixcclxuICAgICAgcmF0aW5nOiA0LjUxLFxyXG4gICAgICBudW1SZXZpZXdzOiAxMTcsXHJcbiAgICAgIGNvdW50SW5TdG9jazogNyxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIF9pZDogXCI1XCIsXHJcbiAgICAgIG5hbWU6IFwiQ2FtaXNldGEgTmlrZSBFc3NlbnRpYWxzIEljb24gRnV0dXJhIEZlbWluaW5hIC0gUm9zYSBDbGFyb1wiLFxyXG4gICAgICBjYXRlZ29yeTogXCJTaGlydHNcIixcclxuICAgICAgaW1hZ2U6IFwiL2ltYWdlcy9wcm9kdWN0LTUuanBnXCIsXHJcbiAgICAgIHByaWNlOiA4NS40OSxcclxuICAgICAgYnJhbmQ6IFwiTmlrZVwiLFxyXG4gICAgICByYXRpbmc6IDQuNjcsXHJcbiAgICAgIG51bVJldmlld3M6IDUyOCxcclxuICAgICAgY291bnRJblN0b2NrOiAzLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgX2lkOiBcIjZcIixcclxuICAgICAgbmFtZTogXCJDYW1pc2V0YSBQdW1hIENyb3BwZWQgU21hbGwgTG9nbyBGZW1pbmluYSAtIEJyYW5jb1wiLFxyXG4gICAgICBjYXRlZ29yeTogXCJTaGlydHNcIixcclxuICAgICAgaW1hZ2U6IFwiL2ltYWdlcy9wcm9kdWN0LTYuanBnXCIsXHJcbiAgICAgIHByaWNlOiA3NS40OSxcclxuICAgICAgYnJhbmQ6IFwiUHVtYVwiLFxyXG4gICAgICByYXRpbmc6IDQuNSxcclxuICAgICAgbnVtUmV2aWV3czogMTAsXHJcbiAgICAgIGNvdW50SW5TdG9jazogNSxcclxuICAgIH0sXHJcbiAgXSxcclxufTtcclxuIl19","map":{"version":3,"sources":["data.js"],"names":["module","exports","products","_id","name","category","image","price","brand","rating","numReviews","countInStock"],"mappings":";;AAAA;AACAA,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,QAAQ,EAAE,CACR;AACEC,IAAAA,GAAG,EAAE,0BADP;AAEEC,IAAAA,IAAI,EAAE,qDAFR;AAGEC,IAAAA,QAAQ,EAAE,QAHZ;AAIEC,IAAAA,KAAK,EAAE,uBAJT;AAKEC,IAAAA,KAAK,EAAE,MALT;AAMEC,IAAAA,KAAK,EAAE,MANT;AAOEC,IAAAA,MAAM,EAAE,GAPV;AAQEC,IAAAA,UAAU,EAAE,EARd;AASEC,IAAAA,YAAY,EAAE;AAThB,GADQ,EAYR;AACER,IAAAA,GAAG,EAAE,GADP;AAEEC,IAAAA,IAAI,EAAE,mDAFR;AAGEC,IAAAA,QAAQ,EAAE,OAHZ;AAIEC,IAAAA,KAAK,EAAE,uBAJT;AAKEC,IAAAA,KAAK,EAAE,MALT;AAMEC,IAAAA,KAAK,EAAE,QANT;AAOEC,IAAAA,MAAM,EAAE,GAPV;AAQEC,IAAAA,UAAU,EAAE,CARd;AASEC,IAAAA,YAAY,EAAE;AAThB,GAZQ,EAuBR;AACER,IAAAA,GAAG,EAAE,GADP;AAEEC,IAAAA,IAAI,EAAE,yCAFR;AAGEC,IAAAA,QAAQ,EAAE,QAHZ;AAIEC,IAAAA,KAAK,EAAE,uBAJT;AAKEC,IAAAA,KAAK,EAAE,MALT;AAMEC,IAAAA,KAAK,EAAE,MANT;AAOEC,IAAAA,MAAM,EAAE,CAPV;AAQEC,IAAAA,UAAU,EAAE,CARd;AASEC,IAAAA,YAAY,EAAE;AAThB,GAvBQ,EAkCR;AACER,IAAAA,GAAG,EAAE,GADP;AAEEC,IAAAA,IAAI,EAAE,oEAFR;AAGEC,IAAAA,QAAQ,EAAE,QAHZ;AAIEC,IAAAA,KAAK,EAAE,uBAJT;AAKEC,IAAAA,KAAK,EAAE,KALT;AAMEC,IAAAA,KAAK,EAAE,QANT;AAOEC,IAAAA,MAAM,EAAE,IAPV;AAQEC,IAAAA,UAAU,EAAE,GARd;AASEC,IAAAA,YAAY,EAAE;AAThB,GAlCQ,EA6CR;AACER,IAAAA,GAAG,EAAE,GADP;AAEEC,IAAAA,IAAI,EAAE,4DAFR;AAGEC,IAAAA,QAAQ,EAAE,QAHZ;AAIEC,IAAAA,KAAK,EAAE,uBAJT;AAKEC,IAAAA,KAAK,EAAE,KALT;AAMEC,IAAAA,KAAK,EAAE,MANT;AAOEC,IAAAA,MAAM,EAAE,IAPV;AAQEC,IAAAA,UAAU,EAAE,GARd;AASEC,IAAAA,YAAY,EAAE;AAThB,GA7CQ,EAwDR;AACER,IAAAA,GAAG,EAAE,GADP;AAEEC,IAAAA,IAAI,EAAE,oDAFR;AAGEC,IAAAA,QAAQ,EAAE,QAHZ;AAIEC,IAAAA,KAAK,EAAE,uBAJT;AAKEC,IAAAA,KAAK,EAAE,KALT;AAMEC,IAAAA,KAAK,EAAE,MANT;AAOEC,IAAAA,MAAM,EAAE,GAPV;AAQEC,IAAAA,UAAU,EAAE,EARd;AASEC,IAAAA,YAAY,EAAE;AAThB,GAxDQ;AADK,CAAjB","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\","sourcesContent":["/* eslint-disable linebreak-style */\r\nmodule.exports = {\r\n  products: [\r\n    {\r\n      _id: '111111111111111111111111',\r\n      name: \"Regata Nike Legend 2.0 Tee Masculina - Preto+Branco\",\r\n      category: \"Shirts\",\r\n      image: \"/images/product-1.jpg\",\r\n      price: 149.99,\r\n      brand: \"Nike\",\r\n      rating: 4.5,\r\n      numReviews: 10,\r\n      countInStock: 6,\r\n    },\r\n    {\r\n      _id: \"2\",\r\n      name: \"Calça AEROREADY Sereno Slim Tapered Cut 3-Stripes\",\r\n      category: \"Pants\",\r\n      image: \"/images/product-2.jpg\",\r\n      price: 249.99,\r\n      brand: \"Adidas\",\r\n      rating: 4.0,\r\n      numReviews: 8,\r\n      countInStock: 12,\r\n    },\r\n    {\r\n      _id: \"3\",\r\n      name: \"Moletom Fila Letter New I Preto - Preto\",\r\n      category: \"Shirts\",\r\n      image: \"/images/product-3.jpg\",\r\n      price: 119.99,\r\n      brand: \"Fila\",\r\n      rating: 5,\r\n      numReviews: 1,\r\n      countInStock: 4,\r\n    },\r\n    {\r\n      _id: \"4\",\r\n      name: \"Camiseta Adidas Designed to Move Sport 3 Listras Masculina - Preto\",\r\n      category: 'Shirts',\r\n      image: \"/images/product-4.jpg\",\r\n      price: 89.99,\r\n      brand: \"Adidas\",\r\n      rating: 4.51,\r\n      numReviews: 117,\r\n      countInStock: 7,\r\n    },\r\n    {\r\n      _id: \"5\",\r\n      name: \"Camiseta Nike Essentials Icon Futura Feminina - Rosa Claro\",\r\n      category: \"Shirts\",\r\n      image: \"/images/product-5.jpg\",\r\n      price: 85.49,\r\n      brand: \"Nike\",\r\n      rating: 4.67,\r\n      numReviews: 528,\r\n      countInStock: 3,\r\n    },\r\n    {\r\n      _id: \"6\",\r\n      name: \"Camiseta Puma Cropped Small Logo Feminina - Branco\",\r\n      category: \"Shirts\",\r\n      image: \"/images/product-6.jpg\",\r\n      price: 75.49,\r\n      brand: \"Puma\",\r\n      rating: 4.5,\r\n      numReviews: 10,\r\n      countInStock: 5,\r\n    },\r\n  ],\r\n};\r\n"]}},"mtime":1650134779202},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\data.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\n/* eslint-disable linebreak-style */\nmodule.exports = {\n  products: [{\n    _id: '111111111111111111111111',\n    name: \"Regata Nike Legend 2.0 Tee Masculina - Preto+Branco\",\n    category: \"Shirts\",\n    image: \"/images/product-1.jpg\",\n    price: 149.99,\n    brand: \"Nike\",\n    rating: 4.5,\n    numReviews: 10,\n    countInStock: 6\n  }, {\n    _id: \"2\",\n    name: \"Calça AEROREADY Sereno Slim Tapered Cut 3-Stripes\",\n    category: \"Pants\",\n    image: \"/images/product-2.jpg\",\n    price: 249.99,\n    brand: \"Adidas\",\n    rating: 4.0,\n    numReviews: 8,\n    countInStock: 12\n  }, {\n    _id: \"3\",\n    name: \"Moletom Fila Letter New I Preto - Preto\",\n    category: \"Shirts\",\n    image: \"/images/product-3.jpg\",\n    price: 119.99,\n    brand: \"Fila\",\n    rating: 5,\n    numReviews: 1,\n    countInStock: 4\n  }, {\n    _id: \"4\",\n    name: \"Camiseta Adidas Designed to Move Sport 3 Listras Masculina - Preto\",\n    category: 'Shirts',\n    image: \"/images/product-4.jpg\",\n    price: 89.99,\n    brand: \"Adidas\",\n    rating: 4.51,\n    numReviews: 117,\n    countInStock: 7\n  }, {\n    _id: \"5\",\n    name: \"Camiseta Nike Essentials Icon Futura Feminina - Rosa Claro\",\n    category: \"Shirts\",\n    image: \"/images/product-5.jpg\",\n    price: 85.49,\n    brand: \"Nike\",\n    rating: 4.67,\n    numReviews: 528,\n    countInStock: 3\n  }, {\n    _id: \"6\",\n    name: \"Camiseta Puma Cropped Small Logo Feminina - Branco\",\n    category: \"Shirts\",\n    image: \"/images/product-6.jpg\",\n    price: 75.49,\n    brand: \"Puma\",\n    rating: 4.5,\n    numReviews: 10,\n    countInStock: 5\n  }]\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGEuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsInByb2R1Y3RzIiwiX2lkIiwibmFtZSIsImNhdGVnb3J5IiwiaW1hZ2UiLCJwcmljZSIsImJyYW5kIiwicmF0aW5nIiwibnVtUmV2aWV3cyIsImNvdW50SW5TdG9jayJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBQSxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZkMsRUFBQUEsUUFBUSxFQUFFLENBQ1I7QUFDRUMsSUFBQUEsR0FBRyxFQUFFLDBCQURQO0FBRUVDLElBQUFBLElBQUksRUFBRSxxREFGUjtBQUdFQyxJQUFBQSxRQUFRLEVBQUUsUUFIWjtBQUlFQyxJQUFBQSxLQUFLLEVBQUUsdUJBSlQ7QUFLRUMsSUFBQUEsS0FBSyxFQUFFLE1BTFQ7QUFNRUMsSUFBQUEsS0FBSyxFQUFFLE1BTlQ7QUFPRUMsSUFBQUEsTUFBTSxFQUFFLEdBUFY7QUFRRUMsSUFBQUEsVUFBVSxFQUFFLEVBUmQ7QUFTRUMsSUFBQUEsWUFBWSxFQUFFO0FBVGhCLEdBRFEsRUFZUjtBQUNFUixJQUFBQSxHQUFHLEVBQUUsR0FEUDtBQUVFQyxJQUFBQSxJQUFJLEVBQUUsbURBRlI7QUFHRUMsSUFBQUEsUUFBUSxFQUFFLE9BSFo7QUFJRUMsSUFBQUEsS0FBSyxFQUFFLHVCQUpUO0FBS0VDLElBQUFBLEtBQUssRUFBRSxNQUxUO0FBTUVDLElBQUFBLEtBQUssRUFBRSxRQU5UO0FBT0VDLElBQUFBLE1BQU0sRUFBRSxHQVBWO0FBUUVDLElBQUFBLFVBQVUsRUFBRSxDQVJkO0FBU0VDLElBQUFBLFlBQVksRUFBRTtBQVRoQixHQVpRLEVBdUJSO0FBQ0VSLElBQUFBLEdBQUcsRUFBRSxHQURQO0FBRUVDLElBQUFBLElBQUksRUFBRSx5Q0FGUjtBQUdFQyxJQUFBQSxRQUFRLEVBQUUsUUFIWjtBQUlFQyxJQUFBQSxLQUFLLEVBQUUsdUJBSlQ7QUFLRUMsSUFBQUEsS0FBSyxFQUFFLE1BTFQ7QUFNRUMsSUFBQUEsS0FBSyxFQUFFLE1BTlQ7QUFPRUMsSUFBQUEsTUFBTSxFQUFFLENBUFY7QUFRRUMsSUFBQUEsVUFBVSxFQUFFLENBUmQ7QUFTRUMsSUFBQUEsWUFBWSxFQUFFO0FBVGhCLEdBdkJRLEVBa0NSO0FBQ0VSLElBQUFBLEdBQUcsRUFBRSxHQURQO0FBRUVDLElBQUFBLElBQUksRUFBRSxvRUFGUjtBQUdFQyxJQUFBQSxRQUFRLEVBQUUsUUFIWjtBQUlFQyxJQUFBQSxLQUFLLEVBQUUsdUJBSlQ7QUFLRUMsSUFBQUEsS0FBSyxFQUFFLEtBTFQ7QUFNRUMsSUFBQUEsS0FBSyxFQUFFLFFBTlQ7QUFPRUMsSUFBQUEsTUFBTSxFQUFFLElBUFY7QUFRRUMsSUFBQUEsVUFBVSxFQUFFLEdBUmQ7QUFTRUMsSUFBQUEsWUFBWSxFQUFFO0FBVGhCLEdBbENRLEVBNkNSO0FBQ0VSLElBQUFBLEdBQUcsRUFBRSxHQURQO0FBRUVDLElBQUFBLElBQUksRUFBRSw0REFGUjtBQUdFQyxJQUFBQSxRQUFRLEVBQUUsUUFIWjtBQUlFQyxJQUFBQSxLQUFLLEVBQUUsdUJBSlQ7QUFLRUMsSUFBQUEsS0FBSyxFQUFFLEtBTFQ7QUFNRUMsSUFBQUEsS0FBSyxFQUFFLE1BTlQ7QUFPRUMsSUFBQUEsTUFBTSxFQUFFLElBUFY7QUFRRUMsSUFBQUEsVUFBVSxFQUFFLEdBUmQ7QUFTRUMsSUFBQUEsWUFBWSxFQUFFO0FBVGhCLEdBN0NRLEVBd0RSO0FBQ0VSLElBQUFBLEdBQUcsRUFBRSxHQURQO0FBRUVDLElBQUFBLElBQUksRUFBRSxvREFGUjtBQUdFQyxJQUFBQSxRQUFRLEVBQUUsUUFIWjtBQUlFQyxJQUFBQSxLQUFLLEVBQUUsdUJBSlQ7QUFLRUMsSUFBQUEsS0FBSyxFQUFFLEtBTFQ7QUFNRUMsSUFBQUEsS0FBSyxFQUFFLE1BTlQ7QUFPRUMsSUFBQUEsTUFBTSxFQUFFLEdBUFY7QUFRRUMsSUFBQUEsVUFBVSxFQUFFLEVBUmQ7QUFTRUMsSUFBQUEsWUFBWSxFQUFFO0FBVGhCLEdBeERRO0FBREssQ0FBakIiLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxndWlsaGVybWVcXERvd25sb2Fkc1xcanNhbWF6b25hXFxiYWNrZW5kXFwiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBsaW5lYnJlYWstc3R5bGUgKi9cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgcHJvZHVjdHM6IFtcclxuICAgIHtcclxuICAgICAgX2lkOiAnMTExMTExMTExMTExMTExMTExMTExMTExJyxcclxuICAgICAgbmFtZTogXCJSZWdhdGEgTmlrZSBMZWdlbmQgMi4wIFRlZSBNYXNjdWxpbmEgLSBQcmV0bytCcmFuY29cIixcclxuICAgICAgY2F0ZWdvcnk6IFwiU2hpcnRzXCIsXHJcbiAgICAgIGltYWdlOiBcIi9pbWFnZXMvcHJvZHVjdC0xLmpwZ1wiLFxyXG4gICAgICBwcmljZTogMTQ5Ljk5LFxyXG4gICAgICBicmFuZDogXCJOaWtlXCIsXHJcbiAgICAgIHJhdGluZzogNC41LFxyXG4gICAgICBudW1SZXZpZXdzOiAxMCxcclxuICAgICAgY291bnRJblN0b2NrOiA2LFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgX2lkOiBcIjJcIixcclxuICAgICAgbmFtZTogXCJDYWzDp2EgQUVST1JFQURZIFNlcmVubyBTbGltIFRhcGVyZWQgQ3V0IDMtU3RyaXBlc1wiLFxyXG4gICAgICBjYXRlZ29yeTogXCJQYW50c1wiLFxyXG4gICAgICBpbWFnZTogXCIvaW1hZ2VzL3Byb2R1Y3QtMi5qcGdcIixcclxuICAgICAgcHJpY2U6IDI0OS45OSxcclxuICAgICAgYnJhbmQ6IFwiQWRpZGFzXCIsXHJcbiAgICAgIHJhdGluZzogNC4wLFxyXG4gICAgICBudW1SZXZpZXdzOiA4LFxyXG4gICAgICBjb3VudEluU3RvY2s6IDEyLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgX2lkOiBcIjNcIixcclxuICAgICAgbmFtZTogXCJNb2xldG9tIEZpbGEgTGV0dGVyIE5ldyBJIFByZXRvIC0gUHJldG9cIixcclxuICAgICAgY2F0ZWdvcnk6IFwiU2hpcnRzXCIsXHJcbiAgICAgIGltYWdlOiBcIi9pbWFnZXMvcHJvZHVjdC0zLmpwZ1wiLFxyXG4gICAgICBwcmljZTogMTE5Ljk5LFxyXG4gICAgICBicmFuZDogXCJGaWxhXCIsXHJcbiAgICAgIHJhdGluZzogNSxcclxuICAgICAgbnVtUmV2aWV3czogMSxcclxuICAgICAgY291bnRJblN0b2NrOiA0LFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgX2lkOiBcIjRcIixcclxuICAgICAgbmFtZTogXCJDYW1pc2V0YSBBZGlkYXMgRGVzaWduZWQgdG8gTW92ZSBTcG9ydCAzIExpc3RyYXMgTWFzY3VsaW5hIC0gUHJldG9cIixcclxuICAgICAgY2F0ZWdvcnk6ICdTaGlydHMnLFxyXG4gICAgICBpbWFnZTogXCIvaW1hZ2VzL3Byb2R1Y3QtNC5qcGdcIixcclxuICAgICAgcHJpY2U6IDg5Ljk5LFxyXG4gICAgICBicmFuZDogXCJBZGlkYXNcIixcclxuICAgICAgcmF0aW5nOiA0LjUxLFxyXG4gICAgICBudW1SZXZpZXdzOiAxMTcsXHJcbiAgICAgIGNvdW50SW5TdG9jazogNyxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIF9pZDogXCI1XCIsXHJcbiAgICAgIG5hbWU6IFwiQ2FtaXNldGEgTmlrZSBFc3NlbnRpYWxzIEljb24gRnV0dXJhIEZlbWluaW5hIC0gUm9zYSBDbGFyb1wiLFxyXG4gICAgICBjYXRlZ29yeTogXCJTaGlydHNcIixcclxuICAgICAgaW1hZ2U6IFwiL2ltYWdlcy9wcm9kdWN0LTUuanBnXCIsXHJcbiAgICAgIHByaWNlOiA4NS40OSxcclxuICAgICAgYnJhbmQ6IFwiTmlrZVwiLFxyXG4gICAgICByYXRpbmc6IDQuNjcsXHJcbiAgICAgIG51bVJldmlld3M6IDUyOCxcclxuICAgICAgY291bnRJblN0b2NrOiAzLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgX2lkOiBcIjZcIixcclxuICAgICAgbmFtZTogXCJDYW1pc2V0YSBQdW1hIENyb3BwZWQgU21hbGwgTG9nbyBGZW1pbmluYSAtIEJyYW5jb1wiLFxyXG4gICAgICBjYXRlZ29yeTogXCJTaGlydHNcIixcclxuICAgICAgaW1hZ2U6IFwiL2ltYWdlcy9wcm9kdWN0LTYuanBnXCIsXHJcbiAgICAgIHByaWNlOiA3NS40OSxcclxuICAgICAgYnJhbmQ6IFwiUHVtYVwiLFxyXG4gICAgICByYXRpbmc6IDQuNSxcclxuICAgICAgbnVtUmV2aWV3czogMTAsXHJcbiAgICAgIGNvdW50SW5TdG9jazogNSxcclxuICAgIH0sXHJcbiAgXSxcclxufTtcclxuIl19","map":{"version":3,"sources":["data.js"],"names":["module","exports","products","_id","name","category","image","price","brand","rating","numReviews","countInStock"],"mappings":";;AAAA;AACAA,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,QAAQ,EAAE,CACR;AACEC,IAAAA,GAAG,EAAE,0BADP;AAEEC,IAAAA,IAAI,EAAE,qDAFR;AAGEC,IAAAA,QAAQ,EAAE,QAHZ;AAIEC,IAAAA,KAAK,EAAE,uBAJT;AAKEC,IAAAA,KAAK,EAAE,MALT;AAMEC,IAAAA,KAAK,EAAE,MANT;AAOEC,IAAAA,MAAM,EAAE,GAPV;AAQEC,IAAAA,UAAU,EAAE,EARd;AASEC,IAAAA,YAAY,EAAE;AAThB,GADQ,EAYR;AACER,IAAAA,GAAG,EAAE,GADP;AAEEC,IAAAA,IAAI,EAAE,mDAFR;AAGEC,IAAAA,QAAQ,EAAE,OAHZ;AAIEC,IAAAA,KAAK,EAAE,uBAJT;AAKEC,IAAAA,KAAK,EAAE,MALT;AAMEC,IAAAA,KAAK,EAAE,QANT;AAOEC,IAAAA,MAAM,EAAE,GAPV;AAQEC,IAAAA,UAAU,EAAE,CARd;AASEC,IAAAA,YAAY,EAAE;AAThB,GAZQ,EAuBR;AACER,IAAAA,GAAG,EAAE,GADP;AAEEC,IAAAA,IAAI,EAAE,yCAFR;AAGEC,IAAAA,QAAQ,EAAE,QAHZ;AAIEC,IAAAA,KAAK,EAAE,uBAJT;AAKEC,IAAAA,KAAK,EAAE,MALT;AAMEC,IAAAA,KAAK,EAAE,MANT;AAOEC,IAAAA,MAAM,EAAE,CAPV;AAQEC,IAAAA,UAAU,EAAE,CARd;AASEC,IAAAA,YAAY,EAAE;AAThB,GAvBQ,EAkCR;AACER,IAAAA,GAAG,EAAE,GADP;AAEEC,IAAAA,IAAI,EAAE,oEAFR;AAGEC,IAAAA,QAAQ,EAAE,QAHZ;AAIEC,IAAAA,KAAK,EAAE,uBAJT;AAKEC,IAAAA,KAAK,EAAE,KALT;AAMEC,IAAAA,KAAK,EAAE,QANT;AAOEC,IAAAA,MAAM,EAAE,IAPV;AAQEC,IAAAA,UAAU,EAAE,GARd;AASEC,IAAAA,YAAY,EAAE;AAThB,GAlCQ,EA6CR;AACER,IAAAA,GAAG,EAAE,GADP;AAEEC,IAAAA,IAAI,EAAE,4DAFR;AAGEC,IAAAA,QAAQ,EAAE,QAHZ;AAIEC,IAAAA,KAAK,EAAE,uBAJT;AAKEC,IAAAA,KAAK,EAAE,KALT;AAMEC,IAAAA,KAAK,EAAE,MANT;AAOEC,IAAAA,MAAM,EAAE,IAPV;AAQEC,IAAAA,UAAU,EAAE,GARd;AASEC,IAAAA,YAAY,EAAE;AAThB,GA7CQ,EAwDR;AACER,IAAAA,GAAG,EAAE,GADP;AAEEC,IAAAA,IAAI,EAAE,oDAFR;AAGEC,IAAAA,QAAQ,EAAE,QAHZ;AAIEC,IAAAA,KAAK,EAAE,uBAJT;AAKEC,IAAAA,KAAK,EAAE,KALT;AAMEC,IAAAA,KAAK,EAAE,MANT;AAOEC,IAAAA,MAAM,EAAE,GAPV;AAQEC,IAAAA,UAAU,EAAE,EARd;AASEC,IAAAA,YAAY,EAAE;AAThB,GAxDQ;AADK,CAAjB","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\","sourcesContent":["/* eslint-disable linebreak-style */\r\nmodule.exports = {\r\n  products: [\r\n    {\r\n      _id: '111111111111111111111111',\r\n      name: \"Regata Nike Legend 2.0 Tee Masculina - Preto+Branco\",\r\n      category: \"Shirts\",\r\n      image: \"/images/product-1.jpg\",\r\n      price: 149.99,\r\n      brand: \"Nike\",\r\n      rating: 4.5,\r\n      numReviews: 10,\r\n      countInStock: 6,\r\n    },\r\n    {\r\n      _id: \"2\",\r\n      name: \"Calça AEROREADY Sereno Slim Tapered Cut 3-Stripes\",\r\n      category: \"Pants\",\r\n      image: \"/images/product-2.jpg\",\r\n      price: 249.99,\r\n      brand: \"Adidas\",\r\n      rating: 4.0,\r\n      numReviews: 8,\r\n      countInStock: 12,\r\n    },\r\n    {\r\n      _id: \"3\",\r\n      name: \"Moletom Fila Letter New I Preto - Preto\",\r\n      category: \"Shirts\",\r\n      image: \"/images/product-3.jpg\",\r\n      price: 119.99,\r\n      brand: \"Fila\",\r\n      rating: 5,\r\n      numReviews: 1,\r\n      countInStock: 4,\r\n    },\r\n    {\r\n      _id: \"4\",\r\n      name: \"Camiseta Adidas Designed to Move Sport 3 Listras Masculina - Preto\",\r\n      category: 'Shirts',\r\n      image: \"/images/product-4.jpg\",\r\n      price: 89.99,\r\n      brand: \"Adidas\",\r\n      rating: 4.51,\r\n      numReviews: 117,\r\n      countInStock: 7,\r\n    },\r\n    {\r\n      _id: \"5\",\r\n      name: \"Camiseta Nike Essentials Icon Futura Feminina - Rosa Claro\",\r\n      category: \"Shirts\",\r\n      image: \"/images/product-5.jpg\",\r\n      price: 85.49,\r\n      brand: \"Nike\",\r\n      rating: 4.67,\r\n      numReviews: 528,\r\n      countInStock: 3,\r\n    },\r\n    {\r\n      _id: \"6\",\r\n      name: \"Camiseta Puma Cropped Small Logo Feminina - Branco\",\r\n      category: \"Shirts\",\r\n      image: \"/images/product-6.jpg\",\r\n      price: 75.49,\r\n      brand: \"Puma\",\r\n      rating: 4.5,\r\n      numReviews: 10,\r\n      countInStock: 5,\r\n    },\r\n  ],\r\n};\r\n"]}},"mtime":1650134779202},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\config.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_dotenv.default.config();\n\nvar _default = {\n  MONGODB_URL: process.env.MONDODB_URL\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJNT05HT0RCX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJNT05ET0RCX1VSTCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBRUFBLGdCQUFPQyxNQUFQOztlQUVlO0FBQ1hDLEVBQUFBLFdBQVcsRUFBRUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDO0FBRGQsQyIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc2FtYXpvbmFcXGJhY2tlbmRcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcclxuXHJcbmRvdGVudi5jb25maWcoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIE1PTkdPREJfVVJMOiBwcm9jZXNzLmVudi5NT05ET0RCX1VSTCxcclxufTsiXX0=","map":{"version":3,"sources":["config.js"],"names":["dotenv","config","MONGODB_URL","process","env","MONDODB_URL"],"mappings":";;;;;;;AAAA;;;;AAEAA,gBAAOC,MAAP;;eAEe;AACXC,EAAAA,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC;AADd,C","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\","sourcesContent":["import dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nexport default {\r\n    MONGODB_URL: process.env.MONDODB_URL,\r\n};"]}},"mtime":1649787496962},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\config.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_dotenv.default.config();\n\nvar _default = {\n  MONGODB_URL: process.env.MONDODB_URL\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJNT05HT0RCX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJNT05ET0RCX1VSTCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBRUFBLGdCQUFPQyxNQUFQOztlQUVlO0FBQ1hDLEVBQUFBLFdBQVcsRUFBRUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDO0FBRGQsQyIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc2FtYXpvbmFcXGJhY2tlbmRcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcclxuXHJcbmRvdGVudi5jb25maWcoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIE1PTkdPREJfVVJMOiBwcm9jZXNzLmVudi5NT05ET0RCX1VSTFxyXG59OyJdfQ==","map":{"version":3,"sources":["config.js"],"names":["dotenv","config","MONGODB_URL","process","env","MONDODB_URL"],"mappings":";;;;;;;AAAA;;;;AAEAA,gBAAOC,MAAP;;eAEe;AACXC,EAAAA,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC;AADd,C","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\","sourcesContent":["import dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nexport default {\r\n    MONGODB_URL: process.env.MONDODB_URL\r\n};"]}},"mtime":1649775655196},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\routers\\\\userRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\n\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst userRouter = _express.default.Router();\n\nuserRouter.get(\"/createadmin\", (0, _expressAsyncHandler.default)(async (req, res) => {\n  try {\n    const user = new _userModel.default({\n      name: 'admin',\n      email: 'admin@example.com',\n      password: 'jslojinha',\n      isAdmin: true\n    });\n    const createdUser = await user.save();\n    res.send(createdUser);\n  } catch (err) {\n    res.status(500).send({\n      message: err.message\n    });\n  }\n}));\nuserRouter.post('/signin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const signinUser = await _userModel.default.findOne({\n    email: req.body.email,\n    password: req.body.password\n  });\n\n  if (!signinUser) {\n    res.status(401).send({\n      message: 'Invalid Email or Password'\n    });\n  } else {\n    res.send({\n      _id: signinUser._id,\n      name: signinUser.name,\n      email: signinUser.email,\n      isAdmin: signinUser.isAdmin,\n      token: (0, _utils.generateToken)(signinUser)\n    });\n  }\n}));\nuserRouter.post('/register', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = new _userModel.default({\n    name: req.body.name,\n    email: req.body.email,\n    password: req.body.password\n  });\n  const createdUser = await user.save();\n\n  if (!createdUser) {\n    res.status(401).send({\n      message: 'Informações inválidas'\n    });\n  } else {\n    res.send({\n      _id: createdUser._id,\n      name: createdUser.name,\n      email: createdUser.email,\n      isAdmin: createdUser.isAdmin,\n      token: (0, _utils.generateToken)(createdUser)\n    });\n  }\n}));\nuserRouter.put('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = await _userModel.default.findById(req.params.id);\n\n  if (!user) {\n    res.status(401).send({\n      message: 'Usuário não encontrado'\n    });\n  } else {\n    user.name = req.body.name || user.name;\n    user.email = req.body.email || user.email;\n    user.password = req.body.password || user.password;\n    const updatedUser = await user.save();\n    res.send({\n      _id: updatedUser._id,\n      name: updatedUser.name,\n      email: updatedUser.email,\n      isAdmin: updatedUser.isAdmin,\n      token: (0, _utils.generateToken)(updatedUser)\n    });\n  }\n}));\nvar _default = userRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJSb3V0ZXIuanMiXSwibmFtZXMiOlsidXNlclJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJ1c2VyIiwiVXNlciIsIm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiaXNBZG1pbiIsImNyZWF0ZWRVc2VyIiwic2F2ZSIsInNlbmQiLCJlcnIiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsInNpZ25pblVzZXIiLCJmaW5kT25lIiwiYm9keSIsIl9pZCIsInRva2VuIiwicHV0IiwiaXNBdXRoIiwiZmluZEJ5SWQiLCJwYXJhbXMiLCJpZCIsInVwZGF0ZWRVc2VyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxVQUFVLEdBQUdDLGlCQUFRQyxNQUFSLEVBQW5COztBQUVBRixVQUFVLENBQUNHLEdBQVgsQ0FDSSxjQURKLEVBRUksa0NBQXFCLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUN6QyxNQUFJO0FBQ0EsVUFBTUMsSUFBSSxHQUFHLElBQUlDLGtCQUFKLENBQVM7QUFDbEJDLE1BQUFBLElBQUksRUFBRSxPQURZO0FBRWxCQyxNQUFBQSxLQUFLLEVBQUUsbUJBRlc7QUFHbEJDLE1BQUFBLFFBQVEsRUFBRSxXQUhRO0FBSWxCQyxNQUFBQSxPQUFPLEVBQUU7QUFKUyxLQUFULENBQWI7QUFNQSxVQUFNQyxXQUFXLEdBQUcsTUFBTU4sSUFBSSxDQUFDTyxJQUFMLEVBQTFCO0FBQ0FSLElBQUFBLEdBQUcsQ0FBQ1MsSUFBSixDQUFTRixXQUFUO0FBQ0gsR0FURCxDQVNFLE9BQU9HLEdBQVAsRUFBWTtBQUNWVixJQUFBQSxHQUFHLENBQUNXLE1BQUosQ0FBVyxHQUFYLEVBQWdCRixJQUFoQixDQUFxQjtBQUFFRyxNQUFBQSxPQUFPLEVBQUVGLEdBQUcsQ0FBQ0U7QUFBZixLQUFyQjtBQUNIO0FBQ0osQ0FiRyxDQUZKO0FBZ0JBakIsVUFBVSxDQUFDa0Is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SCxJQUFBQSxJQUFJLENBQUNJLFFBQUwsR0FBZ0JOLEdBQUcsQ0FBQ2lCLElBQUosQ0FBU1gsUUFBVCxJQUFxQkosSUFBSSxDQUFDSSxRQUExQztBQUNBLFVBQU1tQixXQUFXLEdBQUcsTUFBTXZCLElBQUksQ0FBQ08sSUFBTCxFQUExQjtBQUNBUixJQUFBQSxHQUFHLENBQUNTLElBQUosQ0FBUztBQUNUUSxNQUFBQSxHQUFHLEVBQUVPLFdBQVcsQ0FBQ1AsR0FEUjtBQUVUZCxNQUFBQSxJQUFJLEVBQUVxQixXQUFXLENBQUNyQixJQUZUO0FBR1RDLE1BQUFBLEtBQUssRUFBRW9CLFdBQVcsQ0FBQ3BCLEtBSFY7QUFJVEUsTUFBQUEsT0FBTyxFQUFFa0IsV0FBVyxDQUFDbEIsT0FKWjtBQUtUWSxNQUFBQSxLQUFLLEVBQUUsMEJBQWNNLFdBQWQ7QUFMRSxLQUFUO0FBT0g7QUFDSixDQW5CRyxDQUhKO2VBdUJlN0IsVSIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc2FtYXpvbmFcXGJhY2tlbmRcXHJvdXRlcnNcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xyXG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlck1vZGVsJztcclxuaW1wb3J0IHsgZ2VuZXJhdGVUb2tlbiwgaXNBdXRoIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuY29uc3QgdXNlclJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG51c2VyUm91dGVyLmdldChcclxuICAgIFwiL2NyZWF0ZWFkbWluXCIsIFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlciAoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdhZG1pbicsXHJcbiAgICAgICAgICAgIGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogJ2pzbG9qaW5oYScsXHJcbiAgICAgICAgICAgIGlzQWRtaW46IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKVxyXG4gICAgICAgIHJlcy5zZW5kKGNyZWF0ZWRVc2VyKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbn0pKTtcclxudXNlclJvdXRlci5wb3N0KFxyXG4gICAgJy9zaWduaW4nLCBcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIgKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNpZ25pblVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xyXG4gICAgICAgICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiByZXEuYm9keS5wYXNzd29yZFxyXG4gICAgfSk7XHJcbiAgICBpZiAoIXNpZ25pblVzZXIpe1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIEVtYWlsIG9yIFBhc3N3b3JkJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiBzaWduaW5Vc2VyLl9pZCxcclxuICAgICAgICBuYW1lOiBzaWduaW5Vc2VyLm5hbWUsXHJcbiAgICAgICAgZW1haWw6IHNpZ25pblVzZXIuZW1haWwsIFxyXG4gICAgICAgIGlzQWRtaW46IHNpZ25pblVzZXIuaXNBZG1pbixcclxuICAgICAgICB0b2tlbjogZ2VuZXJhdGVUb2tlbihzaWduaW5Vc2VyKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KSk7XHJcbnVzZXJSb3V0ZXIucG9zdChcclxuICAgICcvcmVnaXN0ZXInLCBcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIgKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHtcclxuICAgICAgICBuYW1lOiByZXEuYm9keS5uYW1lLFxyXG4gICAgICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcclxuICAgICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGNyZWF0ZWRVc2VyID0gYXdhaXQgdXNlci5zYXZlKCk7XHJcbiAgICBpZiAoIWNyZWF0ZWRVc2VyKXtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAnSW5mb3JtYcOnw7VlcyBpbnbDoWxpZGFzJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiBjcmVhdGVkVXNlci5faWQsXHJcbiAgICAgICAgbmFtZTogY3JlYXRlZFVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogY3JlYXRlZFVzZXIuZW1haWwsIFxyXG4gICAgICAgIGlzQWRtaW46IGNyZWF0ZWRVc2VyLmlzQWRtaW4sXHJcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4oY3JlYXRlZFVzZXIpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pKTtcclxudXNlclJvdXRlci5wdXQoXHJcbiAgICAnLzppZCcsXHJcbiAgICBpc0F1dGgsIFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlciAoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmICghdXNlcil7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoeyBcclxuICAgICAgICAgICAgbWVzc2FnZTogJ1VzdcOhcmlvIG7Do28gZW5jb250cmFkbydcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXNlci5uYW1lID0gcmVxLmJvZHkubmFtZSB8fCB1c2VyLm5hbWU7XHJcbiAgICAgICAgdXNlci5lbWFpbCA9IHJlcS5ib2R5LmVtYWlsIHx8IHVzZXIuZW1haWw7XHJcbiAgICAgICAgdXNlci5wYXNzd29yZCA9IHJlcS5ib2R5LnBhc3N3b3JkIHx8IHVzZXIucGFzc3dvcmQ7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKTtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiB1cGRhdGVkVXNlci5faWQsXHJcbiAgICAgICAgbmFtZTogdXBkYXRlZFVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogdXBkYXRlZFVzZXIuZW1haWwsIFxyXG4gICAgICAgIGlzQWRtaW46IHVwZGF0ZWRVc2VyLmlzQWRtaW4sXHJcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4odXBkYXRlZFVzZXIpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pKTtcclxuZXhwb3J0IGRlZmF1bHQgdXNlclJvdXRlcjsiXX0=","map":{"version":3,"sources":["userRouter.js"],"names":["userRouter","express","Router","get","req","res","user","User","name","email","password","isAdmin","createdUser","save","send","err","status","message","post","signinUser","findOne","body","_id","token","put","isAuth","findById","params","id","updatedUser"],"mappings":"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","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\routers\\","sourcesContent":["import express from 'express';\r\nimport expressAsyncHandler from 'express-async-handler';\r\nimport User from '../models/userModel';\r\nimport { generateToken, isAuth } from '../utils';\r\n\r\nconst userRouter = express.Router();\r\n\r\nuserRouter.get(\r\n    \"/createadmin\", \r\n    expressAsyncHandler (async (req, res) => {\r\n    try {\r\n        const user = new User({\r\n            name: 'admin',\r\n            email: 'admin@example.com',\r\n            password: 'jslojinha',\r\n            isAdmin: true,\r\n        });\r\n        const createdUser = await user.save()\r\n        res.send(createdUser);\r\n    } catch (err) {\r\n        res.status(500).send({ message: err.message });\r\n    }\r\n}));\r\nuserRouter.post(\r\n    '/signin', \r\n    expressAsyncHandler (async (req, res) => {\r\n        const signinUser = await User.findOne({\r\n            email: req.body.email,\r\n            password: req.body.password\r\n    });\r\n    if (!signinUser){\r\n        res.status(401).send({ \r\n            message: 'Invalid Email or Password'\r\n        });\r\n    } else {\r\n        res.send({\r\n        _id: signinUser._id,\r\n        name: signinUser.name,\r\n        email: signinUser.email, \r\n        isAdmin: signinUser.isAdmin,\r\n        token: generateToken(signinUser)\r\n        });\r\n    }\r\n}));\r\nuserRouter.post(\r\n    '/register', \r\n    expressAsyncHandler (async (req, res) => {\r\n    const user = new User({\r\n        name: req.body.name,\r\n        email: req.body.email,\r\n        password: req.body.password,\r\n    });\r\n    const createdUser = await user.save();\r\n    if (!createdUser){\r\n        res.status(401).send({ \r\n            message: 'Informações inválidas'\r\n        });\r\n    } else {\r\n        res.send({\r\n        _id: createdUser._id,\r\n        name: createdUser.name,\r\n        email: createdUser.email, \r\n        isAdmin: createdUser.isAdmin,\r\n        token: generateToken(createdUser)\r\n        });\r\n    }\r\n}));\r\nuserRouter.put(\r\n    '/:id',\r\n    isAuth, \r\n    expressAsyncHandler (async (req, res) => {\r\n    const user = await User.findById(req.params.id);\r\n    if (!user){\r\n        res.status(401).send({ \r\n            message: 'Usuário não encontrado'\r\n        });\r\n    } else {\r\n        user.name = req.body.name || user.name;\r\n        user.email = req.body.email || user.email;\r\n        user.password = req.body.password || user.password;\r\n        const updatedUser = await user.save();\r\n        res.send({\r\n        _id: updatedUser._id,\r\n        name: updatedUser.name,\r\n        email: updatedUser.email, \r\n        isAdmin: updatedUser.isAdmin,\r\n        token: generateToken(updatedUser)\r\n        });\r\n    }\r\n}));\r\nexport default userRouter;"]}},"mtime":1649959603881},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\models\\\\userModel.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    index: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  isAdmin: {\n    type: Boolean,\n    required: true,\n    default: false\n  }\n});\n\nconst User = _mongoose.default.model('User', userSchema);\n\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJNb2RlbC5qcyJdLCJuYW1lcyI6WyJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJpbmRleCIsInVuaXF1ZSIsInBhc3N3b3JkIiwiaXNBZG1pbiIsIkJvb2xlYW4iLCJkZWZhdWx0IiwiVXNlciIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxNQUFNQSxVQUFVLEdBQUcsSUFBSUMsa0JBQVNDLE1BQWIsQ0FBb0I7QUFDbkNDLEVBQUFBLElBQUksRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUQ2QjtBQUVuQ0MsRUFBQUEsS0FBSyxFQUFFO0FBQ0hILElBQUFBLElBQUksRUFBRUMsTUFESDtBQUVIQyxJQUFBQSxRQUFRLEVBQUUsSUFGUDtBQUdIRSxJQUFBQSxLQUFLLEVBQUUsSUFISjtBQUlIQyxJQUFBQSxNQUFNLEVBQUU7QUFKTCxHQUY0QjtBQVFuQ0MsRUFBQUEsUUFBUSxFQUFFO0FBQUVOLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsUUFBUSxFQUFFO0FBQTFCLEdBUnlCO0FBU25DSyxFQUFBQSxPQUFPLEVBQUU7QUFBRVAsSUFBQUEsSUFBSSxFQUFFUSxPQUFSO0FBQWlCTixJQUFBQSxRQUFRLEVBQUUsSUFBM0I7QUFBaUNPLElBQUFBLE9BQU8sRUFBRTtBQUExQztBQVQwQixDQUFwQixDQUFuQjs7QUFXQSxNQUFNQyxJQUFJLEdBQUdiLGtCQUFTYyxLQUFULENBQWUsTUFBZixFQUF1QmYsVUFBdkIsQ0FBYjs7ZUFDZWMsSSIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc2FtYXpvbmFcXGJhY2tlbmRcXG1vZGVsc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICBlbWFpbDoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZywgXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsIFxyXG4gICAgICAgIGluZGV4OiB0cnVlLCBcclxuICAgICAgICB1bmlxdWU6IHRydWVcclxuICAgIH0sXHJcbiAgICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIGlzQWRtaW46IHsgdHlwZTogQm9vbGVhbiwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IGZhbHNlfSxcclxufSk7XHJcbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpO1xyXG5leHBvcnQgZGVmYXVsdCBVc2VyOyJdfQ==","map":{"version":3,"sources":["userModel.js"],"names":["userSchema","mongoose","Schema","name","type","String","required","email","index","unique","password","isAdmin","Boolean","default","User","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,UAAU,GAAG,IAAIC,kBAASC,MAAb,CAAoB;AACnCC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAD6B;AAEnCC,EAAAA,KAAK,EAAE;AACHH,IAAAA,IAAI,EAAEC,MADH;AAEHC,IAAAA,QAAQ,EAAE,IAFP;AAGHE,IAAAA,KAAK,EAAE,IAHJ;AAIHC,IAAAA,MAAM,EAAE;AAJL,GAF4B;AAQnCC,EAAAA,QAAQ,EAAE;AAAEN,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GARyB;AASnCK,EAAAA,OAAO,EAAE;AAAEP,IAAAA,IAAI,EAAEQ,OAAR;AAAiBN,IAAAA,QAAQ,EAAE,IAA3B;AAAiCO,IAAAA,OAAO,EAAE;AAA1C;AAT0B,CAApB,CAAnB;;AAWA,MAAMC,IAAI,GAAGb,kBAASc,KAAT,CAAe,MAAf,EAAuBf,UAAvB,CAAb;;eACec,I","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\models\\","sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst userSchema = new mongoose.Schema({\r\n    name: { type: String, required: true},\r\n    email: {\r\n        type: String, \r\n        required: true, \r\n        index: true, \r\n        unique: true\r\n    },\r\n    password: { type: String, required: true},\r\n    isAdmin: { type: Boolean, required: true, default: false},\r\n});\r\nconst User = mongoose.model('User', userSchema);\r\nexport default User;"]}},"mtime":1649779361062},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\routers\\\\userRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\n\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst userRouter = _express.default.Router();\n\nuserRouter.get(\"/createadmin\", (0, _expressAsyncHandler.default)(async (req, res) => {\n  try {\n    const user = new _userModel.default({\n      name: 'admin',\n      email: 'admin@example.com',\n      password: 'jslojinha',\n      isAdmin: true\n    });\n    const createdUser = await user.save();\n    res.send(createdUser);\n  } catch (err) {\n    res.status(500).send({\n      message: err.message\n    });\n  }\n}));\nuserRouter.post('/signin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const signinUser = await _userModel.default.findOne({\n    email: req.body.email,\n    password: req.body.password\n  });\n\n  if (!signinUser) {\n    res.status(401).send({\n      message: 'Invalid Email or Password'\n    });\n  } else {\n    res.send({\n      _id: signinUser._id,\n      name: signinUser.name,\n      email: signinUser.email,\n      isAdmin: signinUser.isAdmin,\n      token: (0, _utils.generateToken)(signinUser)\n    });\n  }\n}));\nuserRouter.post('/register', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = new _userModel.default({\n    name: req.body.name,\n    email: req.body.email,\n    password: req.body.password\n  });\n  const createdUser = await user.save();\n\n  if (!createdUser) {\n    res.status(401).send({\n      message: 'Informações inválidas'\n    });\n  } else {\n    res.send({\n      _id: createdUser._id,\n      name: createdUser.name,\n      email: createdUser.email,\n      isAdmin: createdUser.isAdmin,\n      token: (0, _utils.generateToken)(createdUser)\n    });\n  }\n}));\nuserRouter.put('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = await _userModel.default.findById(req.params.id);\n\n  if (!user) {\n    res.status(401).send({\n      message: 'Usuário não encontrado'\n    });\n  } else {\n    user.name = req.body.name || user.name;\n    user.email = req.body.email || user.email;\n    user.password = req.body.password || user.password;\n    const updatedUser = await user.save();\n    res.send({\n      _id: updatedUser._id,\n      name: updatedUser.name,\n      email: updatedUser.email,\n      isAdmin: updatedUser.isAdmin,\n      token: (0, _utils.generateToken)(updatedUser)\n    });\n  }\n}));\nvar _default = userRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJSb3V0ZXIuanMiXSwibmFtZXMiOlsidXNlclJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJ1c2VyIiwiVXNlciIsIm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiaXNBZG1pbiIsImNyZWF0ZWRVc2VyIiwic2F2ZSIsInNlbmQiLCJlcnIiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsInNpZ25pblVzZXIiLCJmaW5kT25lIiwiYm9keSIsIl9pZCIsInRva2VuIiwicHV0IiwiaXNBdXRoIiwiZmluZEJ5SWQiLCJwYXJhbXMiLCJpZCIsInVwZGF0ZWRVc2VyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxVQUFVLEdBQUdDLGlCQUFRQyxNQUFSLEVBQW5COztBQUVBRixVQUFVLENBQUNHLEdBQVgsQ0FDSSxjQURKLEVBRUksa0NBQXFCLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUN6QyxNQUFJO0FBQ0EsVUFBTUMsSUFBSSxHQUFHLElBQUlDLGtCQUFKLENBQVM7QUFDbEJDLE1BQUFBLElBQUksRUFBRSxPQURZO0FBRWxCQyxNQUFBQSxLQUFLLEVBQUUsbUJBRlc7QUFHbEJDLE1BQUFBLFFBQVEsRUFBRSxXQUhRO0FBSWxCQyxNQUFBQSxPQUFPLEVBQUU7QUFKUyxLQUFULENBQWI7QUFNQSxVQUFNQyxXQUFXLEdBQUcsTUFBTU4sSUFBSSxDQUFDTyxJQUFMLEVBQTFCO0FBQ0FSLElBQUFBLEdBQUcsQ0FBQ1MsSUFBSixDQUFTRixXQUFUO0FBQ0gsR0FURCxDQVNFLE9BQU9HLEdBQVAsRUFBWTtBQUNWVixJQUFBQSxHQUFHLENBQUNXLE1BQUosQ0FBVyxHQUFYLEVBQWdCRixJQUFoQixDQUFxQjtBQUFFRyxNQUFBQSxPQUFPLEVBQUVGLEdBQUcsQ0FBQ0U7QUFBZixLQUFyQjtBQUNIO0FBQ0osQ0FiRyxDQUZKO0FBZ0JBakIsVUFBVSxDQUFDa0Is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SCxJQUFBQSxJQUFJLENBQUNJLFFBQUwsR0FBZ0JOLEdBQUcsQ0FBQ2lCLElBQUosQ0FBU1gsUUFBVCxJQUFxQkosSUFBSSxDQUFDSSxRQUExQztBQUNBLFVBQU1tQixXQUFXLEdBQUcsTUFBTXZCLElBQUksQ0FBQ08sSUFBTCxFQUExQjtBQUNBUixJQUFBQSxHQUFHLENBQUNTLElBQUosQ0FBUztBQUNUUSxNQUFBQSxHQUFHLEVBQUVPLFdBQVcsQ0FBQ1AsR0FEUjtBQUVUZCxNQUFBQSxJQUFJLEVBQUVxQixXQUFXLENBQUNyQixJQUZUO0FBR1RDLE1BQUFBLEtBQUssRUFBRW9CLFdBQVcsQ0FBQ3BCLEtBSFY7QUFJVEUsTUFBQUEsT0FBTyxFQUFFa0IsV0FBVyxDQUFDbEIsT0FKWjtBQUtUWSxNQUFBQSxLQUFLLEVBQUUsMEJBQWNNLFdBQWQ7QUFMRSxLQUFUO0FBT0g7QUFDSixDQW5CRyxDQUhKO2VBdUJlN0IsVSIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc2FtYXpvbmFcXGJhY2tlbmRcXHJvdXRlcnNcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xyXG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlck1vZGVsJztcclxuaW1wb3J0IHsgZ2VuZXJhdGVUb2tlbiwgaXNBdXRoIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuY29uc3QgdXNlclJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG51c2VyUm91dGVyLmdldChcclxuICAgIFwiL2NyZWF0ZWFkbWluXCIsIFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlciAoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdhZG1pbicsXHJcbiAgICAgICAgICAgIGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogJ2pzbG9qaW5oYScsXHJcbiAgICAgICAgICAgIGlzQWRtaW46IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKVxyXG4gICAgICAgIHJlcy5zZW5kKGNyZWF0ZWRVc2VyKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbn0pKTtcclxudXNlclJvdXRlci5wb3N0KFxyXG4gICAgJy9zaWduaW4nLCBcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIgKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNpZ25pblVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xyXG4gICAgICAgICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiByZXEuYm9keS5wYXNzd29yZFxyXG4gICAgfSk7XHJcbiAgICBpZiAoIXNpZ25pblVzZXIpe1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIEVtYWlsIG9yIFBhc3N3b3JkJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiBzaWduaW5Vc2VyLl9pZCxcclxuICAgICAgICBuYW1lOiBzaWduaW5Vc2VyLm5hbWUsXHJcbiAgICAgICAgZW1haWw6IHNpZ25pblVzZXIuZW1haWwsIFxyXG4gICAgICAgIGlzQWRtaW46IHNpZ25pblVzZXIuaXNBZG1pbixcclxuICAgICAgICB0b2tlbjogZ2VuZXJhdGVUb2tlbihzaWduaW5Vc2VyKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KSk7XHJcbnVzZXJSb3V0ZXIucG9zdChcclxuICAgICcvcmVnaXN0ZXInLCBcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIgKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHtcclxuICAgICAgICBuYW1lOiByZXEuYm9keS5uYW1lLFxyXG4gICAgICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcclxuICAgICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGNyZWF0ZWRVc2VyID0gYXdhaXQgdXNlci5zYXZlKCk7XHJcbiAgICBpZiAoIWNyZWF0ZWRVc2VyKXtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAnSW5mb3JtYcOnw7VlcyBpbnbDoWxpZGFzJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiBjcmVhdGVkVXNlci5faWQsXHJcbiAgICAgICAgbmFtZTogY3JlYXRlZFVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogY3JlYXRlZFVzZXIuZW1haWwsIFxyXG4gICAgICAgIGlzQWRtaW46IGNyZWF0ZWRVc2VyLmlzQWRtaW4sXHJcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4oY3JlYXRlZFVzZXIpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pKTtcclxudXNlclJvdXRlci5wdXQoXHJcbiAgICAnLzppZCcsXHJcbiAgICBpc0F1dGgsIFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlciAoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmICghdXNlcil7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoeyBcclxuICAgICAgICAgICAgbWVzc2FnZTogJ1VzdcOhcmlvIG7Do28gZW5jb250cmFkbydcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXNlci5uYW1lID0gcmVxLmJvZHkubmFtZSB8fCB1c2VyLm5hbWU7XHJcbiAgICAgICAgdXNlci5lbWFpbCA9IHJlcS5ib2R5LmVtYWlsIHx8IHVzZXIuZW1haWw7XHJcbiAgICAgICAgdXNlci5wYXNzd29yZCA9IHJlcS5ib2R5LnBhc3N3b3JkIHx8IHVzZXIucGFzc3dvcmQ7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKTtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiB1cGRhdGVkVXNlci5faWQsXHJcbiAgICAgICAgbmFtZTogdXBkYXRlZFVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogdXBkYXRlZFVzZXIuZW1haWwsIFxyXG4gICAgICAgIGlzQWRtaW46IHVwZGF0ZWRVc2VyLmlzQWRtaW4sXHJcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4odXBkYXRlZFVzZXIpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pKTtcclxuZXhwb3J0IGRlZmF1bHQgdXNlclJvdXRlcjsiXX0=","map":{"version":3,"sources":["userRouter.js"],"names":["userRouter","express","Router","get","req","res","user","User","name","email","password","isAdmin","createdUser","save","send","err","status","message","post","signinUser","findOne","body","_id","token","put","isAuth","findById","params","id","updatedUser"],"mappings":"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","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\routers\\","sourcesContent":["import express from 'express';\r\nimport expressAsyncHandler from 'express-async-handler';\r\nimport User from '../models/userModel';\r\nimport { generateToken, isAuth } from '../utils';\r\n\r\nconst userRouter = express.Router();\r\n\r\nuserRouter.get(\r\n    \"/createadmin\", \r\n    expressAsyncHandler (async (req, res) => {\r\n    try {\r\n        const user = new User({\r\n            name: 'admin',\r\n            email: 'admin@example.com',\r\n            password: 'jslojinha',\r\n            isAdmin: true,\r\n        });\r\n        const createdUser = await user.save()\r\n        res.send(createdUser);\r\n    } catch (err) {\r\n        res.status(500).send({ message: err.message });\r\n    }\r\n}));\r\nuserRouter.post(\r\n    '/signin', \r\n    expressAsyncHandler (async (req, res) => {\r\n        const signinUser = await User.findOne({\r\n            email: req.body.email,\r\n            password: req.body.password\r\n    });\r\n    if (!signinUser){\r\n        res.status(401).send({ \r\n            message: 'Invalid Email or Password'\r\n        });\r\n    } else {\r\n        res.send({\r\n        _id: signinUser._id,\r\n        name: signinUser.name,\r\n        email: signinUser.email, \r\n        isAdmin: signinUser.isAdmin,\r\n        token: generateToken(signinUser)\r\n        });\r\n    }\r\n}));\r\nuserRouter.post(\r\n    '/register', \r\n    expressAsyncHandler (async (req, res) => {\r\n    const user = new User({\r\n        name: req.body.name,\r\n        email: req.body.email,\r\n        password: req.body.password,\r\n    });\r\n    const createdUser = await user.save();\r\n    if (!createdUser){\r\n        res.status(401).send({ \r\n            message: 'Informações inválidas'\r\n        });\r\n    } else {\r\n        res.send({\r\n        _id: createdUser._id,\r\n        name: createdUser.name,\r\n        email: createdUser.email, \r\n        isAdmin: createdUser.isAdmin,\r\n        token: generateToken(createdUser)\r\n        });\r\n    }\r\n}));\r\nuserRouter.put(\r\n    '/:id',\r\n    isAuth, \r\n    expressAsyncHandler (async (req, res) => {\r\n    const user = await User.findById(req.params.id);\r\n    if (!user){\r\n        res.status(401).send({ \r\n            message: 'Usuário não encontrado'\r\n        });\r\n    } else {\r\n        user.name = req.body.name || user.name;\r\n        user.email = req.body.email || user.email;\r\n        user.password = req.body.password || user.password;\r\n        const updatedUser = await user.save();\r\n        res.send({\r\n        _id: updatedUser._id,\r\n        name: updatedUser.name,\r\n        email: updatedUser.email, \r\n        isAdmin: updatedUser.isAdmin,\r\n        token: generateToken(updatedUser)\r\n        });\r\n    }\r\n}));\r\nexport default userRouter;"]}},"mtime":1649959603881},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\models\\\\userModel.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    index: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  isAdmin: {\n    type: Boolean,\n    required: true,\n    default: false\n  }\n});\n\nconst User = _mongoose.default.model('User', userSchema);\n\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJNb2RlbC5qcyJdLCJuYW1lcyI6WyJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJpbmRleCIsInVuaXF1ZSIsInBhc3N3b3JkIiwiaXNBZG1pbiIsIkJvb2xlYW4iLCJkZWZhdWx0IiwiVXNlciIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxNQUFNQSxVQUFVLEdBQUcsSUFBSUMsa0JBQVNDLE1BQWIsQ0FBb0I7QUFDbkNDLEVBQUFBLElBQUksRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUQ2QjtBQUVuQ0MsRUFBQUEsS0FBSyxFQUFFO0FBQ0hILElBQUFBLElBQUksRUFBRUMsTUFESDtBQUVIQyxJQUFBQSxRQUFRLEVBQUUsSUFGUDtBQUdIRSxJQUFBQSxLQUFLLEVBQUUsSUFISjtBQUlIQyxJQUFBQSxNQUFNLEVBQUU7QUFKTCxHQUY0QjtBQVFuQ0MsRUFBQUEsUUFBUSxFQUFFO0FBQUVOLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsUUFBUSxFQUFFO0FBQTFCLEdBUnlCO0FBU25DSyxFQUFBQSxPQUFPLEVBQUU7QUFBRVAsSUFBQUEsSUFBSSxFQUFFUSxPQUFSO0FBQWlCTixJQUFBQSxRQUFRLEVBQUUsSUFBM0I7QUFBaUNPLElBQUFBLE9BQU8sRUFBRTtBQUExQztBQVQwQixDQUFwQixDQUFuQjs7QUFXQSxNQUFNQyxJQUFJLEdBQUdiLGtCQUFTYyxLQUFULENBQWUsTUFBZixFQUF1QmYsVUFBdkIsQ0FBYjs7ZUFDZWMsSSIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc2FtYXpvbmFcXGJhY2tlbmRcXG1vZGVsc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICBlbWFpbDoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZywgXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsIFxyXG4gICAgICAgIGluZGV4OiB0cnVlLCBcclxuICAgICAgICB1bmlxdWU6IHRydWVcclxuICAgIH0sXHJcbiAgICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIGlzQWRtaW46IHsgdHlwZTogQm9vbGVhbiwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IGZhbHNlfSxcclxufSk7XHJcbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpO1xyXG5leHBvcnQgZGVmYXVsdCBVc2VyOyJdfQ==","map":{"version":3,"sources":["userModel.js"],"names":["userSchema","mongoose","Schema","name","type","String","required","email","index","unique","password","isAdmin","Boolean","default","User","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,UAAU,GAAG,IAAIC,kBAASC,MAAb,CAAoB;AACnCC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAD6B;AAEnCC,EAAAA,KAAK,EAAE;AACHH,IAAAA,IAAI,EAAEC,MADH;AAEHC,IAAAA,QAAQ,EAAE,IAFP;AAGHE,IAAAA,KAAK,EAAE,IAHJ;AAIHC,IAAAA,MAAM,EAAE;AAJL,GAF4B;AAQnCC,EAAAA,QAAQ,EAAE;AAAEN,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GARyB;AASnCK,EAAAA,OAAO,EAAE;AAAEP,IAAAA,IAAI,EAAEQ,OAAR;AAAiBN,IAAAA,QAAQ,EAAE,IAA3B;AAAiCO,IAAAA,OAAO,EAAE;AAA1C;AAT0B,CAApB,CAAnB;;AAWA,MAAMC,IAAI,GAAGb,kBAASc,KAAT,CAAe,MAAf,EAAuBf,UAAvB,CAAb;;eACec,I","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\models\\","sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst userSchema = new mongoose.Schema({\r\n    name: { type: String, required: true},\r\n    email: {\r\n        type: String, \r\n        required: true, \r\n        index: true, \r\n        unique: true\r\n    },\r\n    password: { type: String, required: true},\r\n    isAdmin: { type: Boolean, required: true, default: false},\r\n});\r\nconst User = mongoose.model('User', userSchema);\r\nexport default User;"]}},"mtime":1649779361062},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\utils.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAuth = exports.isAdmin = exports.generateToken = void 0;\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_dotenv.default.config();\n\nconst generateToken = user => _jsonwebtoken.default.sign({\n  _id: user._id,\n  name: user.name,\n  email: user.email,\n  isAdmin: user.isAdmin\n}, process.env.JWT_SECRET);\n\nexports.generateToken = generateToken;\n\nconst isAuth = (req, res, next) => {\n  const bearerToken = req.headers.authorization;\n\n  if (!bearerToken) {\n    res.status(401).send({\n      message: 'token is not supplied'\n    });\n  } else {\n    const token = bearerToken.slice(7, bearerToken.length);\n\n    _jsonwebtoken.default.verify(token, process.env.JWT_SECRET, (err, data) => {\n      if (err) {\n        res.status(401).send({\n          message: 'invalid token'\n        });\n      } else {\n        req.user = data;\n        next();\n      }\n    });\n  }\n};\n\nexports.isAuth = isAuth;\n\nconst isAdmin = (req, res, next) => {\n  if (req.user && req.user.isAdmin) {\n    next();\n  } else {\n    res.status(401).send({\n      message: 'Token is not valid for admin user'\n    });\n  }\n};\n\nexports.isAdmin = isAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsImdlbmVyYXRlVG9rZW4iLCJ1c2VyIiwiand0Iiwic2lnbiIsIl9pZCIsIm5hbWUiLCJlbWFpbCIsImlzQWRtaW4iLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImlzQXV0aCIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJUb2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhdHVzIiwic2VuZCIsIm1lc3NhZ2UiLCJ0b2tlbiIsInNsaWNlIiwibGVuZ3RoIiwidmVyaWZ5IiwiZXJyIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUFBLGdCQUFPQyxNQUFQOztBQUVPLE1BQU1DLGFBQWEsR0FBSUMsSUFBRCxJQUFVQyxzQkFBSUMsSUFBSixDQUNuQztBQUNJQyxFQUFBQSxHQUFHLEVBQUVILElBQUksQ0FBQ0csR0FEZDtBQUVJQyxFQUFBQSxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFGZjtBQUdJQyxFQUFBQSxLQUFLLEVBQUVMLElBQUksQ0FBQ0ssS0FIaEI7QUFJSUMsRUFBQUEsT0FBTyxFQUFFTixJQUFJLENBQUNNO0FBSmxCLENBRG1DLEVBT25DQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFQdUIsQ0FBaEM7Ozs7QUFTQSxNQUFNQyxNQUFNLEdBQUcsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7QUFDdEMsUUFBTUMsV0FBVyxHQUFHSCxHQUFHLENBQUNJLE9BQUosQ0FBWUMsYUFBaEM7O0FBQ0EsTUFBSSxDQUFDRixXQUFMLEVBQWtCO0FBQ2ZGLElBQUFBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVDLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQXJCO0FBQ0YsR0FGRCxNQUVPO0FBQ0gsVUFBTUMsS0FBSyxHQUFHTixXQUFXLENBQUNPLEtBQVosQ0FBa0IsQ0FBbEIsRUFBcUJQLFdBQVcsQ0FBQ1EsTUFBakMsQ0FBZDs7QUFDQXJCLDBCQUFJc0IsTUFBSixDQUFXSCxLQUFYLEVBQWtCYixPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUIsRUFBMEMsQ0FBQ2UsR0FBRCxFQUFNQyxJQUFOLEtBQWU7QUFDckQsVUFBSUQsR0FBSixFQUFTO0FBQ0xaLFFBQUFBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUNDLFVBQUFBLE9BQU8sRUFBRTtBQUFWLFNBQXJCO0FBQ0gsT0FGRCxNQUVPO0FBQ0hSLFFBQUFBLEdBQUcsQ0FBQ1gsSUFBSixHQUFXeUIsSUFBWDtBQUNBWixRQUFBQSxJQUFJO0FBQ1A7QUFDSixLQVBEO0FBUUg7QUFDSixDQWZNOzs7O0FBZ0JBLE1BQU1QLE9BQU8sR0FBRyxDQUFDSyxHQUFELEVBQU1DLEdBQU4sRUFBV0MsSUFBWCxLQUFvQjtBQUN2QyxNQUFJRixHQUFHLENBQUNYLElBQUosSUFBWVcsR0FBRyxDQUFDWCxJQUFKLENBQVNNLE9BQXpCLEVBQWlDO0FBQzdCTyxJQUFBQSxJQUFJO0FBQ1AsR0FGRCxNQUVPO0FBQ0hELElBQUFBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVDLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQXJCO0FBQ0g7QUFDSixDQU5NIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcZ3VpbGhlcm1lXFxEb3dubG9hZHNcXGpzYW1hem9uYVxcYmFja2VuZFxcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7XHJcblxyXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVUb2tlbiA9ICh1c2VyKSA9PiBqd3Quc2lnbihcclxuICAgIHtcclxuICAgICAgICBfaWQ6IHVzZXIuX2lkLFxyXG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICBpc0FkbWluOiB1c2VyLmlzQWRtaW5cclxuICAgIH0sXHJcbiAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVUXHJcbik7XHJcbmV4cG9ydCBjb25zdCBpc0F1dGggPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIGNvbnN0IGJlYXJlclRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuICAgIGlmICghYmVhcmVyVG9rZW4pIHtcclxuICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogJ3Rva2VuIGlzIG5vdCBzdXBwbGllZCcgfSkgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gYmVhcmVyVG9rZW4uc2xpY2UoNywgYmVhcmVyVG9rZW4ubGVuZ3RoKTtcclxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCAoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHttZXNzYWdlOiAnaW52YWxpZCB0b2tlbid9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlcS51c2VyID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIG5leHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn07XHJcbmV4cG9ydCBjb25zdCBpc0FkbWluID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgICBpZiAocmVxLnVzZXIgJiYgcmVxLnVzZXIuaXNBZG1pbil7XHJcbiAgICAgICAgbmV4dCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IG1lc3NhZ2U6ICdUb2tlbiBpcyBub3QgdmFsaWQgZm9yIGFkbWluIHVzZXInfSk7XHJcbiAgICB9XHJcbn07Il19","map":{"version":3,"sources":["utils.js"],"names":["dotenv","config","generateToken","user","jwt","sign","_id","name","email","isAdmin","process","env","JWT_SECRET","isAuth","req","res","next","bearerToken","headers","authorization","status","send","message","token","slice","length","verify","err","data"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEAA,gBAAOC,MAAP;;AAEO,MAAMC,aAAa,GAAIC,IAAD,IAAUC,sBAAIC,IAAJ,CACnC;AACIC,EAAAA,GAAG,EAAEH,IAAI,CAACG,GADd;AAEIC,EAAAA,IAAI,EAAEJ,IAAI,CAACI,IAFf;AAGIC,EAAAA,KAAK,EAAEL,IAAI,CAACK,KAHhB;AAIIC,EAAAA,OAAO,EAAEN,IAAI,CAACM;AAJlB,CADmC,EAOnCC,OAAO,CAACC,GAAR,CAAYC,UAPuB,CAAhC;;;;AASA,MAAMC,MAAM,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACtC,QAAMC,WAAW,GAAGH,GAAG,CAACI,OAAJ,CAAYC,aAAhC;;AACA,MAAI,CAACF,WAAL,EAAkB;AACfF,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB;AACF,GAFD,MAEO;AACH,UAAMC,KAAK,GAAGN,WAAW,CAACO,KAAZ,CAAkB,CAAlB,EAAqBP,WAAW,CAACQ,MAAjC,CAAd;;AACArB,0BAAIsB,MAAJ,CAAWH,KAAX,EAAkBb,OAAO,CAACC,GAAR,CAAYC,UAA9B,EAA0C,CAACe,GAAD,EAAMC,IAAN,KAAe;AACrD,UAAID,GAAJ,EAAS;AACLZ,QAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAE;AAAV,SAArB;AACH,OAFD,MAEO;AACHR,QAAAA,GAAG,CAACX,IAAJ,GAAWyB,IAAX;AACAZ,QAAAA,IAAI;AACP;AACJ,KAPD;AAQH;AACJ,CAfM;;;;AAgBA,MAAMP,OAAO,GAAG,CAACK,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACvC,MAAIF,GAAG,CAACX,IAAJ,IAAYW,GAAG,CAACX,IAAJ,CAASM,OAAzB,EAAiC;AAC7BO,IAAAA,IAAI;AACP,GAFD,MAEO;AACHD,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB;AACH;AACJ,CANM","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\","sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nexport const generateToken = (user) => jwt.sign(\r\n    {\r\n        _id: user._id,\r\n        name: user.name,\r\n        email: user.email,\r\n        isAdmin: user.isAdmin\r\n    },\r\n    process.env.JWT_SECRET\r\n);\r\nexport const isAuth = (req, res, next) => {\r\n    const bearerToken = req.headers.authorization;\r\n    if (!bearerToken) {\r\n       res.status(401).send({ message: 'token is not supplied' }) \r\n    } else {\r\n        const token = bearerToken.slice(7, bearerToken.length);\r\n        jwt.verify(token, process.env.JWT_SECRET, (err, data) => {\r\n            if (err) {\r\n                res.status(401).send({message: 'invalid token'});\r\n            } else {\r\n                req.user = data;\r\n                next();\r\n            }\r\n        })\r\n    }\r\n};\r\nexport const isAdmin = (req, res, next) => {\r\n    if (req.user && req.user.isAdmin){\r\n        next();\r\n    } else {\r\n        res.status(401).send({ message: 'Token is not valid for admin user'});\r\n    }\r\n};"]}},"mtime":1650153292134},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\utils.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAuth = exports.generateToken = void 0;\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_dotenv.default.config();\n\nconst generateToken = user => _jsonwebtoken.default.sign({\n  _id: user._id,\n  name: user.name,\n  email: user.email,\n  isAdmin: user.isAdmin\n}, process.env.JWT_SECRET);\n\nexports.generateToken = generateToken;\n\nconst isAuth = (req, res, next) => {\n  const bearerToken = req.headers.authorization;\n\n  if (!bearerToken) {\n    res.status(401).send({\n      message: 'token is not supplied'\n    });\n  } else {\n    const token = bearerToken.slice(7, bearerToken.length);\n\n    _jsonwebtoken.default.verify(token, process.env.JWT_SECRET, (err, data) => {\n      if (err) {\n        res.status(401).send({\n          message: 'invalid token'\n        });\n      } else {\n        req.user = data;\n        next();\n      }\n    });\n  }\n};\n\nexports.isAuth = isAuth;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsImdlbmVyYXRlVG9rZW4iLCJ1c2VyIiwiand0Iiwic2lnbiIsIl9pZCIsIm5hbWUiLCJlbWFpbCIsImlzQWRtaW4iLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImlzQXV0aCIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJUb2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhdHVzIiwic2VuZCIsIm1lc3NhZ2UiLCJ0b2tlbiIsInNsaWNlIiwibGVuZ3RoIiwidmVyaWZ5IiwiZXJyIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUFBLGdCQUFPQyxNQUFQOztBQUVPLE1BQU1DLGFBQWEsR0FBSUMsSUFBRCxJQUFVQyxzQkFBSUMsSUFBSixDQUNuQztBQUNJQyxFQUFBQSxHQUFHLEVBQUVILElBQUksQ0FBQ0csR0FEZDtBQUVJQyxFQUFBQSxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFGZjtBQUdJQyxFQUFBQSxLQUFLLEVBQUVMLElBQUksQ0FBQ0ssS0FIaEI7QUFJSUMsRUFBQUEsT0FBTyxFQUFFTixJQUFJLENBQUNNO0FBSmxCLENBRG1DLEVBT25DQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFQdUIsQ0FBaEM7Ozs7QUFTQSxNQUFNQyxNQUFNLEdBQUcsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7QUFDdEMsUUFBTUMsV0FBVyxHQUFHSCxHQUFHLENBQUNJLE9BQUosQ0FBWUMsYUFBaEM7O0FBQ0EsTUFBSSxDQUFDRixXQUFMLEVBQWtCO0FBQ2ZGLElBQUFBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVDLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQXJCO0FBQ0YsR0FGRCxNQUVPO0FBQ0gsVUFBTUMsS0FBSyxHQUFHTixXQUFXLENBQUNPLEtBQVosQ0FBa0IsQ0FBbEIsRUFBcUJQLFdBQVcsQ0FBQ1EsTUFBakMsQ0FBZDs7QUFDQXJCLDBCQUFJc0IsTUFBSixDQUFXSCxLQUFYLEVBQWtCYixPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUIsRUFBMEMsQ0FBQ2UsR0FBRCxFQUFNQyxJQUFOLEtBQWU7QUFDckQsVUFBSUQsR0FBSixFQUFTO0FBQ0xaLFFBQUFBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUNDLFVBQUFBLE9BQU8sRUFBRTtBQUFWLFNBQXJCO0FBQ0gsT0FGRCxNQUVPO0FBQ0hSLFFBQUFBLEdBQUcsQ0FBQ1gsSUFBSixHQUFXeUIsSUFBWDtBQUNBWixRQUFBQSxJQUFJO0FBQ1A7QUFDSixLQVBEO0FBUUg7QUFDSixDQWZNIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcZ3VpbGhlcm1lXFxEb3dubG9hZHNcXGpzYW1hem9uYVxcYmFja2VuZFxcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7XHJcblxyXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVUb2tlbiA9ICh1c2VyKSA9PiBqd3Quc2lnbihcclxuICAgIHtcclxuICAgICAgICBfaWQ6IHVzZXIuX2lkLFxyXG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICBpc0FkbWluOiB1c2VyLmlzQWRtaW5cclxuICAgIH0sXHJcbiAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVUXHJcbik7XHJcbmV4cG9ydCBjb25zdCBpc0F1dGggPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIGNvbnN0IGJlYXJlclRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuICAgIGlmICghYmVhcmVyVG9rZW4pIHtcclxuICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogJ3Rva2VuIGlzIG5vdCBzdXBwbGllZCcgfSkgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gYmVhcmVyVG9rZW4uc2xpY2UoNywgYmVhcmVyVG9rZW4ubGVuZ3RoKTtcclxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCAoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHttZXNzYWdlOiAnaW52YWxpZCB0b2tlbid9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlcS51c2VyID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIG5leHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iXX0=","map":{"version":3,"sources":["utils.js"],"names":["dotenv","config","generateToken","user","jwt","sign","_id","name","email","isAdmin","process","env","JWT_SECRET","isAuth","req","res","next","bearerToken","headers","authorization","status","send","message","token","slice","length","verify","err","data"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEAA,gBAAOC,MAAP;;AAEO,MAAMC,aAAa,GAAIC,IAAD,IAAUC,sBAAIC,IAAJ,CACnC;AACIC,EAAAA,GAAG,EAAEH,IAAI,CAACG,GADd;AAEIC,EAAAA,IAAI,EAAEJ,IAAI,CAACI,IAFf;AAGIC,EAAAA,KAAK,EAAEL,IAAI,CAACK,KAHhB;AAIIC,EAAAA,OAAO,EAAEN,IAAI,CAACM;AAJlB,CADmC,EAOnCC,OAAO,CAACC,GAAR,CAAYC,UAPuB,CAAhC;;;;AASA,MAAMC,MAAM,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACtC,QAAMC,WAAW,GAAGH,GAAG,CAACI,OAAJ,CAAYC,aAAhC;;AACA,MAAI,CAACF,WAAL,EAAkB;AACfF,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB;AACF,GAFD,MAEO;AACH,UAAMC,KAAK,GAAGN,WAAW,CAACO,KAAZ,CAAkB,CAAlB,EAAqBP,WAAW,CAACQ,MAAjC,CAAd;;AACArB,0BAAIsB,MAAJ,CAAWH,KAAX,EAAkBb,OAAO,CAACC,GAAR,CAAYC,UAA9B,EAA0C,CAACe,GAAD,EAAMC,IAAN,KAAe;AACrD,UAAID,GAAJ,EAAS;AACLZ,QAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAE;AAAV,SAArB;AACH,OAFD,MAEO;AACHR,QAAAA,GAAG,CAACX,IAAJ,GAAWyB,IAAX;AACAZ,QAAAA,IAAI;AACP;AACJ,KAPD;AAQH;AACJ,CAfM","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\","sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nexport const generateToken = (user) => jwt.sign(\r\n    {\r\n        _id: user._id,\r\n        name: user.name,\r\n        email: user.email,\r\n        isAdmin: user.isAdmin\r\n    },\r\n    process.env.JWT_SECRET\r\n);\r\nexport const isAuth = (req, res, next) => {\r\n    const bearerToken = req.headers.authorization;\r\n    if (!bearerToken) {\r\n       res.status(401).send({ message: 'token is not supplied' }) \r\n    } else {\r\n        const token = bearerToken.slice(7, bearerToken.length);\r\n        jwt.verify(token, process.env.JWT_SECRET, (err, data) => {\r\n            if (err) {\r\n                res.status(401).send({message: 'invalid token'});\r\n            } else {\r\n                req.user = data;\r\n                next();\r\n            }\r\n        })\r\n    }\r\n}"]}},"mtime":1649959550393},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\routers\\\\orderRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\n\nvar _orderModel = _interopRequireDefault(require(\"../models/orderModel\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst orderRouter = _express.default.Router();\n\norderRouter.get('/mine', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({\n    user: req.user._id\n  });\n  res.send(orders);\n}));\norderRouter.get('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n\n  if (order) {\n    res.send(order);\n  } else {\n    res.status(404).send({\n      message: 'Order Not found'\n    });\n  }\n}));\norderRouter.post('/', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = new _orderModel.default({\n    orderItems: req.body.orderItems,\n    user: req.user._id,\n    shipping: req.body.shipping,\n    payment: req.body.payment,\n    itemsPrice: req.body.itemsPrice,\n    taxPrice: req.body.taxPrice,\n    shippingPrice: req.body.shippingPrice,\n    totalPrice: req.body.totalPrice\n  });\n  const createdOrder = await order.save();\n  res.status(201).send({\n    message: 'New order Created',\n    order: createdOrder\n  });\n}));\norderRouter.put('/:id/pay', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n\n  if (order) {\n    order.isPaid = true;\n    order.paidAt = Date.now();\n    order.payment.paymentResult = {\n      payerID: req.body.payerID,\n      paymentID: req.body.paymentID,\n      orderID: req.body.orderID\n    };\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order paid',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order not found.'\n    });\n  }\n}));\nvar _default = orderRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyUm91dGVyLmpzIl0sIm5hbWVzIjpbIm9yZGVyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImlzQXV0aCIsInJlcSIsInJlcyIsIm9yZGVycyIsIk9yZGVyIiwiZmluZCIsInVzZXIiLCJfaWQiLCJzZW5kIiwib3JkZXIiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwic3RhdHVzIiwibWVzc2FnZSIsInBvc3QiLCJvcmRlckl0ZW1zIiwiYm9keSIsInNoaXBwaW5nIiwicGF5bWVudCIsIml0ZW1zUHJpY2UiLCJ0YXhQcmljZSIsInNoaXBwaW5nUHJpY2UiLCJ0b3RhbFByaWNlIiwiY3JlYXRlZE9yZGVyIiwic2F2ZSIsInB1dCIsImlzUGFpZCIsInBhaWRBdCIsIkRhdGUiLCJub3ciLCJwYXltZW50UmVzdWx0IiwicGF5ZXJJRCIsInBheW1lbnRJRCIsIm9yZGVySUQiLCJ1cGRhdGVkT3JkZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLFdBQVcsR0FBR0MsaUJBQVFDLE1BQVIsRUFBcEI7O0FBQ0FGLFdBQVcsQ0FBQ0csR0FBWixDQUFnQixPQUFoQixFQUF5QkMsYUFBekIsRUFBaUMsa0NBQW9CLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUNyRSxRQUFNQyxNQUFNLEdBQUcsTUFBTUMsb0JBQU1DLElBQU4sQ0FBVztBQUFDQyxJQUFBQSxJQUFJLEVBQUVMLEdBQUcsQ0FBQ0ssSUFBSixDQUFTQztBQUFoQixHQUFYLENBQXJCO0FBQ0FMLEVBQUFBLEdBQUcsQ0FBQ00sSUFBSixDQUFTTCxNQUFUO0FBQ0gsQ0FIZ0MsQ0FBakM7QUFJQVAsV0FBVyxDQUFDRyxHQUFaLENBQ0ksTUFESixFQUVJQyxhQUZKLEVBR0ksa0NBQW9CLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUNwQyxRQUFNTyxLQUFLLEdBQUcsTUFBTUwsb0JBQU1NLFFBQU4sQ0FBZVQsR0FBRyxDQUFDVSxNQUFKLENBQVdDLEVBQTFCLENBQXBCOztBQUNBLE1BQUlILEtBQUosRUFBVztBQUNQUCxJQUFBQSxHQUFHLENBQUNNLElBQUosQ0FBU0MsS0FBVDtBQUNILEdBRkQsTUFFTztBQUNIUCxJQUFBQSxHQUFHLENBQUNXLE1BQUosQ0FBVyxHQUFYLEVBQWdCTCxJQUFoQixDQUFxQjtBQUFFTSxNQUFBQSxPQUFPLEVBQUU7QUFBWCxLQUFyQjtBQUNIO0FBQ0osQ0FQRCxDQUhKO0FBWUFsQixXQUFXLENBQUNtQixJQUFaLENBQ0ksR0FESixFQUVJZixhQUZKLEVBR0ksa0NBQW9CLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUNwQyxRQUFNTyxLQUFLLEdBQUcsSUFBSUwsbUJBQUosQ0FBVTtBQUNwQlksSUFBQUEsVUFBVSxFQUFFZixHQUFHLENBQUNnQixJQUFKLENBQVNELFVBREQ7QUFFcEJWLElBQUFBLElBQUksRUFBRUwsR0FBRyxDQUFDSyxJQUFKLENBQVNDLEdBRks7QUFHcEJXLElBQUFBLFFBQVEsRUFBRWpCLEdBQUcsQ0FBQ2dCLElBQUosQ0FBU0MsUUFIQztBQUlwQkMsSUFBQUEsT0FBTyxFQUFFbEIsR0FBRyxDQUFDZ0IsSUFBSixDQUFTRSxPQUpFO0FBS3BCQyxJQUFBQSxVQUFVLEVBQUVuQixHQUFHLENBQUNnQixJQUFKLENBQVNHLFVBTEQ7QUFNcEJDLElBQUFBLFFBQVEsRUFBRXBCLEdBQUcsQ0FBQ2dCLElBQUosQ0FBU0ksUUFOQztBQU9wQkMsSUFBQUEsYUFBYSxFQUFFckIsR0FBRyxDQUFDZ0IsSUFBSixDQUFTSyxhQVBKO0FBUXBCQyxJQUFBQSxVQUFVLEVBQUV0QixHQUFHLENBQUNnQixJQUFKLENBQVNNO0FBUkQsR0FBVixDQUFkO0FBVUEsUUFBTUMsWUFBWSxHQUFHLE1BQU1mLEtBQUssQ0FBQ2dCLElBQU4sRUFBM0I7QUFDQXZCLEVBQUFBLEdBQUcsQ0FBQ1csTUFBSixDQUFXLEdBQVgsRUFBZ0JMLElBQWhCLENBQXFCO0FBQUVNLElBQUFBLE9BQU8sRUFBRSxtQkFBWDtBQUFnQ0wsSUFBQUEsS0FBSyxFQUFFZTtBQUF2QyxHQUFyQjtBQUNILENBYkQsQ0FISjtBQWtCQTVCLFdBQVcsQ0FBQzhCLEdBQVosQ0FBZ0IsVUFBaEIsRUFBNEIxQixhQUE1QixFQUFvQyxrQ0FBb0IsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3hFLFFBQU1PLEtBQUssR0FBRyxNQUFNTCxvQkFBTU0sUUFBTixDQUFlVCxHQUFHLENBQUNVLE1BQUosQ0FBV0MsRUFBMUIsQ0FBcEI7O0FBQ0EsTUFBSUgsS0FBSixFQUFXO0FBQ1BBLElBQUFBLEtBQUssQ0FBQ2tCLE1BQU4sR0FBZSxJQUFmO0FBQ0FsQixJQUFBQSxLQUFLLENBQUNtQixNQUFOLEdBQWVDLElBQUksQ0FBQ0MsR0FBTCxFQUFmO0FBQ0FyQixJQUFBQSxLQUFLLENBQUNVLE9BQU4sQ0FBY1ksYUFBZCxHQUE4QjtBQUMxQkMsTUFBQUEsT0FBTyxFQUFFL0IsR0FBRyxDQUFDZ0IsSUFBSixDQUFTZSxPQURRO0FBRTFCQyxNQUFBQSxTQUFTLEVBQUVoQyxHQUFHLENBQUNnQixJQUFKLENBQVNnQixTQUZNO0FBRzFCQyxNQUFBQSxPQUFPLEVBQUVqQyxHQUFHLENBQUNnQixJQUFKLENBQVNpQjtBQUhRLEtBQTlCO0FBS0EsVUFBTUMsWUFBWSxHQUFHLE1BQU0xQixLQUFLLENBQUNnQixJQUFOLEVBQTNCO0FBQ0F2QixJQUFBQSxHQUFHLENBQUNNLElBQUosQ0FBUztBQUFFTSxNQUFBQSxPQUFPLEVBQUUsWUFBWDtBQUF5QkwsTUFBQUEsS0FBSyxFQUFFMEI7QUFBaEMsS0FBVDtBQUNILEdBVkQsTUFVTztBQUNIakMsSUFBQUEsR0FBRyxDQUFDVyxNQUFKLENBQVcsR0FBWCxFQUFnQkwsSUFBaEIsQ0FBcUI7QUFBRU0sTUFBQUEsT0FBTyxFQUFFO0FBQVgsS0FBckI7QUFDSDtBQUNKLENBZm1DLENBQXBDO2VBZ0JlbEIsVyIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc2FtYXpvbmFcXGJhY2tlbmRcXHJvdXRlcnNcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCBleHByZXNzQXN5bmNIYW5kbGVyIGZyb20gXCJleHByZXNzLWFzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IE9yZGVyIGZyb20gXCIuLi9tb2RlbHMvb3JkZXJNb2RlbFwiO1xyXG5pbXBvcnQge2lzQXV0aH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuY29uc3Qgb3JkZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5vcmRlclJvdXRlci5nZXQoJy9taW5lJywgaXNBdXRoLCBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgT3JkZXIuZmluZCh7dXNlcjogcmVxLnVzZXIuX2lkfSk7XHJcbiAgICByZXMuc2VuZChvcmRlcnMpO1xyXG59KSk7XHJcbm9yZGVyUm91dGVyLmdldChcclxuICAgICcvOmlkJyxcclxuICAgIGlzQXV0aCxcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgICAgICBpZiAob3JkZXIpIHtcclxuICAgICAgICAgICAgcmVzLnNlbmQob3JkZXIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIE5vdCBmb3VuZCcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuKTtcclxub3JkZXJSb3V0ZXIucG9zdChcclxuICAgICcvJywgXHJcbiAgICBpc0F1dGgsIFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgICAgICBjb25zdCBvcmRlciA9IG5ldyBPcmRlcih7XHJcbiAgICAgICAgICAgIG9yZGVySXRlbXM6IHJlcS5ib2R5Lm9yZGVySXRlbXMsXHJcbiAgICAgICAgICAgIHVzZXI6IHJlcS51c2VyLl9pZCxcclxuICAgICAgICAgICAgc2hpcHBpbmc6IHJlcS5ib2R5LnNoaXBwaW5nLFxyXG4gICAgICAgICAgICBwYXltZW50OiByZXEuYm9keS5wYXltZW50LFxyXG4gICAgICAgICAgICBpdGVtc1ByaWNlOiByZXEuYm9keS5pdGVtc1ByaWNlLFxyXG4gICAgICAgICAgICB0YXhQcmljZTogcmVxLmJvZHkudGF4UHJpY2UsXHJcbiAgICAgICAgICAgIHNoaXBwaW5nUHJpY2U6IHJlcS5ib2R5LnNoaXBwaW5nUHJpY2UsXHJcbiAgICAgICAgICAgIHRvdGFsUHJpY2U6IHJlcS5ib2R5LnRvdGFsUHJpY2VcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBjcmVhdGVkT3JkZXIgPSBhd2FpdCBvcmRlci5zYXZlKCk7XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLnNlbmQoeyBtZXNzYWdlOiAnTmV3IG9yZGVyIENyZWF0ZWQnLCBvcmRlcjogY3JlYXRlZE9yZGVyfSlcclxuICAgIH0pXHJcbik7XHJcbm9yZGVyUm91dGVyLnB1dCgnLzppZC9wYXknLCBpc0F1dGgsIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgaWYgKG9yZGVyKSB7XHJcbiAgICAgICAgb3JkZXIuaXNQYWlkID0gdHJ1ZTtcclxuICAgICAgICBvcmRlci5wYWlkQXQgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIG9yZGVyLnBheW1lbnQucGF5bWVudFJlc3VsdCA9IHtcclxuICAgICAgICAgICAgcGF5ZXJJRDogcmVxLmJvZHkucGF5ZXJJRCxcclxuICAgICAgICAgICAgcGF5bWVudElEOiByZXEuYm9keS5wYXltZW50SUQsXHJcbiAgICAgICAgICAgIG9yZGVySUQ6IHJlcS5ib2R5Lm9yZGVySUQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSBhd2FpdCBvcmRlci5zYXZlKCk7XHJcbiAgICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgcGFpZCcsIG9yZGVyOiB1cGRhdGVkT3JkZXJ9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgbm90IGZvdW5kLid9KTtcclxuICAgIH1cclxufSkpXHJcbmV4cG9ydCBkZWZhdWx0IG9yZGVyUm91dGVyOyJdfQ==","map":{"version":3,"sources":["orderRouter.js"],"names":["orderRouter","express","Router","get","isAuth","req","res","orders","Order","find","user","_id","send","order","findById","params","id","status","message","post","orderItems","body","shipping","payment","itemsPrice","taxPrice","shippingPrice","totalPrice","createdOrder","save","put","isPaid","paidAt","Date","now","paymentResult","payerID","paymentID","orderID","updatedOrder"],"mappings":"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","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\routers\\","sourcesContent":["import express from \"express\";\r\nimport expressAsyncHandler from \"express-async-handler\";\r\nimport Order from \"../models/orderModel\";\r\nimport {isAuth} from '../utils';\r\n\r\nconst orderRouter = express.Router();\r\norderRouter.get('/mine', isAuth, expressAsyncHandler(async (req, res) => {\r\n    const orders = await Order.find({user: req.user._id});\r\n    res.send(orders);\r\n}));\r\norderRouter.get(\r\n    '/:id',\r\n    isAuth,\r\n    expressAsyncHandler(async (req, res) => {\r\n        const order = await Order.findById(req.params.id);\r\n        if (order) {\r\n            res.send(order);\r\n        } else {\r\n            res.status(404).send({ message: 'Order Not found' });\r\n        }\r\n    })\r\n);\r\norderRouter.post(\r\n    '/', \r\n    isAuth, \r\n    expressAsyncHandler(async (req, res) => {\r\n        const order = new Order({\r\n            orderItems: req.body.orderItems,\r\n            user: req.user._id,\r\n            shipping: req.body.shipping,\r\n            payment: req.body.payment,\r\n            itemsPrice: req.body.itemsPrice,\r\n            taxPrice: req.body.taxPrice,\r\n            shippingPrice: req.body.shippingPrice,\r\n            totalPrice: req.body.totalPrice\r\n        });\r\n        const createdOrder = await order.save();\r\n        res.status(201).send({ message: 'New order Created', order: createdOrder})\r\n    })\r\n);\r\norderRouter.put('/:id/pay', isAuth, expressAsyncHandler(async (req, res) => {\r\n    const order = await Order.findById(req.params.id);\r\n    if (order) {\r\n        order.isPaid = true;\r\n        order.paidAt = Date.now();\r\n        order.payment.paymentResult = {\r\n            payerID: req.body.payerID,\r\n            paymentID: req.body.paymentID,\r\n            orderID: req.body.orderID,\r\n        };\r\n        const updatedOrder = await order.save();\r\n        res.send({ message: 'Order paid', order: updatedOrder});\r\n    } else {\r\n        res.status(404).send({ message: 'Order not found.'});\r\n    }\r\n}))\r\nexport default orderRouter;"]}},"mtime":1650140486681},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\models\\\\orderModel.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst orderSchema = new _mongoose.default.Schema({\n  orderItems: [{\n    name: {\n      type: String,\n      required: true\n    },\n    image: {\n      type: String,\n      required: true\n    },\n    price: {\n      type: Number,\n      required: true\n    },\n    qty: {\n      type: Number,\n      required: true\n    },\n    product: {\n      type: _mongoose.default.Schema.Types.ObjectId,\n      ref: 'Product',\n      required: true\n    }\n  }],\n  user: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  shipping: {\n    address: String,\n    city: String,\n    postalCode: String,\n    country: String\n  },\n  payment: {\n    paymentMethod: String,\n    paymentResult: {\n      orderID: String,\n      payerID: String,\n      paymentID: String\n    }\n  },\n  itemsPrice: Number,\n  taxPrice: Number,\n  shippingPrice: Number,\n  totalPrice: Number,\n  paidAt: Date,\n  isPaid: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  isDelivered: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  deliveredAt: Date\n}, {\n  timestamps: true\n});\n\nconst Order = _mongoose.default.model('Order', orderSchema);\n\nvar _default = Order;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyTW9kZWwuanMiXSwibmFtZXMiOlsib3JkZXJTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsIm9yZGVySXRlbXMiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiaW1hZ2UiLCJwcmljZSIsIk51bWJlciIsInF0eSIsInByb2R1Y3QiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwidXNlciIsInNoaXBwaW5nIiwiYWRkcmVzcyIsImNpdHkiLCJwb3N0YWxDb2RlIiwiY291bnRyeSIsInBheW1lbnQiLCJwYXltZW50TWV0aG9kIiwicGF5bWVudFJlc3VsdCIsIm9yZGVySUQiLCJwYXllcklEIiwicGF5bWVudElEIiwiaXRlbXNQcmljZSIsInRheFByaWNlIiwic2hpcHBpbmdQcmljZSIsInRvdGFsUHJpY2UiLCJwYWlkQXQiLCJEYXRlIiwiaXNQYWlkIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJpc0RlbGl2ZXJlZCIsImRlbGl2ZXJlZEF0IiwidGltZXN0YW1wcyIsIk9yZGVyIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLE1BQU1BLFdBQVcsR0FBRyxJQUFJQyxrQkFBU0MsTUFBYixDQUNoQjtBQUNJQyxFQUFBQSxVQUFVLEVBQUUsQ0FDUjtBQUNJQyxJQUFBQSxJQUFJLEVBQUU7QUFBQ0MsTUFBQUEsSUFBSSxFQUFFQyxNQUFQO0FBQWVDLE1BQUFBLFFBQVEsRUFBRTtBQUF6QixLQURWO0FBRUlDLElBQUFBLEtBQUssRUFBRTtBQUFDSCxNQUFBQSxJQUFJLEVBQUVDLE1BQVA7QUFBZUMsTUFBQUEsUUFBUSxFQUFFO0FBQXpCLEtBRlg7QUFHSUUsSUFBQUEsS0FBSyxFQUFFO0FBQUNKLE1BQUFBLElBQUksRUFBRUssTUFBUDtBQUFlSCxNQUFBQSxRQUFRLEVBQUU7QUFBekIsS0FIWDtBQUlJSSxJQUFBQSxHQUFHLEVBQUU7QUFBQ04sTUFBQUEsSUFBSSxFQUFFSyxNQUFQO0FBQWVILE1BQUFBLFFBQVEsRUFBRTtBQUF6QixLQUpUO0FBS0lLLElBQUFBLE9BQU8sRUFBRTtBQUNMUCxNQUFBQSxJQUFJLEVBQUVKLGtCQUFTQyxNQUFULENBQWdCVyxLQUFoQixDQUFzQkMsUUFEdkI7QUFFTEMsTUFBQUEsR0FBRyxFQUFFLFNBRkE7QUFHTFIsTUFBQUEsUUFBUSxFQUFFO0FBSEw7QUFMYixHQURRLENBRGhCO0FBY0lTLEVBQUFBLElBQUksRUFBRTtBQUFDWCxJQUFBQSxJQUFJLEVBQUVKLGtCQUFTQyxNQUFULENBQWdCVyxLQUFoQixDQUFzQkMsUUFBN0I7QUFBdUNDLElBQUFBLEdBQUcsRUFBRSxNQUE1QztBQUFvRFIsSUFBQUEsUUFBUSxFQUFFO0FBQTlELEdBZFY7QUFlSVUsRUFBQUEsUUFBUSxFQUFFO0FBQ05DLElBQUFBLE9BQU8sRUFBRVosTUFESDtBQUVOYSxJQUFBQSxJQUFJLEVBQUViLE1BRkE7QUFHTmMsSUFBQUEsVUFBVSxFQUFFZCxNQUhOO0FBSU5lLElBQUFBLE9BQU8sRUFBRWY7QUFKSCxHQWZkO0FBcUJJZ0IsRUFBQUEsT0FBTyxFQUFFO0FBQ0xDLElBQUFBLGFBQWEsRUFBRWpCLE1BRFY7QUFFTGtCLElBQUFBLGFBQWEsRUFBRTtBQUNYQyxNQUFBQSxPQUFPLEVBQUVuQixNQURFO0FBRVhvQixNQUFBQSxPQUFPLEVBQUVwQixNQUZFO0FBR1hxQixNQUFBQSxTQUFTLEVBQUVyQjtBQUhBO0FBRlYsR0FyQmI7QUE2QklzQixFQUFBQSxVQUFVLEVBQUVsQixNQTdCaEI7QUE4QkltQixFQUFBQSxRQUFRLEVBQUVuQixNQTlCZDtBQStCSW9CLEVBQUFBLGFBQWEsRUFBRXBCLE1BL0JuQjtBQWdDSXFCLEVBQUFBLFVBQVUsRUFBRXJCLE1BaENoQjtBQWlDSXNCLEVBQUFBLE1BQU0sRUFBRUMsSUFqQ1o7QUFrQ0lDLEVBQUFBLE1BQU0sRUFBRTtBQUFDN0IsSUFBQUEsSUFBSSxFQUFFOEIsT0FBUDtBQUFnQjVCLElBQUFBLFFBQVEsRUFBRSxJQUExQjtBQUFnQzZCLElBQUFBLE9BQU8sRUFBRTtBQUF6QyxHQWxDWjtBQW1DSUMsRUFBQUEsV0FBVyxFQUFFO0FBQUNoQyxJQUFBQSxJQUFJLEVBQUU4QixPQUFQO0FBQWdCNUIsSUFBQUEsUUFBUSxFQUFFLElBQTFCO0FBQWdDNkIsSUFBQUEsT0FBTyxFQUFFO0FBQXpDLEdBbkNqQjtBQW9DSUUsRUFBQUEsV0FBVyxFQUFFTDtBQXBDakIsQ0FEZ0IsRUF1Q2hCO0FBQ0lNLEVBQUFBLFVBQVUsRUFBRTtBQURoQixDQXZDZ0IsQ0FBcEI7O0FBMkNBLE1BQU1DLEtBQUssR0FBR3ZDLGtCQUFTd0MsS0FBVCxDQUFlLE9BQWYsRUFBd0J6QyxXQUF4QixDQUFkOztlQUNld0MsSyIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc2FtYXpvbmFcXGJhY2tlbmRcXG1vZGVsc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3Qgb3JkZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxyXG4gICAge1xyXG4gICAgICAgIG9yZGVySXRlbXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZToge3R5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgICAgICAgICAgICAgaW1hZ2U6IHt0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgICAgICAgICAgICAgIHByaWNlOiB7dHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICAgICAgICAgICAgICBxdHk6IHt0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnUHJvZHVjdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgdXNlcjoge3R5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnVXNlcicsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgICAgICBzaGlwcGluZzoge1xyXG4gICAgICAgICAgICBhZGRyZXNzOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIGNpdHk6IFN0cmluZyxcclxuICAgICAgICAgICAgcG9zdGFsQ29kZTogU3RyaW5nLFxyXG4gICAgICAgICAgICBjb3VudHJ5OiBTdHJpbmcsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYXltZW50OiB7XHJcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IFN0cmluZyxcclxuICAgICAgICAgICAgcGF5bWVudFJlc3VsdDoge1xyXG4gICAgICAgICAgICAgICAgb3JkZXJJRDogU3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgcGF5ZXJJRDogU3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudElEOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGl0ZW1zUHJpY2U6IE51bWJlcixcclxuICAgICAgICB0YXhQcmljZTogTnVtYmVyLFxyXG4gICAgICAgIHNoaXBwaW5nUHJpY2U6IE51bWJlcixcclxuICAgICAgICB0b3RhbFByaWNlOiBOdW1iZXIsXHJcbiAgICAgICAgcGFpZEF0OiBEYXRlLFxyXG4gICAgICAgIGlzUGFpZDoge3R5cGU6IEJvb2xlYW4sIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiBmYWxzZX0sXHJcbiAgICAgICAgaXNEZWxpdmVyZWQ6IHt0eXBlOiBCb29sZWFuLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogZmFsc2V9LFxyXG4gICAgICAgIGRlbGl2ZXJlZEF0OiBEYXRlLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0aW1lc3RhbXBzOiB0cnVlLFxyXG4gICAgfVxyXG4pO1xyXG5jb25zdCBPcmRlciA9IG1vbmdvb3NlLm1vZGVsKCdPcmRlcicsIG9yZGVyU2NoZW1hKTtcclxuZXhwb3J0IGRlZmF1bHQgT3JkZXI7Il19","map":{"version":3,"sources":["orderModel.js"],"names":["orderSchema","mongoose","Schema","orderItems","name","type","String","required","image","price","Number","qty","product","Types","ObjectId","ref","user","shipping","address","city","postalCode","country","payment","paymentMethod","paymentResult","orderID","payerID","paymentID","itemsPrice","taxPrice","shippingPrice","totalPrice","paidAt","Date","isPaid","Boolean","default","isDelivered","deliveredAt","timestamps","Order","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,WAAW,GAAG,IAAIC,kBAASC,MAAb,CAChB;AACIC,EAAAA,UAAU,EAAE,CACR;AACIC,IAAAA,IAAI,EAAE;AAACC,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,QAAQ,EAAE;AAAzB,KADV;AAEIC,IAAAA,KAAK,EAAE;AAACH,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,QAAQ,EAAE;AAAzB,KAFX;AAGIE,IAAAA,KAAK,EAAE;AAACJ,MAAAA,IAAI,EAAEK,MAAP;AAAeH,MAAAA,QAAQ,EAAE;AAAzB,KAHX;AAIII,IAAAA,GAAG,EAAE;AAACN,MAAAA,IAAI,EAAEK,MAAP;AAAeH,MAAAA,QAAQ,EAAE;AAAzB,KAJT;AAKIK,IAAAA,OAAO,EAAE;AACLP,MAAAA,IAAI,EAAEJ,kBAASC,MAAT,CAAgBW,KAAhB,CAAsBC,QADvB;AAELC,MAAAA,GAAG,EAAE,SAFA;AAGLR,MAAAA,QAAQ,EAAE;AAHL;AALb,GADQ,CADhB;AAcIS,EAAAA,IAAI,EAAE;AAACX,IAAAA,IAAI,EAAEJ,kBAASC,MAAT,CAAgBW,KAAhB,CAAsBC,QAA7B;AAAuCC,IAAAA,GAAG,EAAE,MAA5C;AAAoDR,IAAAA,QAAQ,EAAE;AAA9D,GAdV;AAeIU,EAAAA,QAAQ,EAAE;AACNC,IAAAA,OAAO,EAAEZ,MADH;AAENa,IAAAA,IAAI,EAAEb,MAFA;AAGNc,IAAAA,UAAU,EAAEd,MAHN;AAINe,IAAAA,OAAO,EAAEf;AAJH,GAfd;AAqBIgB,EAAAA,OAAO,EAAE;AACLC,IAAAA,aAAa,EAAEjB,MADV;AAELkB,IAAAA,aAAa,EAAE;AACXC,MAAAA,OAAO,EAAEnB,MADE;AAEXoB,MAAAA,OAAO,EAAEpB,MAFE;AAGXqB,MAAAA,SAAS,EAAErB;AAHA;AAFV,GArBb;AA6BIsB,EAAAA,UAAU,EAAElB,MA7BhB;AA8BImB,EAAAA,QAAQ,EAAEnB,MA9Bd;AA+BIoB,EAAAA,aAAa,EAAEpB,MA/BnB;AAgCIqB,EAAAA,UAAU,EAAErB,MAhChB;AAiCIsB,EAAAA,MAAM,EAAEC,IAjCZ;AAkCIC,EAAAA,MAAM,EAAE;AAAC7B,IAAAA,IAAI,EAAE8B,OAAP;AAAgB5B,IAAAA,QAAQ,EAAE,IAA1B;AAAgC6B,IAAAA,OAAO,EAAE;AAAzC,GAlCZ;AAmCIC,EAAAA,WAAW,EAAE;AAAChC,IAAAA,IAAI,EAAE8B,OAAP;AAAgB5B,IAAAA,QAAQ,EAAE,IAA1B;AAAgC6B,IAAAA,OAAO,EAAE;AAAzC,GAnCjB;AAoCIE,EAAAA,WAAW,EAAEL;AApCjB,CADgB,EAuChB;AACIM,EAAAA,UAAU,EAAE;AADhB,CAvCgB,CAApB;;AA2CA,MAAMC,KAAK,GAAGvC,kBAASwC,KAAT,CAAe,OAAf,EAAwBzC,WAAxB,CAAd;;eACewC,K","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\models\\","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst orderSchema = new mongoose.Schema(\r\n    {\r\n        orderItems: [\r\n            {\r\n                name: {type: String, required: true},\r\n                image: {type: String, required: true},\r\n                price: {type: Number, required: true},\r\n                qty: {type: Number, required: true},\r\n                product: {\r\n                    type: mongoose.Schema.Types.ObjectId,\r\n                    ref: 'Product',\r\n                    required: true,\r\n                },\r\n            },\r\n        ],\r\n        user: {type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true},\r\n        shipping: {\r\n            address: String,\r\n            city: String,\r\n            postalCode: String,\r\n            country: String,\r\n        },\r\n        payment: {\r\n            paymentMethod: String,\r\n            paymentResult: {\r\n                orderID: String,\r\n                payerID: String,\r\n                paymentID: String,\r\n            }\r\n        },\r\n        itemsPrice: Number,\r\n        taxPrice: Number,\r\n        shippingPrice: Number,\r\n        totalPrice: Number,\r\n        paidAt: Date,\r\n        isPaid: {type: Boolean, required: true, default: false},\r\n        isDelivered: {type: Boolean, required: true, default: false},\r\n        deliveredAt: Date,\r\n    },\r\n    {\r\n        timestamps: true,\r\n    }\r\n);\r\nconst Order = mongoose.model('Order', orderSchema);\r\nexport default Order;"]}},"mtime":1650139224451},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\routers\\\\orderRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\n\nvar _orderModel = _interopRequireDefault(require(\"../models/orderModel\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst orderRouter = _express.default.Router();\n\norderRouter.get('/mine', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({\n    user: req.user._id\n  });\n  res.send(orders);\n}));\norderRouter.get('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n\n  if (order) {\n    res.send(order);\n  } else {\n    res.status(404).send({\n      message: 'Order Not found'\n    });\n  }\n}));\norderRouter.post('/', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = new _orderModel.default({\n    orderItems: req.body.orderItems,\n    user: req.user._id,\n    shipping: req.body.shipping,\n    payment: req.body.payment,\n    itemsPrice: req.body.itemsPrice,\n    taxPrice: req.body.taxPrice,\n    shippingPrice: req.body.shippingPrice,\n    totalPrice: req.body.totalPrice\n  });\n  const createdOrder = await order.save();\n  res.status(201).send({\n    message: 'New order Created',\n    order: createdOrder\n  });\n}));\norderRouter.put('/:id/pay', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n\n  if (order) {\n    order.isPaid = true;\n    order.paidAt = Date.now();\n    order.payment.paymentResult = {\n      payerID: req.body.payerID,\n      paymentID: req.body.paymentID,\n      orderID: req.body.orderID\n    };\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order paid',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order not found.'\n    });\n  }\n}));\nvar _default = orderRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyUm91dGVyLmpzIl0sIm5hbWVzIjpbIm9yZGVyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImlzQXV0aCIsInJlcSIsInJlcyIsIm9yZGVycyIsIk9yZGVyIiwiZmluZCIsInVzZXIiLCJfaWQiLCJzZW5kIiwib3JkZXIiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwic3RhdHVzIiwibWVzc2FnZSIsInBvc3QiLCJvcmRlckl0ZW1zIiwiYm9keSIsInNoaXBwaW5nIiwicGF5bWVudCIsIml0ZW1zUHJpY2UiLCJ0YXhQcmljZSIsInNoaXBwaW5nUHJpY2UiLCJ0b3RhbFByaWNlIiwiY3JlYXRlZE9yZGVyIiwic2F2ZSIsInB1dCIsImlzUGFpZCIsInBhaWRBdCIsIkRhdGUiLCJub3ciLCJwYXltZW50UmVzdWx0IiwicGF5ZXJJRCIsInBheW1lbnRJRCIsIm9yZGVySUQiLCJ1cGRhdGVkT3JkZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLFdBQVcsR0FBR0MsaUJBQVFDLE1BQVIsRUFBcEI7O0FBQ0FGLFdBQVcsQ0FBQ0csR0FBWixDQUFnQixPQUFoQixFQUF5QkMsYUFBekIsRUFBaUMsa0NBQW9CLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUNyRSxRQUFNQyxNQUFNLEdBQUcsTUFBTUMsb0JBQU1DLElBQU4sQ0FBVztBQUFDQyxJQUFBQSxJQUFJLEVBQUVMLEdBQUcsQ0FBQ0ssSUFBSixDQUFTQztBQUFoQixHQUFYLENBQXJCO0FBQ0FMLEVBQUFBLEdBQUcsQ0FBQ00sSUFBSixDQUFTTCxNQUFUO0FBQ0gsQ0FIZ0MsQ0FBakM7QUFJQVAsV0FBVyxDQUFDRyxHQUFaLENBQ0ksTUFESixFQUVJQyxhQUZKLEVBR0ksa0NBQW9CLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUNwQyxRQUFNTyxLQUFLLEdBQUcsTUFBTUwsb0JBQU1NLFFBQU4sQ0FBZVQsR0FBRyxDQUFDVSxNQUFKLENBQVdDLEVBQTFCLENBQXBCOztBQUNBLE1BQUlILEtBQUosRUFBVztBQUNQUCxJQUFBQSxHQUFHLENBQUNNLElBQUosQ0FBU0MsS0FBVDtBQUNILEdBRkQsTUFFTztBQUNIUCxJQUFBQSxHQUFHLENBQUNXLE1BQUosQ0FBVyxHQUFYLEVBQWdCTCxJQUFoQixDQUFxQjtBQUFFTSxNQUFBQSxPQUFPLEVBQUU7QUFBWCxLQUFyQjtBQUNIO0FBQ0osQ0FQRCxDQUhKO0FBWUFsQixXQUFXLENBQUNtQixJQUFaLENBQ0ksR0FESixFQUVJZixhQUZKLEVBR0ksa0NBQW9CLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUNwQyxRQUFNTyxLQUFLLEdBQUcsSUFBSUwsbUJBQUosQ0FBVTtBQUNwQlksSUFBQUEsVUFBVSxFQUFFZixHQUFHLENBQUNnQixJQUFKLENBQVNELFVBREQ7QUFFcEJWLElBQUFBLElBQUksRUFBRUwsR0FBRyxDQUFDSyxJQUFKLENBQVNDLEdBRks7QUFHcEJXLElBQUFBLFFBQVEsRUFBRWpCLEdBQUcsQ0FBQ2dCLElBQUosQ0FBU0MsUUFIQztBQUlwQkMsSUFBQUEsT0FBTyxFQUFFbEIsR0FBRyxDQUFDZ0IsSUFBSixDQUFTRSxPQUpFO0FBS3BCQyxJQUFBQSxVQUFVLEVBQUVuQixHQUFHLENBQUNnQixJQUFKLENBQVNHLFVBTEQ7QUFNcEJDLElBQUFBLFFBQVEsRUFBRXBCLEdBQUcsQ0FBQ2dCLElBQUosQ0FBU0ksUUFOQztBQU9wQkMsSUFBQUEsYUFBYSxFQUFFckIsR0FBRyxDQUFDZ0IsSUFBSixDQUFTSyxhQVBKO0FBUXBCQyxJQUFBQSxVQUFVLEVBQUV0QixHQUFHLENBQUNnQixJQUFKLENBQVNNO0FBUkQsR0FBVixDQUFkO0FBVUEsUUFBTUMsWUFBWSxHQUFHLE1BQU1mLEtBQUssQ0FBQ2dCLElBQU4sRUFBM0I7QUFDQXZCLEVBQUFBLEdBQUcsQ0FBQ1csTUFBSixDQUFXLEdBQVgsRUFBZ0JMLElBQWhCLENBQXFCO0FBQUVNLElBQUFBLE9BQU8sRUFBRSxtQkFBWDtBQUFnQ0wsSUFBQUEsS0FBSyxFQUFFZTtBQUF2QyxHQUFyQjtBQUNILENBYkQsQ0FISjtBQWtCQTVCLFdBQVcsQ0FBQzhCLEdBQVosQ0FBZ0IsVUFBaEIsRUFBNEIxQixhQUE1QixFQUFvQyxrQ0FBb0IsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3hFLFFBQU1PLEtBQUssR0FBRyxNQUFNTCxvQkFBTU0sUUFBTixDQUFlVCxHQUFHLENBQUNVLE1BQUosQ0FBV0MsRUFBMUIsQ0FBcEI7O0FBQ0EsTUFBSUgsS0FBSixFQUFXO0FBQ1BBLElBQUFBLEtBQUssQ0FBQ2tCLE1BQU4sR0FBZSxJQUFmO0FBQ0FsQixJQUFBQSxLQUFLLENBQUNtQixNQUFOLEdBQWVDLElBQUksQ0FBQ0MsR0FBTCxFQUFmO0FBQ0FyQixJQUFBQSxLQUFLLENBQUNVLE9BQU4sQ0FBY1ksYUFBZCxHQUE4QjtBQUMxQkMsTUFBQUEsT0FBTyxFQUFFL0IsR0FBRyxDQUFDZ0IsSUFBSixDQUFTZSxPQURRO0FBRTFCQyxNQUFBQSxTQUFTLEVBQUVoQyxHQUFHLENBQUNnQixJQUFKLENBQVNnQixTQUZNO0FBRzFCQyxNQUFBQSxPQUFPLEVBQUVqQyxHQUFHLENBQUNnQixJQUFKLENBQVNpQjtBQUhRLEtBQTlCO0FBS0EsVUFBTUMsWUFBWSxHQUFHLE1BQU0xQixLQUFLLENBQUNnQixJQUFOLEVBQTNCO0FBQ0F2QixJQUFBQSxHQUFHLENBQUNNLElBQUosQ0FBUztBQUFFTSxNQUFBQSxPQUFPLEVBQUUsWUFBWDtBQUF5QkwsTUFBQUEsS0FBSyxFQUFFMEI7QUFBaEMsS0FBVDtBQUNILEdBVkQsTUFVTztBQUNIakMsSUFBQUEsR0FBRyxDQUFDVyxNQUFKLENBQVcsR0FBWCxFQUFnQkwsSUFBaEIsQ0FBcUI7QUFBRU0sTUFBQUEsT0FBTyxFQUFFO0FBQVgsS0FBckI7QUFDSDtBQUNKLENBZm1DLENBQXBDO2VBZ0JlbEIsVyIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc2FtYXpvbmFcXGJhY2tlbmRcXHJvdXRlcnNcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCBleHByZXNzQXN5bmNIYW5kbGVyIGZyb20gXCJleHByZXNzLWFzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IE9yZGVyIGZyb20gXCIuLi9tb2RlbHMvb3JkZXJNb2RlbFwiO1xyXG5pbXBvcnQge2lzQXV0aH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuY29uc3Qgb3JkZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5vcmRlclJvdXRlci5nZXQoJy9taW5lJywgaXNBdXRoLCBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgT3JkZXIuZmluZCh7dXNlcjogcmVxLnVzZXIuX2lkfSk7XHJcbiAgICByZXMuc2VuZChvcmRlcnMpO1xyXG59KSk7XHJcbm9yZGVyUm91dGVyLmdldChcclxuICAgICcvOmlkJyxcclxuICAgIGlzQXV0aCxcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgICAgICBpZiAob3JkZXIpIHtcclxuICAgICAgICAgICAgcmVzLnNlbmQob3JkZXIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIE5vdCBmb3VuZCcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuKTtcclxub3JkZXJSb3V0ZXIucG9zdChcclxuICAgICcvJywgXHJcbiAgICBpc0F1dGgsIFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgICAgICBjb25zdCBvcmRlciA9IG5ldyBPcmRlcih7XHJcbiAgICAgICAgICAgIG9yZGVySXRlbXM6IHJlcS5ib2R5Lm9yZGVySXRlbXMsXHJcbiAgICAgICAgICAgIHVzZXI6IHJlcS51c2VyLl9pZCxcclxuICAgICAgICAgICAgc2hpcHBpbmc6IHJlcS5ib2R5LnNoaXBwaW5nLFxyXG4gICAgICAgICAgICBwYXltZW50OiByZXEuYm9keS5wYXltZW50LFxyXG4gICAgICAgICAgICBpdGVtc1ByaWNlOiByZXEuYm9keS5pdGVtc1ByaWNlLFxyXG4gICAgICAgICAgICB0YXhQcmljZTogcmVxLmJvZHkudGF4UHJpY2UsXHJcbiAgICAgICAgICAgIHNoaXBwaW5nUHJpY2U6IHJlcS5ib2R5LnNoaXBwaW5nUHJpY2UsXHJcbiAgICAgICAgICAgIHRvdGFsUHJpY2U6IHJlcS5ib2R5LnRvdGFsUHJpY2VcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBjcmVhdGVkT3JkZXIgPSBhd2FpdCBvcmRlci5zYXZlKCk7XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLnNlbmQoeyBtZXNzYWdlOiAnTmV3IG9yZGVyIENyZWF0ZWQnLCBvcmRlcjogY3JlYXRlZE9yZGVyfSlcclxuICAgIH0pXHJcbik7XHJcbm9yZGVyUm91dGVyLnB1dCgnLzppZC9wYXknLCBpc0F1dGgsIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgaWYgKG9yZGVyKSB7XHJcbiAgICAgICAgb3JkZXIuaXNQYWlkID0gdHJ1ZTtcclxuICAgICAgICBvcmRlci5wYWlkQXQgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIG9yZGVyLnBheW1lbnQucGF5bWVudFJlc3VsdCA9IHtcclxuICAgICAgICAgICAgcGF5ZXJJRDogcmVxLmJvZHkucGF5ZXJJRCxcclxuICAgICAgICAgICAgcGF5bWVudElEOiByZXEuYm9keS5wYXltZW50SUQsXHJcbiAgICAgICAgICAgIG9yZGVySUQ6IHJlcS5ib2R5Lm9yZGVySUQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSBhd2FpdCBvcmRlci5zYXZlKCk7XHJcbiAgICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgcGFpZCcsIG9yZGVyOiB1cGRhdGVkT3JkZXJ9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgbm90IGZvdW5kLid9KTtcclxuICAgIH1cclxufSkpXHJcbmV4cG9ydCBkZWZhdWx0IG9yZGVyUm91dGVyOyJdfQ==","map":{"version":3,"sources":["orderRouter.js"],"names":["orderRouter","express","Router","get","isAuth","req","res","orders","Order","find","user","_id","send","order","findById","params","id","status","message","post","orderItems","body","shipping","payment","itemsPrice","taxPrice","shippingPrice","totalPrice","createdOrder","save","put","isPaid","paidAt","Date","now","paymentResult","payerID","paymentID","orderID","updatedOrder"],"mappings":"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","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\routers\\","sourcesContent":["import express from \"express\";\r\nimport expressAsyncHandler from \"express-async-handler\";\r\nimport Order from \"../models/orderModel\";\r\nimport {isAuth} from '../utils';\r\n\r\nconst orderRouter = express.Router();\r\norderRouter.get('/mine', isAuth, expressAsyncHandler(async (req, res) => {\r\n    const orders = await Order.find({user: req.user._id});\r\n    res.send(orders);\r\n}));\r\norderRouter.get(\r\n    '/:id',\r\n    isAuth,\r\n    expressAsyncHandler(async (req, res) => {\r\n        const order = await Order.findById(req.params.id);\r\n        if (order) {\r\n            res.send(order);\r\n        } else {\r\n            res.status(404).send({ message: 'Order Not found' });\r\n        }\r\n    })\r\n);\r\norderRouter.post(\r\n    '/', \r\n    isAuth, \r\n    expressAsyncHandler(async (req, res) => {\r\n        const order = new Order({\r\n            orderItems: req.body.orderItems,\r\n            user: req.user._id,\r\n            shipping: req.body.shipping,\r\n            payment: req.body.payment,\r\n            itemsPrice: req.body.itemsPrice,\r\n            taxPrice: req.body.taxPrice,\r\n            shippingPrice: req.body.shippingPrice,\r\n            totalPrice: req.body.totalPrice\r\n        });\r\n        const createdOrder = await order.save();\r\n        res.status(201).send({ message: 'New order Created', order: createdOrder})\r\n    })\r\n);\r\norderRouter.put('/:id/pay', isAuth, expressAsyncHandler(async (req, res) => {\r\n    const order = await Order.findById(req.params.id);\r\n    if (order) {\r\n        order.isPaid = true;\r\n        order.paidAt = Date.now();\r\n        order.payment.paymentResult = {\r\n            payerID: req.body.payerID,\r\n            paymentID: req.body.paymentID,\r\n            orderID: req.body.orderID,\r\n        };\r\n        const updatedOrder = await order.save();\r\n        res.send({ message: 'Order paid', order: updatedOrder});\r\n    } else {\r\n        res.status(404).send({ message: 'Order not found.'});\r\n    }\r\n}))\r\nexport default orderRouter;"]}},"mtime":1650140486681},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\models\\\\orderModel.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst orderSchema = new _mongoose.default.Schema({\n  orderItems: [{\n    name: {\n      type: String,\n      required: true\n    },\n    image: {\n      type: String,\n      required: true\n    },\n    price: {\n      type: Number,\n      required: true\n    },\n    qty: {\n      type: Number,\n      required: true\n    },\n    product: {\n      type: _mongoose.default.Schema.Types.ObjectId,\n      ref: 'Product',\n      required: true\n    }\n  }],\n  user: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  shipping: {\n    address: String,\n    city: String,\n    postalCode: String,\n    country: String\n  },\n  payment: {\n    paymentMethod: String,\n    paymentResult: {\n      orderID: String,\n      payerID: String,\n      paymentID: String\n    }\n  },\n  itemsPrice: Number,\n  taxPrice: Number,\n  shippingPrice: Number,\n  totalPrice: Number,\n  paidAt: Date,\n  isPaid: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  isDelivered: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  deliveredAt: Date\n}, {\n  timestamps: true\n});\n\nconst Order = _mongoose.default.model('Order', orderSchema);\n\nvar _default = Order;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyTW9kZWwuanMiXSwibmFtZXMiOlsib3JkZXJTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsIm9yZGVySXRlbXMiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiaW1hZ2UiLCJwcmljZSIsIk51bWJlciIsInF0eSIsInByb2R1Y3QiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwidXNlciIsInNoaXBwaW5nIiwiYWRkcmVzcyIsImNpdHkiLCJwb3N0YWxDb2RlIiwiY291bnRyeSIsInBheW1lbnQiLCJwYXltZW50TWV0aG9kIiwicGF5bWVudFJlc3VsdCIsIm9yZGVySUQiLCJwYXllcklEIiwicGF5bWVudElEIiwiaXRlbXNQcmljZSIsInRheFByaWNlIiwic2hpcHBpbmdQcmljZSIsInRvdGFsUHJpY2UiLCJwYWlkQXQiLCJEYXRlIiwiaXNQYWlkIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJpc0RlbGl2ZXJlZCIsImRlbGl2ZXJlZEF0IiwidGltZXN0YW1wcyIsIk9yZGVyIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLE1BQU1BLFdBQVcsR0FBRyxJQUFJQyxrQkFBU0MsTUFBYixDQUNoQjtBQUNJQyxFQUFBQSxVQUFVLEVBQUUsQ0FDUjtBQUNJQyxJQUFBQSxJQUFJLEVBQUU7QUFBQ0MsTUFBQUEsSUFBSSxFQUFFQyxNQUFQO0FBQWVDLE1BQUFBLFFBQVEsRUFBRTtBQUF6QixLQURWO0FBRUlDLElBQUFBLEtBQUssRUFBRTtBQUFDSCxNQUFBQSxJQUFJLEVBQUVDLE1BQVA7QUFBZUMsTUFBQUEsUUFBUSxFQUFFO0FBQXpCLEtBRlg7QUFHSUUsSUFBQUEsS0FBSyxFQUFFO0FBQUNKLE1BQUFBLElBQUksRUFBRUssTUFBUDtBQUFlSCxNQUFBQSxRQUFRLEVBQUU7QUFBekIsS0FIWDtBQUlJSSxJQUFBQSxHQUFHLEVBQUU7QUFBQ04sTUFBQUEsSUFBSSxFQUFFSyxNQUFQO0FBQWVILE1BQUFBLFFBQVEsRUFBRTtBQUF6QixLQUpUO0FBS0lLLElBQUFBLE9BQU8sRUFBRTtBQUNMUCxNQUFBQSxJQUFJLEVBQUVKLGtCQUFTQyxNQUFULENBQWdCVyxLQUFoQixDQUFzQkMsUUFEdkI7QUFFTEMsTUFBQUEsR0FBRyxFQUFFLFNBRkE7QUFHTFIsTUFBQUEsUUFBUSxFQUFFO0FBSEw7QUFMYixHQURRLENBRGhCO0FBY0lTLEVBQUFBLElBQUksRUFBRTtBQUFDWCxJQUFBQSxJQUFJLEVBQUVKLGtCQUFTQyxNQUFULENBQWdCVyxLQUFoQixDQUFzQkMsUUFBN0I7QUFBdUNDLElBQUFBLEdBQUcsRUFBRSxNQUE1QztBQUFvRFIsSUFBQUEsUUFBUSxFQUFFO0FBQTlELEdBZFY7QUFlSVUsRUFBQUEsUUFBUSxFQUFFO0FBQ05DLElBQUFBLE9BQU8sRUFBRVosTUFESDtBQUVOYSxJQUFBQSxJQUFJLEVBQUViLE1BRkE7QUFHTmMsSUFBQUEsVUFBVSxFQUFFZCxNQUhOO0FBSU5lLElBQUFBLE9BQU8sRUFBRWY7QUFKSCxHQWZkO0FBcUJJZ0IsRUFBQUEsT0FBTyxFQUFFO0FBQ0xDLElBQUFBLGFBQWEsRUFBRWpCLE1BRFY7QUFFTGtCLElBQUFBLGFBQWEsRUFBRTtBQUNYQyxNQUFBQSxPQUFPLEVBQUVuQixNQURFO0FBRVhvQixNQUFBQSxPQUFPLEVBQUVwQixNQUZFO0FBR1hxQixNQUFBQSxTQUFTLEVBQUVyQjtBQUhBO0FBRlYsR0FyQmI7QUE2QklzQixFQUFBQSxVQUFVLEVBQUVsQixNQTdCaEI7QUE4QkltQixFQUFBQSxRQUFRLEVBQUVuQixNQTlCZDtBQStCSW9CLEVBQUFBLGFBQWEsRUFBRXBCLE1BL0JuQjtBQWdDSXFCLEVBQUFBLFVBQVUsRUFBRXJCLE1BaENoQjtBQWlDSXNCLEVBQUFBLE1BQU0sRUFBRUMsSUFqQ1o7QUFrQ0lDLEVBQUFBLE1BQU0sRUFBRTtBQUFDN0IsSUFBQUEsSUFBSSxFQUFFOEIsT0FBUDtBQUFnQjVCLElBQUFBLFFBQVEsRUFBRSxJQUExQjtBQUFnQzZCLElBQUFBLE9BQU8sRUFBRTtBQUF6QyxHQWxDWjtBQW1DSUMsRUFBQUEsV0FBVyxFQUFFO0FBQUNoQyxJQUFBQSxJQUFJLEVBQUU4QixPQUFQO0FBQWdCNUIsSUFBQUEsUUFBUSxFQUFFLElBQTFCO0FBQWdDNkIsSUFBQUEsT0FBTyxFQUFFO0FBQXpDLEdBbkNqQjtBQW9DSUUsRUFBQUEsV0FBVyxFQUFFTDtBQXBDakIsQ0FEZ0IsRUF1Q2hCO0FBQ0lNLEVBQUFBLFVBQVUsRUFBRTtBQURoQixDQXZDZ0IsQ0FBcEI7O0FBMkNBLE1BQU1DLEtBQUssR0FBR3ZDLGtCQUFTd0MsS0FBVCxDQUFlLE9BQWYsRUFBd0J6QyxXQUF4QixDQUFkOztlQUNld0MsSyIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc2FtYXpvbmFcXGJhY2tlbmRcXG1vZGVsc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3Qgb3JkZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxyXG4gICAge1xyXG4gICAgICAgIG9yZGVySXRlbXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZToge3R5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgICAgICAgICAgICAgaW1hZ2U6IHt0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgICAgICAgICAgICAgIHByaWNlOiB7dHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICAgICAgICAgICAgICBxdHk6IHt0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnUHJvZHVjdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgdXNlcjoge3R5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnVXNlcicsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgICAgICBzaGlwcGluZzoge1xyXG4gICAgICAgICAgICBhZGRyZXNzOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIGNpdHk6IFN0cmluZyxcclxuICAgICAgICAgICAgcG9zdGFsQ29kZTogU3RyaW5nLFxyXG4gICAgICAgICAgICBjb3VudHJ5OiBTdHJpbmcsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYXltZW50OiB7XHJcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IFN0cmluZyxcclxuICAgICAgICAgICAgcGF5bWVudFJlc3VsdDoge1xyXG4gICAgICAgICAgICAgICAgb3JkZXJJRDogU3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgcGF5ZXJJRDogU3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudElEOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGl0ZW1zUHJpY2U6IE51bWJlcixcclxuICAgICAgICB0YXhQcmljZTogTnVtYmVyLFxyXG4gICAgICAgIHNoaXBwaW5nUHJpY2U6IE51bWJlcixcclxuICAgICAgICB0b3RhbFByaWNlOiBOdW1iZXIsXHJcbiAgICAgICAgcGFpZEF0OiBEYXRlLFxyXG4gICAgICAgIGlzUGFpZDoge3R5cGU6IEJvb2xlYW4sIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiBmYWxzZX0sXHJcbiAgICAgICAgaXNEZWxpdmVyZWQ6IHt0eXBlOiBCb29sZWFuLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogZmFsc2V9LFxyXG4gICAgICAgIGRlbGl2ZXJlZEF0OiBEYXRlLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0aW1lc3RhbXBzOiB0cnVlLFxyXG4gICAgfVxyXG4pO1xyXG5jb25zdCBPcmRlciA9IG1vbmdvb3NlLm1vZGVsKCdPcmRlcicsIG9yZGVyU2NoZW1hKTtcclxuZXhwb3J0IGRlZmF1bHQgT3JkZXI7Il19","map":{"version":3,"sources":["orderModel.js"],"names":["orderSchema","mongoose","Schema","orderItems","name","type","String","required","image","price","Number","qty","product","Types","ObjectId","ref","user","shipping","address","city","postalCode","country","payment","paymentMethod","paymentResult","orderID","payerID","paymentID","itemsPrice","taxPrice","shippingPrice","totalPrice","paidAt","Date","isPaid","Boolean","default","isDelivered","deliveredAt","timestamps","Order","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,WAAW,GAAG,IAAIC,kBAASC,MAAb,CAChB;AACIC,EAAAA,UAAU,EAAE,CACR;AACIC,IAAAA,IAAI,EAAE;AAACC,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,QAAQ,EAAE;AAAzB,KADV;AAEIC,IAAAA,KAAK,EAAE;AAACH,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,QAAQ,EAAE;AAAzB,KAFX;AAGIE,IAAAA,KAAK,EAAE;AAACJ,MAAAA,IAAI,EAAEK,MAAP;AAAeH,MAAAA,QAAQ,EAAE;AAAzB,KAHX;AAIII,IAAAA,GAAG,EAAE;AAACN,MAAAA,IAAI,EAAEK,MAAP;AAAeH,MAAAA,QAAQ,EAAE;AAAzB,KAJT;AAKIK,IAAAA,OAAO,EAAE;AACLP,MAAAA,IAAI,EAAEJ,kBAASC,MAAT,CAAgBW,KAAhB,CAAsBC,QADvB;AAELC,MAAAA,GAAG,EAAE,SAFA;AAGLR,MAAAA,QAAQ,EAAE;AAHL;AALb,GADQ,CADhB;AAcIS,EAAAA,IAAI,EAAE;AAACX,IAAAA,IAAI,EAAEJ,kBAASC,MAAT,CAAgBW,KAAhB,CAAsBC,QAA7B;AAAuCC,IAAAA,GAAG,EAAE,MAA5C;AAAoDR,IAAAA,QAAQ,EAAE;AAA9D,GAdV;AAeIU,EAAAA,QAAQ,EAAE;AACNC,IAAAA,OAAO,EAAEZ,MADH;AAENa,IAAAA,IAAI,EAAEb,MAFA;AAGNc,IAAAA,UAAU,EAAEd,MAHN;AAINe,IAAAA,OAAO,EAAEf;AAJH,GAfd;AAqBIgB,EAAAA,OAAO,EAAE;AACLC,IAAAA,aAAa,EAAEjB,MADV;AAELkB,IAAAA,aAAa,EAAE;AACXC,MAAAA,OAAO,EAAEnB,MADE;AAEXoB,MAAAA,OAAO,EAAEpB,MAFE;AAGXqB,MAAAA,SAAS,EAAErB;AAHA;AAFV,GArBb;AA6BIsB,EAAAA,UAAU,EAAElB,MA7BhB;AA8BImB,EAAAA,QAAQ,EAAEnB,MA9Bd;AA+BIoB,EAAAA,aAAa,EAAEpB,MA/BnB;AAgCIqB,EAAAA,UAAU,EAAErB,MAhChB;AAiCIsB,EAAAA,MAAM,EAAEC,IAjCZ;AAkCIC,EAAAA,MAAM,EAAE;AAAC7B,IAAAA,IAAI,EAAE8B,OAAP;AAAgB5B,IAAAA,QAAQ,EAAE,IAA1B;AAAgC6B,IAAAA,OAAO,EAAE;AAAzC,GAlCZ;AAmCIC,EAAAA,WAAW,EAAE;AAAChC,IAAAA,IAAI,EAAE8B,OAAP;AAAgB5B,IAAAA,QAAQ,EAAE,IAA1B;AAAgC6B,IAAAA,OAAO,EAAE;AAAzC,GAnCjB;AAoCIE,EAAAA,WAAW,EAAEL;AApCjB,CADgB,EAuChB;AACIM,EAAAA,UAAU,EAAE;AADhB,CAvCgB,CAApB;;AA2CA,MAAMC,KAAK,GAAGvC,kBAASwC,KAAT,CAAe,OAAf,EAAwBzC,WAAxB,CAAd;;eACewC,K","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\models\\","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst orderSchema = new mongoose.Schema(\r\n    {\r\n        orderItems: [\r\n            {\r\n                name: {type: String, required: true},\r\n                image: {type: String, required: true},\r\n                price: {type: Number, required: true},\r\n                qty: {type: Number, required: true},\r\n                product: {\r\n                    type: mongoose.Schema.Types.ObjectId,\r\n                    ref: 'Product',\r\n                    required: true,\r\n                },\r\n            },\r\n        ],\r\n        user: {type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true},\r\n        shipping: {\r\n            address: String,\r\n            city: String,\r\n            postalCode: String,\r\n            country: String,\r\n        },\r\n        payment: {\r\n            paymentMethod: String,\r\n            paymentResult: {\r\n                orderID: String,\r\n                payerID: String,\r\n                paymentID: String,\r\n            }\r\n        },\r\n        itemsPrice: Number,\r\n        taxPrice: Number,\r\n        shippingPrice: Number,\r\n        totalPrice: Number,\r\n        paidAt: Date,\r\n        isPaid: {type: Boolean, required: true, default: false},\r\n        isDelivered: {type: Boolean, required: true, default: false},\r\n        deliveredAt: Date,\r\n    },\r\n    {\r\n        timestamps: true,\r\n    }\r\n);\r\nconst Order = mongoose.model('Order', orderSchema);\r\nexport default Order;"]}},"mtime":1650139224451},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\routers\\\\productRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\n\nvar _utils = require(\"../utils\");\n\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst productRouter = _express.default.Router();\n\nproductRouter.get('/', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const products = await _productModel.default.find({});\n  res.send(products);\n}));\nproductRouter.get('/:id', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  res.send(product);\n}));\nproductRouter.post('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = new _productModel.default({\n    name: 'sample product',\n    description: 'sample desc',\n    category: 'sample category',\n    brand: 'sample brand',\n    image: '/images/product-1.jpg'\n  });\n  const createdProduct = await product.save();\n\n  if (createdProduct) {\n    res.status(201).send({\n      message: 'Product created',\n      product: createdProduct\n    });\n  } else {\n    res.status(500).send({\n      message: 'Error in creating product'\n    });\n  }\n}));\nvar _default = productRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3RSb3V0ZXIuanMiXSwibmFtZXMiOlsicHJvZHVjdFJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJwcm9kdWN0cyIsIlByb2R1Y3QiLCJmaW5kIiwic2VuZCIsInByb2R1Y3QiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwicG9zdCIsImlzQXV0aCIsImlzQWRtaW4iLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsImJyYW5kIiwiaW1hZ2UiLCJjcmVhdGVkUHJvZHVjdCIsInNhdmUiLCJzdGF0dXMiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxhQUFhLEdBQUdDLGlCQUFRQyxNQUFSLEVBQXRCOztBQUNBRixhQUFhLENBQUNHLEdBQWQsQ0FBa0IsR0FBbEIsRUFBdUIsa0NBQW9CLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUMzRCxRQUFNQyxRQUFRLEdBQUcsTUFBTUMsc0JBQVFDLElBQVIsQ0FBYSxFQUFiLENBQXZCO0FBQ0FILEVBQUFBLEdBQUcsQ0FBQ0ksSUFBSixDQUFTSCxRQUFUO0FBQ0gsQ0FIc0IsQ0FBdkI7QUFJQU4sYUFBYSxDQUFDRyxHQUFkLENBQWtCLE1BQWxCLEVBQTBCLGtDQUFvQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDOUQsUUFBTUssT0FBTyxHQUFHLE1BQU1ILHNCQUFRSSxRQUFSLENBQWlCUCxHQUFHLENBQUNRLE1BQUosQ0FBV0MsRUFBNUIsQ0FBdEI7QUFDQVIsRUFBQUEsR0FBRyxDQUFDSSxJQUFKLENBQVNDLE9BQVQ7QUFDSCxDQUh5QixDQUExQjtBQUlBVixhQUFhLENBQUNjLElBQWQsQ0FDSSxHQURKLEVBRUlDLGFBRkosRUFHSUMsY0FISixFQUlJLGtDQUFvQixPQUFPWixHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDcEMsUUFBTUssT0FBTyxHQUFHLElBQUlILHFCQUFKLENBQVk7QUFDeEJVLElBQUFBLElBQUksRUFBRSxnQkFEa0I7QUFFeEJDLElBQUFBLFdBQVcsRUFBRSxhQUZXO0FBR3hCQyxJQUFBQSxRQUFRLEVBQUUsaUJBSGM7QUFJeEJDLElBQUFBLEtBQUssRUFBRSxjQUppQjtBQUt4QkMsSUFBQUEsS0FBSyxFQUFFO0FBTGlCLEdBQVosQ0FBaEI7QUFPQSxRQUFNQyxjQUFjLEdBQUcsTUFBTVosT0FBTyxDQUFDYSxJQUFSLEVBQTdCOztBQUNBLE1BQUlELGNBQUosRUFBbUI7QUFDZmpCLElBQUFBLEdBQUcsQ0FBQ21CLE1BQUosQ0FBVyxHQUFYLEVBQWdCZixJQUFoQixDQUFxQjtBQUFFZ0IsTUFBQUEsT0FBTyxFQUFFLGlCQUFYO0FBQThCZixNQUFBQSxPQUFPLEVBQUVZO0FBQXZDLEtBQXJCO0FBQ0gsR0FGRCxNQUVPO0FBQ0hqQixJQUFBQSxHQUFHLENBQUNtQixNQUFKLENBQVcsR0FBWCxFQUFnQmYsSUFBaEIsQ0FBcUI7QUFBRWdCLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQXJCO0FBQ0g7QUFDSixDQWRELENBSko7ZUFvQmV6QixhIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcZ3VpbGhlcm1lXFxEb3dubG9hZHNcXGpzYW1hem9uYVxcYmFja2VuZFxccm91dGVyc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSBcImV4cHJlc3MtYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBpc0F1dGgsIGlzQWRtaW4gfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCBQcm9kdWN0IGZyb20gXCIuLi9tb2RlbHMvcHJvZHVjdE1vZGVsXCI7XHJcblxyXG5jb25zdCBwcm9kdWN0Um91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxucHJvZHVjdFJvdXRlci5nZXQoJy8nLCBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBQcm9kdWN0LmZpbmQoe30pO1xyXG4gICAgcmVzLnNlbmQocHJvZHVjdHMpO1xyXG59KSk7XHJcbnByb2R1Y3RSb3V0ZXIuZ2V0KCcvOmlkJywgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgcmVzLnNlbmQocHJvZHVjdCk7XHJcbn0pKTtcclxucHJvZHVjdFJvdXRlci5wb3N0KFxyXG4gICAgJy8nLFxyXG4gICAgaXNBdXRoLFxyXG4gICAgaXNBZG1pbixcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IG5ldyBQcm9kdWN0KHtcclxuICAgICAgICAgICAgbmFtZTogJ3NhbXBsZSBwcm9kdWN0JyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdzYW1wbGUgZGVzYycsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnc2FtcGxlIGNhdGVnb3J5JyxcclxuICAgICAgICAgICAgYnJhbmQ6ICdzYW1wbGUgYnJhbmQnLFxyXG4gICAgICAgICAgICBpbWFnZTogJy9pbWFnZXMvcHJvZHVjdC0xLmpwZycsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZFByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0LnNhdmUoKTtcclxuICAgICAgICBpZiAoY3JlYXRlZFByb2R1Y3Qpe1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IG1lc3NhZ2U6ICdQcm9kdWN0IGNyZWF0ZWQnLCBwcm9kdWN0OiBjcmVhdGVkUHJvZHVjdH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogJ0Vycm9yIGluIGNyZWF0aW5nIHByb2R1Y3QnfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuKTtcclxuZXhwb3J0IGRlZmF1bHQgcHJvZHVjdFJvdXRlcjsiXX0=","map":{"version":3,"sources":["productRouter.js"],"names":["productRouter","express","Router","get","req","res","products","Product","find","send","product","findById","params","id","post","isAuth","isAdmin","name","description","category","brand","image","createdProduct","save","status","message"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,aAAa,GAAGC,iBAAQC,MAAR,EAAtB;;AACAF,aAAa,CAACG,GAAd,CAAkB,GAAlB,EAAuB,kCAAoB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC3D,QAAMC,QAAQ,GAAG,MAAMC,sBAAQC,IAAR,CAAa,EAAb,CAAvB;AACAH,EAAAA,GAAG,CAACI,IAAJ,CAASH,QAAT;AACH,CAHsB,CAAvB;AAIAN,aAAa,CAACG,GAAd,CAAkB,MAAlB,EAA0B,kCAAoB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC9D,QAAMK,OAAO,GAAG,MAAMH,sBAAQI,QAAR,CAAiBP,GAAG,CAACQ,MAAJ,CAAWC,EAA5B,CAAtB;AACAR,EAAAA,GAAG,CAACI,IAAJ,CAASC,OAAT;AACH,CAHyB,CAA1B;AAIAV,aAAa,CAACc,IAAd,CACI,GADJ,EAEIC,aAFJ,EAGIC,cAHJ,EAII,kCAAoB,OAAOZ,GAAP,EAAYC,GAAZ,KAAoB;AACpC,QAAMK,OAAO,GAAG,IAAIH,qBAAJ,CAAY;AACxBU,IAAAA,IAAI,EAAE,gBADkB;AAExBC,IAAAA,WAAW,EAAE,aAFW;AAGxBC,IAAAA,QAAQ,EAAE,iBAHc;AAIxBC,IAAAA,KAAK,EAAE,cAJiB;AAKxBC,IAAAA,KAAK,EAAE;AALiB,GAAZ,CAAhB;AAOA,QAAMC,cAAc,GAAG,MAAMZ,OAAO,CAACa,IAAR,EAA7B;;AACA,MAAID,cAAJ,EAAmB;AACfjB,IAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBf,IAAhB,CAAqB;AAAEgB,MAAAA,OAAO,EAAE,iBAAX;AAA8Bf,MAAAA,OAAO,EAAEY;AAAvC,KAArB;AACH,GAFD,MAEO;AACHjB,IAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBf,IAAhB,CAAqB;AAAEgB,MAAAA,OAAO,EAAE;AAAX,KAArB;AACH;AACJ,CAdD,CAJJ;eAoBezB,a","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\routers\\","sourcesContent":["import express from \"express\";\r\nimport expressAsyncHandler from \"express-async-handler\";\r\nimport { isAuth, isAdmin } from '../utils';\r\nimport Product from \"../models/productModel\";\r\n\r\nconst productRouter = express.Router();\r\nproductRouter.get('/', expressAsyncHandler(async (req, res) => {\r\n    const products = await Product.find({});\r\n    res.send(products);\r\n}));\r\nproductRouter.get('/:id', expressAsyncHandler(async (req, res) => {\r\n    const product = await Product.findById(req.params.id);\r\n    res.send(product);\r\n}));\r\nproductRouter.post(\r\n    '/',\r\n    isAuth,\r\n    isAdmin,\r\n    expressAsyncHandler(async (req, res) => {\r\n        const product = new Product({\r\n            name: 'sample product',\r\n            description: 'sample desc',\r\n            category: 'sample category',\r\n            brand: 'sample brand',\r\n            image: '/images/product-1.jpg',\r\n        });\r\n        const createdProduct = await product.save();\r\n        if (createdProduct){\r\n            res.status(201).send({ message: 'Product created', product: createdProduct});\r\n        } else {\r\n            res.status(500).send({ message: 'Error in creating product'});\r\n        }\r\n    })\r\n);\r\nexport default productRouter;"]}},"mtime":1651316156393},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\\\\backend\\\\models\\\\productModel.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsamazona\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst productSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  description: {\n    type: String,\n    required: true\n  },\n  category: {\n    type: String,\n    required: true\n  },\n  brand: {\n    type: String,\n    required: true\n  },\n  image: {\n    type: String,\n    required: true\n  },\n  price: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  countInStock: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  rating: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  numReviews: {\n    type: String,\n    default: 0,\n    required: true\n  }\n}, {\n  timestamps: true\n});\n\nconst Product = _mongoose.default.model('Product', productSchema);\n\nvar _default = Product;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3RNb2RlbC5qcyJdLCJuYW1lcyI6WyJwcm9kdWN0U2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsImJyYW5kIiwiaW1hZ2UiLCJwcmljZSIsIk51bWJlciIsImRlZmF1bHQiLCJjb3VudEluU3RvY2siLCJyYXRpbmciLCJudW1SZXZpZXdzIiwidGltZXN0YW1wcyIsIlByb2R1Y3QiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBRUEsTUFBTUEsYUFBYSxHQUFHLElBQUlDLGtCQUFTQyxNQUFiLENBQ2xCO0FBQ0FDLEVBQUFBLElBQUksRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUROO0FBRUFDLEVBQUFBLFdBQVcsRUFBRTtBQUFFSCxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUZiO0FBR0FFLEVBQUFBLFFBQVEsRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUhWO0FBSUFHLEVBQUFBLEtBQUssRUFBRTtBQUFFTCxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUpQO0FBS0FJLEVBQUFBLEtBQUssRUFBRTtBQUFFTixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUxQO0FBTUFLLEVBQUFBLEtBQUssRUFBRTtBQUFFUCxJQUFBQSxJQUFJLEVBQUVRLE1BQVI7QUFBZ0JDLElBQUFBLE9BQU8sRUFBRSxHQUF6QjtBQUE4QlAsSUFBQUEsUUFBUSxFQUFFO0FBQXhDLEdBTlA7QUFPQVEsRUFBQUEsWUFBWSxFQUFFO0FBQUVWLElBQUFBLElBQUksRUFBRVEsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFLENBQXpCO0FBQTRCUCxJQUFBQSxRQUFRLEVBQUU7QUFBdEMsR0FQZDtBQVFBUyxFQUFBQSxNQUFNLEVBQUU7QUFBRVgsSUFBQUEsSUFBSSxFQUFFUSxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUUsR0FBekI7QUFBK0JQLElBQUFBLFFBQVEsRUFBRTtBQUF6QyxHQVJSO0FBU0FVLEVBQUFBLFVBQVUsRUFBRTtBQUFFWixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JRLElBQUFBLE9BQU8sRUFBRSxDQUF6QjtBQUE0QlAsSUFBQUEsUUFBUSxFQUFFO0FBQXRDO0FBVFosQ0FEa0IsRUFZbEI7QUFBQ1csRUFBQUEsVUFBVSxFQUFFO0FBQWIsQ0Faa0IsQ0FBdEI7O0FBY0EsTUFBTUMsT0FBTyxHQUFHakIsa0JBQVNrQixLQUFULENBQWUsU0FBZixFQUEwQm5CLGFBQTFCLENBQWhCOztlQUNla0IsTyIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc2FtYXpvbmFcXGJhY2tlbmRcXG1vZGVsc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3QgcHJvZHVjdFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXHJcbiAgICB7XHJcbiAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgZGVzY3JpcHRpb246IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICBjYXRlZ29yeTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIGJyYW5kOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgaW1hZ2U6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICBwcmljZTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAuMCwgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgY291bnRJblN0b2NrOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCwgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgcmF0aW5nOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMC4wLCAgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgbnVtUmV2aWV3czogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IDAsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIH0sXHJcbiAgICB7dGltZXN0YW1wczogdHJ1ZX1cclxuKTtcclxuY29uc3QgUHJvZHVjdCA9IG1vbmdvb3NlLm1vZGVsKCdQcm9kdWN0JywgcHJvZHVjdFNjaGVtYSk7XHJcbmV4cG9ydCBkZWZhdWx0IFByb2R1Y3Q7Il19","map":{"version":3,"sources":["productModel.js"],"names":["productSchema","mongoose","Schema","name","type","String","required","description","category","brand","image","price","Number","default","countInStock","rating","numReviews","timestamps","Product","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,aAAa,GAAG,IAAIC,kBAASC,MAAb,CAClB;AACAC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GADN;AAEAC,EAAAA,WAAW,EAAE;AAAEH,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAFb;AAGAE,EAAAA,QAAQ,EAAE;AAAEJ,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAHV;AAIAG,EAAAA,KAAK,EAAE;AAAEL,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAJP;AAKAI,EAAAA,KAAK,EAAE;AAAEN,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GALP;AAMAK,EAAAA,KAAK,EAAE;AAAEP,IAAAA,IAAI,EAAEQ,MAAR;AAAgBC,IAAAA,OAAO,EAAE,GAAzB;AAA8BP,IAAAA,QAAQ,EAAE;AAAxC,GANP;AAOAQ,EAAAA,YAAY,EAAE;AAAEV,IAAAA,IAAI,EAAEQ,MAAR;AAAgBC,IAAAA,OAAO,EAAE,CAAzB;AAA4BP,IAAAA,QAAQ,EAAE;AAAtC,GAPd;AAQAS,EAAAA,MAAM,EAAE;AAAEX,IAAAA,IAAI,EAAEQ,MAAR;AAAgBC,IAAAA,OAAO,EAAE,GAAzB;AAA+BP,IAAAA,QAAQ,EAAE;AAAzC,GARR;AASAU,EAAAA,UAAU,EAAE;AAAEZ,IAAAA,IAAI,EAAEC,MAAR;AAAgBQ,IAAAA,OAAO,EAAE,CAAzB;AAA4BP,IAAAA,QAAQ,EAAE;AAAtC;AATZ,CADkB,EAYlB;AAACW,EAAAA,UAAU,EAAE;AAAb,CAZkB,CAAtB;;AAcA,MAAMC,OAAO,GAAGjB,kBAASkB,KAAT,CAAe,SAAf,EAA0BnB,aAA1B,CAAhB;;eACekB,O","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsamazona\\backend\\models\\","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst productSchema = new mongoose.Schema(\r\n    {\r\n    name: { type: String, required: true},\r\n    description: { type: String, required: true},\r\n    category: { type: String, required: true},\r\n    brand: { type: String, required: true},\r\n    image: { type: String, required: true},\r\n    price: { type: Number, default: 0.0, required: true},\r\n    countInStock: { type: Number, default: 0, required: true},\r\n    rating: { type: Number, default: 0.0,  required: true},\r\n    numReviews: { type: String, default: 0, required: true},\r\n    },\r\n    {timestamps: true}\r\n);\r\nconst Product = mongoose.model('Product', productSchema);\r\nexport default Product;"]}},"mtime":1650575177281},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\server.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _userRouter = _interopRequireDefault(require(\"./routers/userRouter\"));\n\nvar _orderRouter = _interopRequireDefault(require(\"./routers/orderRouter\"));\n\nvar _productRouter = _interopRequireDefault(require(\"./routers/productRouter\"));\n\nvar _uploadRouter = _interopRequireDefault(require(\"./routers/uploadRouter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable no-underscore-dangle */\n\n/* eslint-disable linebreak-style */\n\n/* eslint-disable no-console */\n_dotenv.default.config();\n\n_mongoose.default.connect(process.env.MONGODB_URL).then(() => {\n  console.log(\"Connected to mongodb.\");\n}).catch(error => {\n  console.log(error.reason);\n});\n\nconst app = (0, _express.default)();\napp.use((0, _cors.default)());\napp.use(_bodyParser.default.json());\napp.use('/api/uploads', _uploadRouter.default);\napp.use('/api/users', _userRouter.default);\napp.use('/api/products', _productRouter.default);\napp.use('/api/orders', _orderRouter.default);\napp.get('/api/paypal/clientID', (req, res) => {\n  res.send({\n    clientId: process.env.PAYPAL_CLIENT_ID\n  });\n});\napp.use('/uploads', _express.default.static(_path.default.join(__dirname, '/../uploads')));\napp.use(_express.default.static(_path.default.join(__dirname, '/../frontend')));\napp.get('*', (req, res) => {\n  res.send(_path.default.join(__dirname, '/../frontend/index.html'));\n}); // eslint-disable-next-line no-unused-vars\n\napp.use((err, req, res, next) => {\n  const status = err.name && err.name === 'ValidationError' ? 400 : 500;\n  res.status(status).send({\n    message: err.message\n  });\n});\nconst PORT = process.env.PORT || 5000;\napp.listen(PORT, () => {\n  console.log(\"serve at http://localhost:5000\");\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJtb25nb29zZSIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkwiLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyb3IiLCJyZWFzb24iLCJhcHAiLCJ1c2UiLCJib2R5UGFyc2VyIiwianNvbiIsInVwbG9hZFJvdXRlciIsInVzZXJSb3V0ZXIiLCJwcm9kdWN0Um91dGVyIiwib3JkZXJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJzZW5kIiwiY2xpZW50SWQiLCJQQVlQQUxfQ0xJRU5UX0lEIiwiZXhwcmVzcyIsInN0YXRpYyIsInBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwiZXJyIiwibmV4dCIsInN0YXR1cyIsIm5hbWUiLCJtZXNzYWdlIiwiUE9SVCIsImxpc3RlbiJdLCJtYXBwaW5ncyI6Ijs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQVpBOztBQUNBOztBQUNBO0FBWUFBLGdCQUFPQyxNQUFQOztBQUVBQyxrQkFBU0MsT0FBVCxDQUFpQkMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFdBQTdCLEVBQ0NDLElBREQsQ0FDTSxNQUFNO0FBQ1ZDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHVCQUFaO0FBQ0QsQ0FIRCxFQUlDQyxLQUpELENBSVFDLEtBQUQsSUFBVztBQUNoQkgsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlFLEtBQUssQ0FBQ0MsTUFBbEI7QUFDRCxDQU5EOztBQVFBLE1BQU1DLEdBQUcsR0FBRyx1QkFBWjtBQUNBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxvQkFBUjtBQUNBRCxHQUFHLENBQUNDLEdBQUosQ0FBUUMsb0JBQVdDLElBQVgsRUFBUjtBQUNBSCxHQUFHLENBQUNDLEdBQUosQ0FBUSxjQUFSLEVBQXdCRyxxQkFBeEI7QUFDQUosR0FBRyxDQUFDQyxHQUFKLENBQVEsWUFBUixFQUFzQkksbUJBQXRCO0FBQ0FMLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLGVBQVIsRUFBeUJLLHNCQUF6QjtBQUNBTixHQUFHLENBQUNDLEdBQUosQ0FBUSxhQUFSLEVBQXVCTSxvQkFBdkI7QUFDQVAsR0FBRyxDQUFDUSxHQUFKLENBQVEsc0JBQVIsRUFBZ0MsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDNUNBLEVBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTO0FBQUNDLElBQUFBLFFBQVEsRUFBRXJCLE9BQU8sQ0FBQ0MsR0FBUixDQUFZcUI7QUFBdkIsR0FBVDtBQUNELENBRkQ7QUFHQWIsR0FBRyxDQUFDQyxHQUFKLENBQVEsVUFBUixFQUFvQmEsaUJBQVFDLE1BQVIsQ0FBZUMsY0FBS0MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLGFBQXJCLENBQWYsQ0FBcEI7QUFDQWxCLEdBQUcsQ0FBQ0MsR0FBSixDQUFRYSxpQkFBUUMsTUFBUixDQUFlQyxjQUFLQyxJQUFMLENBQVVDLFNBQVYsRUFBcUIsY0FBckIsQ0FBZixDQUFSO0FBQ0FsQixHQUFHLENBQUNRLEdBQUosQ0FBUSxHQUFSLEVBQWEsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDekJBLEVBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTSyxjQUFLQyxJQUFMLENBQVVDLFNBQVYsRUFBcUIseUJBQXJCLENBQVQ7QUFDRCxDQUZELEUsQ0FHQTs7QUFDQWxCLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLENBQUNrQixHQUFELEVBQU1WLEdBQU4sRUFBV0MsR0FBWCxFQUFnQlUsSUFBaEIsS0FBeUI7QUFDL0IsUUFBTUMsTUFBTSxHQUFHRixHQUFHLENBQUNHLElBQUosSUFBWUgsR0FBRyxDQUFDRyxJQUFKLEtBQWEsaUJBQXpCLEdBQTZDLEdBQTdDLEdBQWtELEdBQWpFO0FBQ0FaLEVBQUFBLEdBQUcsQ0FBQ1csTUFBSixDQUFXQSxNQUFYLEVBQW1CVixJQUFuQixDQUF3QjtBQUFFWSxJQUFBQSxPQUFPLEVBQUVKLEdBQUcsQ0FBQ0k7QUFBZixHQUF4QjtBQUNELENBSEQ7QUFLQSxNQUFNQyxJQUFJLEdBQUdqQyxPQUFPLENBQUNDLEdBQVIsQ0FBWWdDLElBQVosSUFBb0IsSUFBakM7QUFFQXhCLEdBQUcsQ0FBQ3lCLE1BQUosQ0FBV0QsSUFBWCxFQUFpQixNQUFNO0FBQ3JCN0IsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksZ0NBQVo7QUFDRCxDQUZEIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcZ3VpbGhlcm1lXFxEb3dubG9hZHNcXGpzTG9qaW5oYVxcYmFja2VuZFxcIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbGluZWJyZWFrLXN0eWxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cclxuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XHJcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xyXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5pbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XHJcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcbmltcG9ydCB1c2VyUm91dGVyIGZyb20gJy4vcm91dGVycy91c2VyUm91dGVyJztcclxuaW1wb3J0IG9yZGVyUm91dGVyIGZyb20gJy4vcm91dGVycy9vcmRlclJvdXRlcic7XHJcbmltcG9ydCBwcm9kdWN0Um91dGVyIGZyb20gJy4vcm91dGVycy9wcm9kdWN0Um91dGVyJztcclxuaW1wb3J0IHVwbG9hZFJvdXRlciBmcm9tICcuL3JvdXRlcnMvdXBsb2FkUm91dGVyJztcclxuXHJcbmRvdGVudi5jb25maWcoKVxyXG5cclxubW9uZ29vc2UuY29ubmVjdChwcm9jZXNzLmVudi5NT05HT0RCX1VSTClcclxuLnRoZW4oKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKFwiQ29ubmVjdGVkIHRvIG1vbmdvZGIuXCIpXHJcbn0pXHJcbi5jYXRjaCgoZXJyb3IpID0+IHtcclxuICBjb25zb2xlLmxvZyhlcnJvci5yZWFzb24pO1xyXG59KTtcclxuXHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuYXBwLnVzZShjb3JzKCkpO1xyXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcclxuYXBwLnVzZSgnL2FwaS91cGxvYWRzJywgdXBsb2FkUm91dGVyKVxyXG5hcHAudXNlKCcvYXBpL3VzZXJzJywgdXNlclJvdXRlcik7XHJcbmFwcC51c2UoJy9hcGkvcHJvZHVjdHMnLCBwcm9kdWN0Um91dGVyKTtcclxuYXBwLnVzZSgnL2FwaS9vcmRlcnMnLCBvcmRlclJvdXRlcik7XHJcbmFwcC5nZXQoJy9hcGkvcGF5cGFsL2NsaWVudElEJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgcmVzLnNlbmQoe2NsaWVudElkOiBwcm9jZXNzLmVudi5QQVlQQUxfQ0xJRU5UX0lEfSlcclxufSk7XHJcbmFwcC51c2UoJy91cGxvYWRzJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy8uLi91cGxvYWRzJykpKVxyXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICcvLi4vZnJvbnRlbmQnKSkpO1xyXG5hcHAuZ2V0KCcqJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgcmVzLnNlbmQocGF0aC5qb2luKF9fZGlybmFtZSwgJy8uLi9mcm9udGVuZC9pbmRleC5odG1sJykpXHJcbn0pO1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcclxuYXBwLnVzZSgoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIGNvbnN0IHN0YXR1cyA9IGVyci5uYW1lICYmIGVyci5uYW1lID09PSAnVmFsaWRhdGlvbkVycm9yJyA/IDQwMDogNTAwO1xyXG4gIHJlcy5zdGF0dXMoc3RhdHVzKS5zZW5kKHsgbWVzc2FnZTogZXJyLm1lc3NhZ2V9KTtcclxufSk7XHJcblxyXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA1MDAwO1xyXG5cclxuYXBwLmxpc3RlbihQT1JULCAoKSA9PiB7XHJcbiAgY29uc29sZS5sb2coXCJzZXJ2ZSBhdCBodHRwOi8vbG9jYWxob3N0OjUwMDBcIik7XHJcbn0pO1xyXG4iXX0=","map":{"version":3,"sources":["server.js"],"names":["dotenv","config","mongoose","connect","process","env","MONGODB_URL","then","console","log","catch","error","reason","app","use","bodyParser","json","uploadRouter","userRouter","productRouter","orderRouter","get","req","res","send","clientId","PAYPAL_CLIENT_ID","express","static","path","join","__dirname","err","next","status","name","message","PORT","listen"],"mappings":";;AAGA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAZA;;AACA;;AACA;AAYAA,gBAAOC,MAAP;;AAEAC,kBAASC,OAAT,CAAiBC,OAAO,CAACC,GAAR,CAAYC,WAA7B,EACCC,IADD,CACM,MAAM;AACVC,EAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACD,CAHD,EAICC,KAJD,CAIQC,KAAD,IAAW;AAChBH,EAAAA,OAAO,CAACC,GAAR,CAAYE,KAAK,CAACC,MAAlB;AACD,CAND;;AAQA,MAAMC,GAAG,GAAG,uBAAZ;AACAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR;AACAD,GAAG,CAACC,GAAJ,CAAQC,oBAAWC,IAAX,EAAR;AACAH,GAAG,CAACC,GAAJ,CAAQ,cAAR,EAAwBG,qBAAxB;AACAJ,GAAG,CAACC,GAAJ,CAAQ,YAAR,EAAsBI,mBAAtB;AACAL,GAAG,CAACC,GAAJ,CAAQ,eAAR,EAAyBK,sBAAzB;AACAN,GAAG,CAACC,GAAJ,CAAQ,aAAR,EAAuBM,oBAAvB;AACAP,GAAG,CAACQ,GAAJ,CAAQ,sBAAR,EAAgC,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC5CA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AAACC,IAAAA,QAAQ,EAAErB,OAAO,CAACC,GAAR,CAAYqB;AAAvB,GAAT;AACD,CAFD;AAGAb,GAAG,CAACC,GAAJ,CAAQ,UAAR,EAAoBa,iBAAQC,MAAR,CAAeC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,aAArB,CAAf,CAApB;AACAlB,GAAG,CAACC,GAAJ,CAAQa,iBAAQC,MAAR,CAAeC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,cAArB,CAAf,CAAR;AACAlB,GAAG,CAACQ,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,IAAJ,CAASK,cAAKC,IAAL,CAAUC,SAAV,EAAqB,yBAArB,CAAT;AACD,CAFD,E,CAGA;;AACAlB,GAAG,CAACC,GAAJ,CAAQ,CAACkB,GAAD,EAAMV,GAAN,EAAWC,GAAX,EAAgBU,IAAhB,KAAyB;AAC/B,QAAMC,MAAM,GAAGF,GAAG,CAACG,IAAJ,IAAYH,GAAG,CAACG,IAAJ,KAAa,iBAAzB,GAA6C,GAA7C,GAAkD,GAAjE;AACAZ,EAAAA,GAAG,CAACW,MAAJ,CAAWA,MAAX,EAAmBV,IAAnB,CAAwB;AAAEY,IAAAA,OAAO,EAAEJ,GAAG,CAACI;AAAf,GAAxB;AACD,CAHD;AAKA,MAAMC,IAAI,GAAGjC,OAAO,CAACC,GAAR,CAAYgC,IAAZ,IAAoB,IAAjC;AAEAxB,GAAG,CAACyB,MAAJ,CAAWD,IAAX,EAAiB,MAAM;AACrB7B,EAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACD,CAFD","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\","sourcesContent":["/* eslint-disable no-underscore-dangle */\r\n/* eslint-disable linebreak-style */\r\n/* eslint-disable no-console */\r\nimport express from 'express';\r\nimport cors from 'cors';\r\nimport mongoose from 'mongoose';\r\nimport bodyParser from 'body-parser';\r\nimport dotenv from 'dotenv';\r\nimport path from 'path';\r\nimport userRouter from './routers/userRouter';\r\nimport orderRouter from './routers/orderRouter';\r\nimport productRouter from './routers/productRouter';\r\nimport uploadRouter from './routers/uploadRouter';\r\n\r\ndotenv.config()\r\n\r\nmongoose.connect(process.env.MONGODB_URL)\r\n.then(() => {\r\n  console.log(\"Connected to mongodb.\")\r\n})\r\n.catch((error) => {\r\n  console.log(error.reason);\r\n});\r\n\r\nconst app = express();\r\napp.use(cors());\r\napp.use(bodyParser.json());\r\napp.use('/api/uploads', uploadRouter)\r\napp.use('/api/users', userRouter);\r\napp.use('/api/products', productRouter);\r\napp.use('/api/orders', orderRouter);\r\napp.get('/api/paypal/clientID', (req, res) => {\r\n  res.send({clientId: process.env.PAYPAL_CLIENT_ID})\r\n});\r\napp.use('/uploads', express.static(path.join(__dirname, '/../uploads')))\r\napp.use(express.static(path.join(__dirname, '/../frontend')));\r\napp.get('*', (req, res) => {\r\n  res.send(path.join(__dirname, '/../frontend/index.html'))\r\n});\r\n// eslint-disable-next-line no-unused-vars\r\napp.use((err, req, res, next) => {\r\n  const status = err.name && err.name === 'ValidationError' ? 400: 500;\r\n  res.status(status).send({ message: err.message});\r\n});\r\n\r\nconst PORT = process.env.PORT || 5000;\r\n\r\napp.listen(PORT, () => {\r\n  console.log(\"serve at http://localhost:5000\");\r\n});\r\n"]}},"mtime":1653262889103},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\userRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\n\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst userRouter = _express.default.Router();\n\nuserRouter.get(\"/createadmin\", (0, _expressAsyncHandler.default)(async (req, res) => {\n  try {\n    const user = new _userModel.default({\n      name: 'admin',\n      email: 'admin@example.com',\n      password: 'jslojinha',\n      isAdmin: true\n    });\n    const createdUser = await user.save();\n    res.send(createdUser);\n  } catch (err) {\n    res.status(500).send({\n      message: err.message\n    });\n  }\n}));\nuserRouter.post('/signin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const signinUser = await _userModel.default.findOne({\n    email: req.body.email,\n    password: req.body.password\n  });\n\n  if (!signinUser) {\n    res.status(401).send({\n      message: 'Invalid Email or Password'\n    });\n  } else {\n    res.send({\n      _id: signinUser._id,\n      name: signinUser.name,\n      email: signinUser.email,\n      isAdmin: signinUser.isAdmin,\n      token: (0, _utils.generateToken)(signinUser)\n    });\n  }\n}));\nuserRouter.post('/register', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = new _userModel.default({\n    name: req.body.name,\n    email: req.body.email,\n    password: req.body.password\n  });\n  const createdUser = await user.save();\n\n  if (!createdUser) {\n    res.status(401).send({\n      message: 'Informações inválidas'\n    });\n  } else {\n    res.send({\n      _id: createdUser._id,\n      name: createdUser.name,\n      email: createdUser.email,\n      isAdmin: createdUser.isAdmin,\n      token: (0, _utils.generateToken)(createdUser)\n    });\n  }\n}));\nuserRouter.put('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = await _userModel.default.findById(req.params.id);\n\n  if (!user) {\n    res.status(401).send({\n      message: 'Usuário não encontrado'\n    });\n  } else {\n    user.name = req.body.name || user.name;\n    user.email = req.body.email || user.email;\n    user.password = req.body.password || user.password;\n    const updatedUser = await user.save();\n    res.send({\n      _id: updatedUser._id,\n      name: updatedUser.name,\n      email: updatedUser.email,\n      isAdmin: updatedUser.isAdmin,\n      token: (0, _utils.generateToken)(updatedUser)\n    });\n  }\n}));\nvar _default = userRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJSb3V0ZXIuanMiXSwibmFtZXMiOlsidXNlclJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJ1c2VyIiwiVXNlciIsIm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiaXNBZG1pbiIsImNyZWF0ZWRVc2VyIiwic2F2ZSIsInNlbmQiLCJlcnIiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsInNpZ25pblVzZXIiLCJmaW5kT25lIiwiYm9keSIsIl9pZCIsInRva2VuIiwicHV0IiwiaXNBdXRoIiwiZmluZEJ5SWQiLCJwYXJhbXMiLCJpZCIsInVwZGF0ZWRVc2VyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxVQUFVLEdBQUdDLGlCQUFRQyxNQUFSLEVBQW5COztBQUVBRixVQUFVLENBQUNHLEdBQVgsQ0FDSSxjQURKLEVBRUksa0NBQXFCLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUN6QyxNQUFJO0FBQ0EsVUFBTUMsSUFBSSxHQUFHLElBQUlDLGtCQUFKLENBQVM7QUFDbEJDLE1BQUFBLElBQUksRUFBRSxPQURZO0FBRWxCQyxNQUFBQSxLQUFLLEVBQUUsbUJBRlc7QUFHbEJDLE1BQUFBLFFBQVEsRUFBRSxXQUhRO0FBSWxCQyxNQUFBQSxPQUFPLEVBQUU7QUFKUyxLQUFULENBQWI7QUFNQSxVQUFNQyxXQUFXLEdBQUcsTUFBTU4sSUFBSSxDQUFDTyxJQUFMLEVBQTFCO0FBQ0FSLElBQUFBLEdBQUcsQ0FBQ1MsSUFBSixDQUFTRixXQUFUO0FBQ0gsR0FURCxDQVNFLE9BQU9HLEdBQVAsRUFBWTtBQUNWVixJQUFBQSxHQUFHLENBQUNXLE1BQUosQ0FBVyxHQUFYLEVBQWdCRixJQUFoQixDQUFxQjtBQUFFRyxNQUFBQSxPQUFPLEVBQUVGLEdBQUcsQ0FBQ0U7QUFBZixLQUFyQjtBQUNIO0FBQ0osQ0FiRyxDQUZKO0FBZ0JBakIsVUFBVSxDQUFDa0Is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SCxJQUFBQSxJQUFJLENBQUNJLFFBQUwsR0FBZ0JOLEdBQUcsQ0FBQ2lCLElBQUosQ0FBU1gsUUFBVCxJQUFxQkosSUFBSSxDQUFDSSxRQUExQztBQUNBLFVBQU1tQixXQUFXLEdBQUcsTUFBTXZCLElBQUksQ0FBQ08sSUFBTCxFQUExQjtBQUNBUixJQUFBQSxHQUFHLENBQUNTLElBQUosQ0FBUztBQUNUUSxNQUFBQSxHQUFHLEVBQUVPLFdBQVcsQ0FBQ1AsR0FEUjtBQUVUZCxNQUFBQSxJQUFJLEVBQUVxQixXQUFXLENBQUNyQixJQUZUO0FBR1RDLE1BQUFBLEtBQUssRUFBRW9CLFdBQVcsQ0FBQ3BCLEtBSFY7QUFJVEUsTUFBQUEsT0FBTyxFQUFFa0IsV0FBVyxDQUFDbEIsT0FKWjtBQUtUWSxNQUFBQSxLQUFLLEVBQUUsMEJBQWNNLFdBQWQ7QUFMRSxLQUFUO0FBT0g7QUFDSixDQW5CRyxDQUhKO2VBdUJlN0IsVSIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc0xvamluaGFcXGJhY2tlbmRcXHJvdXRlcnNcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xyXG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlck1vZGVsJztcclxuaW1wb3J0IHsgZ2VuZXJhdGVUb2tlbiwgaXNBdXRoIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuY29uc3QgdXNlclJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG51c2VyUm91dGVyLmdldChcclxuICAgIFwiL2NyZWF0ZWFkbWluXCIsIFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlciAoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdhZG1pbicsXHJcbiAgICAgICAgICAgIGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogJ2pzbG9qaW5oYScsXHJcbiAgICAgICAgICAgIGlzQWRtaW46IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKVxyXG4gICAgICAgIHJlcy5zZW5kKGNyZWF0ZWRVc2VyKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbn0pKTtcclxudXNlclJvdXRlci5wb3N0KFxyXG4gICAgJy9zaWduaW4nLCBcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIgKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNpZ25pblVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xyXG4gICAgICAgICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiByZXEuYm9keS5wYXNzd29yZFxyXG4gICAgfSk7XHJcbiAgICBpZiAoIXNpZ25pblVzZXIpe1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIEVtYWlsIG9yIFBhc3N3b3JkJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiBzaWduaW5Vc2VyLl9pZCxcclxuICAgICAgICBuYW1lOiBzaWduaW5Vc2VyLm5hbWUsXHJcbiAgICAgICAgZW1haWw6IHNpZ25pblVzZXIuZW1haWwsIFxyXG4gICAgICAgIGlzQWRtaW46IHNpZ25pblVzZXIuaXNBZG1pbixcclxuICAgICAgICB0b2tlbjogZ2VuZXJhdGVUb2tlbihzaWduaW5Vc2VyKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KSk7XHJcbnVzZXJSb3V0ZXIucG9zdChcclxuICAgICcvcmVnaXN0ZXInLCBcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIgKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHtcclxuICAgICAgICBuYW1lOiByZXEuYm9keS5uYW1lLFxyXG4gICAgICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcclxuICAgICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGNyZWF0ZWRVc2VyID0gYXdhaXQgdXNlci5zYXZlKCk7XHJcbiAgICBpZiAoIWNyZWF0ZWRVc2VyKXtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAnSW5mb3JtYcOnw7VlcyBpbnbDoWxpZGFzJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiBjcmVhdGVkVXNlci5faWQsXHJcbiAgICAgICAgbmFtZTogY3JlYXRlZFVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogY3JlYXRlZFVzZXIuZW1haWwsIFxyXG4gICAgICAgIGlzQWRtaW46IGNyZWF0ZWRVc2VyLmlzQWRtaW4sXHJcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4oY3JlYXRlZFVzZXIpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pKTtcclxudXNlclJvdXRlci5wdXQoXHJcbiAgICAnLzppZCcsXHJcbiAgICBpc0F1dGgsIFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlciAoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmICghdXNlcil7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoeyBcclxuICAgICAgICAgICAgbWVzc2FnZTogJ1VzdcOhcmlvIG7Do28gZW5jb250cmFkbydcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXNlci5uYW1lID0gcmVxLmJvZHkubmFtZSB8fCB1c2VyLm5hbWU7XHJcbiAgICAgICAgdXNlci5lbWFpbCA9IHJlcS5ib2R5LmVtYWlsIHx8IHVzZXIuZW1haWw7XHJcbiAgICAgICAgdXNlci5wYXNzd29yZCA9IHJlcS5ib2R5LnBhc3N3b3JkIHx8IHVzZXIucGFzc3dvcmQ7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKTtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiB1cGRhdGVkVXNlci5faWQsXHJcbiAgICAgICAgbmFtZTogdXBkYXRlZFVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogdXBkYXRlZFVzZXIuZW1haWwsIFxyXG4gICAgICAgIGlzQWRtaW46IHVwZGF0ZWRVc2VyLmlzQWRtaW4sXHJcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4odXBkYXRlZFVzZXIpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pKTtcclxuZXhwb3J0IGRlZmF1bHQgdXNlclJvdXRlcjsiXX0=","map":{"version":3,"sources":["userRouter.js"],"names":["userRouter","express","Router","get","req","res","user","User","name","email","password","isAdmin","createdUser","save","send","err","status","message","post","signinUser","findOne","body","_id","token","put","isAuth","findById","params","id","updatedUser"],"mappings":"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","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\routers\\","sourcesContent":["import express from 'express';\r\nimport expressAsyncHandler from 'express-async-handler';\r\nimport User from '../models/userModel';\r\nimport { generateToken, isAuth } from '../utils';\r\n\r\nconst userRouter = express.Router();\r\n\r\nuserRouter.get(\r\n    \"/createadmin\", \r\n    expressAsyncHandler (async (req, res) => {\r\n    try {\r\n        const user = new User({\r\n            name: 'admin',\r\n            email: 'admin@example.com',\r\n            password: 'jslojinha',\r\n            isAdmin: true,\r\n        });\r\n        const createdUser = await user.save()\r\n        res.send(createdUser);\r\n    } catch (err) {\r\n        res.status(500).send({ message: err.message });\r\n    }\r\n}));\r\nuserRouter.post(\r\n    '/signin', \r\n    expressAsyncHandler (async (req, res) => {\r\n        const signinUser = await User.findOne({\r\n            email: req.body.email,\r\n            password: req.body.password\r\n    });\r\n    if (!signinUser){\r\n        res.status(401).send({ \r\n            message: 'Invalid Email or Password'\r\n        });\r\n    } else {\r\n        res.send({\r\n        _id: signinUser._id,\r\n        name: signinUser.name,\r\n        email: signinUser.email, \r\n        isAdmin: signinUser.isAdmin,\r\n        token: generateToken(signinUser)\r\n        });\r\n    }\r\n}));\r\nuserRouter.post(\r\n    '/register', \r\n    expressAsyncHandler (async (req, res) => {\r\n    const user = new User({\r\n        name: req.body.name,\r\n        email: req.body.email,\r\n        password: req.body.password,\r\n    });\r\n    const createdUser = await user.save();\r\n    if (!createdUser){\r\n        res.status(401).send({ \r\n            message: 'Informações inválidas'\r\n        });\r\n    } else {\r\n        res.send({\r\n        _id: createdUser._id,\r\n        name: createdUser.name,\r\n        email: createdUser.email, \r\n        isAdmin: createdUser.isAdmin,\r\n        token: generateToken(createdUser)\r\n        });\r\n    }\r\n}));\r\nuserRouter.put(\r\n    '/:id',\r\n    isAuth, \r\n    expressAsyncHandler (async (req, res) => {\r\n    const user = await User.findById(req.params.id);\r\n    if (!user){\r\n        res.status(401).send({ \r\n            message: 'Usuário não encontrado'\r\n        });\r\n    } else {\r\n        user.name = req.body.name || user.name;\r\n        user.email = req.body.email || user.email;\r\n        user.password = req.body.password || user.password;\r\n        const updatedUser = await user.save();\r\n        res.send({\r\n        _id: updatedUser._id,\r\n        name: updatedUser.name,\r\n        email: updatedUser.email, \r\n        isAdmin: updatedUser.isAdmin,\r\n        token: generateToken(updatedUser)\r\n        });\r\n    }\r\n}));\r\nexport default userRouter;"]}},"mtime":1649959603881},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\models\\\\userModel.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    index: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  isAdmin: {\n    type: Boolean,\n    required: true,\n    default: false\n  }\n});\n\nconst User = _mongoose.default.model('User', userSchema);\n\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJNb2RlbC5qcyJdLCJuYW1lcyI6WyJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJpbmRleCIsInVuaXF1ZSIsInBhc3N3b3JkIiwiaXNBZG1pbiIsIkJvb2xlYW4iLCJkZWZhdWx0IiwiVXNlciIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxNQUFNQSxVQUFVLEdBQUcsSUFBSUMsa0JBQVNDLE1BQWIsQ0FBb0I7QUFDbkNDLEVBQUFBLElBQUksRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUQ2QjtBQUVuQ0MsRUFBQUEsS0FBSyxFQUFFO0FBQ0hILElBQUFBLElBQUksRUFBRUMsTUFESDtBQUVIQyxJQUFBQSxRQUFRLEVBQUUsSUFGUDtBQUdIRSxJQUFBQSxLQUFLLEVBQUUsSUFISjtBQUlIQyxJQUFBQSxNQUFNLEVBQUU7QUFKTCxHQUY0QjtBQVFuQ0MsRUFBQUEsUUFBUSxFQUFFO0FBQUVOLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsUUFBUSxFQUFFO0FBQTFCLEdBUnlCO0FBU25DSyxFQUFBQSxPQUFPLEVBQUU7QUFBRVAsSUFBQUEsSUFBSSxFQUFFUSxPQUFSO0FBQWlCTixJQUFBQSxRQUFRLEVBQUUsSUFBM0I7QUFBaUNPLElBQUFBLE9BQU8sRUFBRTtBQUExQztBQVQwQixDQUFwQixDQUFuQjs7QUFXQSxNQUFNQyxJQUFJLEdBQUdiLGtCQUFTYyxLQUFULENBQWUsTUFBZixFQUF1QmYsVUFBdkIsQ0FBYjs7ZUFDZWMsSSIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc0xvamluaGFcXGJhY2tlbmRcXG1vZGVsc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICBlbWFpbDoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZywgXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsIFxyXG4gICAgICAgIGluZGV4OiB0cnVlLCBcclxuICAgICAgICB1bmlxdWU6IHRydWVcclxuICAgIH0sXHJcbiAgICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIGlzQWRtaW46IHsgdHlwZTogQm9vbGVhbiwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IGZhbHNlfSxcclxufSk7XHJcbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpO1xyXG5leHBvcnQgZGVmYXVsdCBVc2VyOyJdfQ==","map":{"version":3,"sources":["userModel.js"],"names":["userSchema","mongoose","Schema","name","type","String","required","email","index","unique","password","isAdmin","Boolean","default","User","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,UAAU,GAAG,IAAIC,kBAASC,MAAb,CAAoB;AACnCC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAD6B;AAEnCC,EAAAA,KAAK,EAAE;AACHH,IAAAA,IAAI,EAAEC,MADH;AAEHC,IAAAA,QAAQ,EAAE,IAFP;AAGHE,IAAAA,KAAK,EAAE,IAHJ;AAIHC,IAAAA,MAAM,EAAE;AAJL,GAF4B;AAQnCC,EAAAA,QAAQ,EAAE;AAAEN,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GARyB;AASnCK,EAAAA,OAAO,EAAE;AAAEP,IAAAA,IAAI,EAAEQ,OAAR;AAAiBN,IAAAA,QAAQ,EAAE,IAA3B;AAAiCO,IAAAA,OAAO,EAAE;AAA1C;AAT0B,CAApB,CAAnB;;AAWA,MAAMC,IAAI,GAAGb,kBAASc,KAAT,CAAe,MAAf,EAAuBf,UAAvB,CAAb;;eACec,I","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\models\\","sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst userSchema = new mongoose.Schema({\r\n    name: { type: String, required: true},\r\n    email: {\r\n        type: String, \r\n        required: true, \r\n        index: true, \r\n        unique: true\r\n    },\r\n    password: { type: String, required: true},\r\n    isAdmin: { type: Boolean, required: true, default: false},\r\n});\r\nconst User = mongoose.model('User', userSchema);\r\nexport default User;"]}},"mtime":1649779361062},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\utils.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAuth = exports.isAdmin = exports.generateToken = void 0;\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_dotenv.default.config();\n\nconst generateToken = user => _jsonwebtoken.default.sign({\n  _id: user._id,\n  name: user.name,\n  email: user.email,\n  isAdmin: user.isAdmin\n}, process.env.JWT_SECRET);\n\nexports.generateToken = generateToken;\n\nconst isAuth = (req, res, next) => {\n  const bearerToken = req.headers.authorization;\n\n  if (!bearerToken) {\n    res.status(401).send({\n      message: 'token is not supplied'\n    });\n  } else {\n    const token = bearerToken.slice(7, bearerToken.length);\n\n    _jsonwebtoken.default.verify(token, process.env.JWT_SECRET, (err, data) => {\n      if (err) {\n        res.status(401).send({\n          message: 'invalid token'\n        });\n      } else {\n        req.user = data;\n        next();\n      }\n    });\n  }\n};\n\nexports.isAuth = isAuth;\n\nconst isAdmin = (req, res, next) => {\n  if (req.user && req.user.isAdmin) {\n    next();\n  } else {\n    res.status(401).send({\n      message: 'Token is not valid for admin user'\n    });\n  }\n};\n\nexports.isAdmin = isAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsImdlbmVyYXRlVG9rZW4iLCJ1c2VyIiwiand0Iiwic2lnbiIsIl9pZCIsIm5hbWUiLCJlbWFpbCIsImlzQWRtaW4iLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImlzQXV0aCIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJUb2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhdHVzIiwic2VuZCIsIm1lc3NhZ2UiLCJ0b2tlbiIsInNsaWNlIiwibGVuZ3RoIiwidmVyaWZ5IiwiZXJyIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUFBLGdCQUFPQyxNQUFQOztBQUVPLE1BQU1DLGFBQWEsR0FBSUMsSUFBRCxJQUFVQyxzQkFBSUMsSUFBSixDQUNuQztBQUNJQyxFQUFBQSxHQUFHLEVBQUVILElBQUksQ0FBQ0csR0FEZDtBQUVJQyxFQUFBQSxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFGZjtBQUdJQyxFQUFBQSxLQUFLLEVBQUVMLElBQUksQ0FBQ0ssS0FIaEI7QUFJSUMsRUFBQUEsT0FBTyxFQUFFTixJQUFJLENBQUNNO0FBSmxCLENBRG1DLEVBT25DQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFQdUIsQ0FBaEM7Ozs7QUFTQSxNQUFNQyxNQUFNLEdBQUcsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7QUFDdEMsUUFBTUMsV0FBVyxHQUFHSCxHQUFHLENBQUNJLE9BQUosQ0FBWUMsYUFBaEM7O0FBQ0EsTUFBSSxDQUFDRixXQUFMLEVBQWtCO0FBQ2ZGLElBQUFBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVDLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQXJCO0FBQ0YsR0FGRCxNQUVPO0FBQ0gsVUFBTUMsS0FBSyxHQUFHTixXQUFXLENBQUNPLEtBQVosQ0FBa0IsQ0FBbEIsRUFBcUJQLFdBQVcsQ0FBQ1EsTUFBakMsQ0FBZDs7QUFDQXJCLDBCQUFJc0IsTUFBSixDQUFXSCxLQUFYLEVBQWtCYixPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUIsRUFBMEMsQ0FBQ2UsR0FBRCxFQUFNQyxJQUFOLEtBQWU7QUFDckQsVUFBSUQsR0FBSixFQUFTO0FBQ0xaLFFBQUFBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUNDLFVBQUFBLE9BQU8sRUFBRTtBQUFWLFNBQXJCO0FBQ0gsT0FGRCxNQUVPO0FBQ0hSLFFBQUFBLEdBQUcsQ0FBQ1gsSUFBSixHQUFXeUIsSUFBWDtBQUNBWixRQUFBQSxJQUFJO0FBQ1A7QUFDSixLQVBEO0FBUUg7QUFDSixDQWZNOzs7O0FBZ0JBLE1BQU1QLE9BQU8sR0FBRyxDQUFDSyxHQUFELEVBQU1DLEdBQU4sRUFBV0MsSUFBWCxLQUFvQjtBQUN2QyxNQUFJRixHQUFHLENBQUNYLElBQUosSUFBWVcsR0FBRyxDQUFDWCxJQUFKLENBQVNNLE9BQXpCLEVBQWlDO0FBQzdCTyxJQUFBQSxJQUFJO0FBQ1AsR0FGRCxNQUVPO0FBQ0hELElBQUFBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVDLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQXJCO0FBQ0g7QUFDSixDQU5NIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcZ3VpbGhlcm1lXFxEb3dubG9hZHNcXGpzTG9qaW5oYVxcYmFja2VuZFxcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7XHJcblxyXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVUb2tlbiA9ICh1c2VyKSA9PiBqd3Quc2lnbihcclxuICAgIHtcclxuICAgICAgICBfaWQ6IHVzZXIuX2lkLFxyXG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICBpc0FkbWluOiB1c2VyLmlzQWRtaW5cclxuICAgIH0sXHJcbiAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVUXHJcbik7XHJcbmV4cG9ydCBjb25zdCBpc0F1dGggPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIGNvbnN0IGJlYXJlclRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuICAgIGlmICghYmVhcmVyVG9rZW4pIHtcclxuICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogJ3Rva2VuIGlzIG5vdCBzdXBwbGllZCcgfSkgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gYmVhcmVyVG9rZW4uc2xpY2UoNywgYmVhcmVyVG9rZW4ubGVuZ3RoKTtcclxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCAoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHttZXNzYWdlOiAnaW52YWxpZCB0b2tlbid9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlcS51c2VyID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIG5leHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn07XHJcbmV4cG9ydCBjb25zdCBpc0FkbWluID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgICBpZiAocmVxLnVzZXIgJiYgcmVxLnVzZXIuaXNBZG1pbil7XHJcbiAgICAgICAgbmV4dCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IG1lc3NhZ2U6ICdUb2tlbiBpcyBub3QgdmFsaWQgZm9yIGFkbWluIHVzZXInfSk7XHJcbiAgICB9XHJcbn07Il19","map":{"version":3,"sources":["utils.js"],"names":["dotenv","config","generateToken","user","jwt","sign","_id","name","email","isAdmin","process","env","JWT_SECRET","isAuth","req","res","next","bearerToken","headers","authorization","status","send","message","token","slice","length","verify","err","data"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEAA,gBAAOC,MAAP;;AAEO,MAAMC,aAAa,GAAIC,IAAD,IAAUC,sBAAIC,IAAJ,CACnC;AACIC,EAAAA,GAAG,EAAEH,IAAI,CAACG,GADd;AAEIC,EAAAA,IAAI,EAAEJ,IAAI,CAACI,IAFf;AAGIC,EAAAA,KAAK,EAAEL,IAAI,CAACK,KAHhB;AAIIC,EAAAA,OAAO,EAAEN,IAAI,CAACM;AAJlB,CADmC,EAOnCC,OAAO,CAACC,GAAR,CAAYC,UAPuB,CAAhC;;;;AASA,MAAMC,MAAM,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACtC,QAAMC,WAAW,GAAGH,GAAG,CAACI,OAAJ,CAAYC,aAAhC;;AACA,MAAI,CAACF,WAAL,EAAkB;AACfF,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB;AACF,GAFD,MAEO;AACH,UAAMC,KAAK,GAAGN,WAAW,CAACO,KAAZ,CAAkB,CAAlB,EAAqBP,WAAW,CAACQ,MAAjC,CAAd;;AACArB,0BAAIsB,MAAJ,CAAWH,KAAX,EAAkBb,OAAO,CAACC,GAAR,CAAYC,UAA9B,EAA0C,CAACe,GAAD,EAAMC,IAAN,KAAe;AACrD,UAAID,GAAJ,EAAS;AACLZ,QAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAE;AAAV,SAArB;AACH,OAFD,MAEO;AACHR,QAAAA,GAAG,CAACX,IAAJ,GAAWyB,IAAX;AACAZ,QAAAA,IAAI;AACP;AACJ,KAPD;AAQH;AACJ,CAfM;;;;AAgBA,MAAMP,OAAO,GAAG,CAACK,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACvC,MAAIF,GAAG,CAACX,IAAJ,IAAYW,GAAG,CAACX,IAAJ,CAASM,OAAzB,EAAiC;AAC7BO,IAAAA,IAAI;AACP,GAFD,MAEO;AACHD,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB;AACH;AACJ,CANM","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\","sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nexport const generateToken = (user) => jwt.sign(\r\n    {\r\n        _id: user._id,\r\n        name: user.name,\r\n        email: user.email,\r\n        isAdmin: user.isAdmin\r\n    },\r\n    process.env.JWT_SECRET\r\n);\r\nexport const isAuth = (req, res, next) => {\r\n    const bearerToken = req.headers.authorization;\r\n    if (!bearerToken) {\r\n       res.status(401).send({ message: 'token is not supplied' }) \r\n    } else {\r\n        const token = bearerToken.slice(7, bearerToken.length);\r\n        jwt.verify(token, process.env.JWT_SECRET, (err, data) => {\r\n            if (err) {\r\n                res.status(401).send({message: 'invalid token'});\r\n            } else {\r\n                req.user = data;\r\n                next();\r\n            }\r\n        })\r\n    }\r\n};\r\nexport const isAdmin = (req, res, next) => {\r\n    if (req.user && req.user.isAdmin){\r\n        next();\r\n    } else {\r\n        res.status(401).send({ message: 'Token is not valid for admin user'});\r\n    }\r\n};"]}},"mtime":1653222790855},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\orderRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\n\nvar _orderModel = _interopRequireDefault(require(\"../models/orderModel\"));\n\nvar _utils = require(\"../utils\");\n\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\n\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst orderRouter = _express.default.Router();\n\norderRouter.get('/summary', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.aggregate([{\n    $group: {\n      _id: null,\n      numOrders: {\n        $sum: 1\n      },\n      totalSales: {\n        $sum: '$totalPrice'\n      }\n    }\n  }]);\n  const users = await _userModel.default.aggregate([{\n    $group: {\n      _id: null,\n      numUsers: {\n        $sum: 1\n      }\n    }\n  }]);\n  const dailyOrders = await _orderModel.default.aggregate([{\n    $group: {\n      _id: {\n        $dateToString: {\n          format: '%Y-%m-%d',\n          date: '$createdAt'\n        }\n      },\n      orders: {\n        $sum: 1\n      },\n      sales: {\n        $sum: '$totalprice'\n      }\n    }\n  }]);\n  const productCategories = await _productModel.default.aggregate([{\n    $group: {\n      _id: '$category',\n      count: {\n        $sum: 1\n      }\n    }\n  }]);\n  res.send({\n    users,\n    orders: orders.length === 0 ? [{\n      numOrders: 0,\n      totalSales: 0\n    }] : orders,\n    dailyOrders,\n    productCategories\n  });\n}));\norderRouter.get('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({}).populate('user');\n  res.send(orders);\n}));\norderRouter.get('/mine', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({\n    user: req.user._id\n  });\n  res.send(orders);\n}));\norderRouter.get('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n\n  if (order) {\n    res.send(order);\n  } else {\n    res.status(404).send({\n      message: 'Order Not found'\n    });\n  }\n}));\norderRouter.post('/', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = new _orderModel.default({\n    orderItems: req.body.orderItems,\n    user: req.user._id,\n    shipping: req.body.shipping,\n    payment: req.body.payment,\n    itemsPrice: req.body.itemsPrice,\n    taxPrice: req.body.taxPrice,\n    shippingPrice: req.body.shippingPrice,\n    totalPrice: req.body.totalPrice\n  });\n  const createdOrder = await order.save();\n  res.status(201).send({\n    message: 'New order Created',\n    order: createdOrder\n  });\n}));\norderRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n\n  if (order) {\n    const deletedOrder = await order.remove();\n    res.send({\n      message: 'Product Deleted',\n      product: deletedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found'\n    });\n  }\n}));\norderRouter.put('/:id/pay', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n\n  if (order) {\n    order.isPaid = true;\n    order.paidAt = Date.now();\n    order.payment.paymentResult = {\n      payerID: req.body.payerID,\n      paymentID: req.body.paymentID,\n      orderID: req.body.orderID\n    };\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order paid',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order not found.'\n    });\n  }\n}));\norderRouter.put('/:id/deliver', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n\n  if (order) {\n    order.isDelivered = true;\n    order.deliveredAt = Date.now();\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order Delivered',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found.'\n    });\n  }\n}));\nvar _default = orderRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyUm91dGVyLmpzIl0sIm5hbWVzIjpbIm9yZGVyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImlzQXV0aCIsImlzQWRtaW4iLCJyZXEiLCJyZXMiLCJvcmRlcnMiLCJPcmRlciIsImFnZ3JlZ2F0ZSIsIiRncm91cCIsIl9pZCIsIm51bU9yZGVycyIsIiRzdW0iLCJ0b3RhbFNhbGVzIiwidXNlcnMiLCJVc2VyIiwibnVtVXNlcnMiLCJkYWlseU9yZGVycyIsIiRkYXRlVG9TdHJpbmciLCJmb3JtYXQiLCJkYXRlIiwic2FsZXMiLCJwcm9kdWN0Q2F0ZWdvcmllcyIsIlByb2R1Y3QiLCJjb3VudCIsInNlbmQiLCJsZW5ndGgiLCJmaW5kIiwicG9wdWxhdGUiLCJ1c2VyIiwib3JkZXIiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwic3RhdHVzIiwibWVzc2FnZSIsInBvc3QiLCJvcmRlckl0ZW1zIiwiYm9keSIsInNoaXBwaW5nIiwicGF5bWVudCIsIml0ZW1zUHJpY2UiLCJ0YXhQcmljZSIsInNoaXBwaW5nUHJpY2UiLCJ0b3RhbFByaWNlIiwiY3JlYXRlZE9yZGVyIiwic2F2ZSIsImRlbGV0ZSIsImRlbGV0ZWRPcmRlciIsInJlbW92ZSIsInByb2R1Y3QiLCJwdXQiLCJpc1BhaWQiLCJwYWlkQXQiLCJEYXRlIiwibm93IiwicGF5bWVudFJlc3VsdCIsInBheWVySUQiLCJwYXltZW50SUQiLCJvcmRlcklEIiwidXBkYXRlZE9yZGVyIiwiaXNEZWxpdmVyZWQiLCJkZWxpdmVyZWRBdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsV0FBVyxHQUFHQyxpQkFBUUMsTUFBUixFQUFwQjs7QUFFQUYsV0FBVyxDQUFDRyxHQUFaLENBQ0ksVUFESixFQUVJQyxhQUZKLEVBR0lDLGNBSEosRUFJSSxrQ0FBb0IsT0FBT0MsR0FBUCxFQUFXQyxHQUFYLEtBQW1CO0FBQ3ZD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SixDQUFXLEdBQVgsRUFBZ0JULElBQWhCLENBQXFCO0FBQUVVLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQXJCO0FBQ0Q7QUFDRixDQVZELENBSEo7ZUFnQmVyQyxXIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcZ3VpbGhlcm1lXFxEb3dubG9hZHNcXGpzTG9qaW5oYVxcYmFja2VuZFxccm91dGVyc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSBcImV4cHJlc3MtYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgT3JkZXIgZnJvbSBcIi4uL21vZGVscy9vcmRlck1vZGVsXCI7XHJcbmltcG9ydCB7aXNBZG1pbiwgaXNBdXRofSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyTW9kZWwnO1xyXG5pbXBvcnQgUHJvZHVjdCBmcm9tICcuLi9tb2RlbHMvcHJvZHVjdE1vZGVsJ1xyXG5cclxuY29uc3Qgb3JkZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxub3JkZXJSb3V0ZXIuZ2V0KFxyXG4gICAgJy9zdW1tYXJ5JywgXHJcbiAgICBpc0F1dGgsIFxyXG4gICAgaXNBZG1pbiwgXHJcbiAgICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEscmVzKSA9PiB7XHJcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBPcmRlci5hZ2dyZWdhdGUoW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJGdyb3VwOiB7XHJcbiAgICAgICAgICAgIF9pZDogbnVsbCxcclxuICAgICAgICAgICAgbnVtT3JkZXJzOiB7ICRzdW06IDEgfSxcclxuICAgICAgICAgICAgdG90YWxTYWxlczogeyAkc3VtOiAnJHRvdGFsUHJpY2UnIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBdKTtcclxuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5hZ2dyZWdhdGUoW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJGdyb3VwOiB7XHJcbiAgICAgICAgICAgIF9pZDogbnVsbCxcclxuICAgICAgICAgICAgbnVtVXNlcnM6IHsgJHN1bTogMSB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICBdKTtcclxuICAgIGNvbnN0IGRhaWx5T3JkZXJzID0gYXdhaXQgT3JkZXIuYWdncmVnYXRlKFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICRncm91cDoge1xyXG4gICAgICAgICAgICAgICAgX2lkOiB7ICRkYXRlVG9TdHJpbmc6IHsgZm9ybWF0OiAnJVktJW0tJWQnLCBkYXRlOiAnJGNyZWF0ZWRBdCcgfSB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJzOiB7ICRzdW06IDEgfSxcclxuICAgICAgICAgICAgICAgIHNhbGVzOiB7ICRzdW06ICckdG90YWxwcmljZScgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgXSk7XHJcbiAgICBjb25zdCBwcm9kdWN0Q2F0ZWdvcmllcyA9IGF3YWl0IFByb2R1Y3QuYWdncmVnYXRlKFtcclxuICAgICAge1xyXG4gICAgICAgICRncm91cDoge1xyXG4gICAgICAgICAgICBfaWQ6ICckY2F0ZWdvcnknLFxyXG4gICAgICAgICAgICBjb3VudDogeyRzdW06IDF9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICBdKTtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgICAgIHVzZXJzLFxyXG4gICAgICAgICAgICBvcmRlcnM6IG9yZGVycy5sZW5ndGggPT09IDAgPyBbe251bU9yZGVyczogMCwgdG90YWxTYWxlczogMH1dIDogb3JkZXJzLFxyXG4gICAgICAgICAgICBkYWlseU9yZGVycyxcclxuICAgICAgICAgICAgcHJvZHVjdENhdGVnb3JpZXNcclxuICAgICAgICB9KTtcclxufSkpO1xyXG5vcmRlclJvdXRlci5nZXQoXHJcbiAgICAnLycsIFxyXG4gICAgaXNBdXRoLCBcclxuICAgIGlzQWRtaW4sIFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgICAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBPcmRlci5maW5kKHt9KS5wb3B1bGF0ZSgndXNlcicpO1xyXG4gICAgICAgIHJlcy5zZW5kKG9yZGVycyk7XHJcbn0pKTtcclxub3JkZXJSb3V0ZXIuZ2V0KCcvbWluZScsIGlzQXV0aCwgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IE9yZGVyLmZpbmQoe3VzZXI6IHJlcS51c2VyLl9pZH0pO1xyXG4gICAgcmVzLnNlbmQob3JkZXJzKTtcclxufSkpO1xyXG5vcmRlclJvdXRlci5nZXQoXHJcbiAgICAnLzppZCcsXHJcbiAgICBpc0F1dGgsXHJcbiAgICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcbiAgICAgICAgaWYgKG9yZGVyKSB7XHJcbiAgICAgICAgICAgIHJlcy5zZW5kKG9yZGVyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgZm91bmQnIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbik7XHJcbm9yZGVyUm91dGVyLnBvc3QoXHJcbiAgICAnLycsIFxyXG4gICAgaXNBdXRoLCBcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBuZXcgT3JkZXIoe1xyXG4gICAgICAgICAgICBvcmRlckl0ZW1zOiByZXEuYm9keS5vcmRlckl0ZW1zLFxyXG4gICAgICAgICAgICB1c2VyOiByZXEudXNlci5faWQsXHJcbiAgICAgICAgICAgIHNoaXBwaW5nOiByZXEuYm9keS5zaGlwcGluZyxcclxuICAgICAgICAgICAgcGF5bWVudDogcmVxLmJvZHkucGF5bWVudCxcclxuICAgICAgICAgICAgaXRlbXNQcmljZTogcmVxLmJvZHkuaXRlbXNQcmljZSxcclxuICAgICAgICAgICAgdGF4UHJpY2U6IHJlcS5ib2R5LnRheFByaWNlLFxyXG4gICAgICAgICAgICBzaGlwcGluZ1ByaWNlOiByZXEuYm9keS5zaGlwcGluZ1ByaWNlLFxyXG4gICAgICAgICAgICB0b3RhbFByaWNlOiByZXEuYm9keS50b3RhbFByaWNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZE9yZGVyID0gYXdhaXQgb3JkZXIuc2F2ZSgpO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5zZW5kKHsgbWVzc2FnZTogJ05ldyBvcmRlciBDcmVhdGVkJywgb3JkZXI6IGNyZWF0ZWRPcmRlcn0pXHJcbiAgICB9KVxyXG4pO1xyXG5vcmRlclJvdXRlci5kZWxldGUoXHJcbiAgICAnLzppZCcsXHJcbiAgICBpc0F1dGgsXHJcbiAgICBpc0FkbWluLFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgICAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgICAgIGlmIChvcmRlcikge1xyXG4gICAgICAgIGNvbnN0IGRlbGV0ZWRPcmRlciA9IGF3YWl0IG9yZGVyLnJlbW92ZSgpO1xyXG4gICAgICAgIHJlcy5zZW5kKHsgbWVzc2FnZTogJ1Byb2R1Y3QgRGVsZXRlZCcsIHByb2R1Y3Q6IGRlbGV0ZWRPcmRlciB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIE5vdCBGb3VuZCcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuKTtcclxub3JkZXJSb3V0ZXIucHV0KCcvOmlkL3BheScsIGlzQXV0aCwgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcbiAgICBpZiAob3JkZXIpIHtcclxuICAgICAgICBvcmRlci5pc1BhaWQgPSB0cnVlO1xyXG4gICAgICAgIG9yZGVyLnBhaWRBdCA9IERhdGUubm93KCk7XHJcbiAgICAgICAgb3JkZXIucGF5bWVudC5wYXltZW50UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICBwYXllcklEOiByZXEuYm9keS5wYXllcklELFxyXG4gICAgICAgICAgICBwYXltZW50SUQ6IHJlcS5ib2R5LnBheW1lbnRJRCxcclxuICAgICAgICAgICAgb3JkZXJJRDogcmVxLmJvZHkub3JkZXJJRCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRPcmRlciA9IGF3YWl0IG9yZGVyLnNhdmUoKTtcclxuICAgICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBwYWlkJywgb3JkZXI6IHVwZGF0ZWRPcmRlcn0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBub3QgZm91bmQuJ30pO1xyXG4gICAgfVxyXG59KSk7XHJcbm9yZGVyUm91dGVyLnB1dChcclxuICAgICcvOmlkL2RlbGl2ZXInLFxyXG4gICAgaXNBdXRoLFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgICAgaWYgKG9yZGVyKSB7XHJcbiAgICAgICAgb3JkZXIuaXNEZWxpdmVyZWQgPSB0cnVlO1xyXG4gICAgICAgIG9yZGVyLmRlbGl2ZXJlZEF0ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSBhd2FpdCBvcmRlci5zYXZlKCk7XHJcbiAgICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgRGVsaXZlcmVkJywgb3JkZXI6IHVwZGF0ZWRPcmRlciB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgRm91bmQuJyB9KTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgb3JkZXJSb3V0ZXI7Il19","map":{"version":3,"sources":["orderRouter.js"],"names":["orderRouter","express","Router","get","isAuth","isAdmin","req","res","orders","Order","aggregate","$group","_id","numOrders","$sum","totalSales","users","User","numUsers","dailyOrders","$dateToString","format","date","sales","productCategories","Product","count","send","length","find","populate","user","order","findById","params","id","status","message","post","orderItems","body","shipping","payment","itemsPrice","taxPrice","shippingPrice","totalPrice","createdOrder","save","delete","deletedOrder","remove","product","put","isPaid","paidAt","Date","now","paymentResult","payerID","paymentID","orderID","updatedOrder","isDelivered","deliveredAt"],"mappings":"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","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\routers\\","sourcesContent":["import express from \"express\";\r\nimport expressAsyncHandler from \"express-async-handler\";\r\nimport Order from \"../models/orderModel\";\r\nimport {isAdmin, isAuth} from '../utils';\r\nimport User from '../models/userModel';\r\nimport Product from '../models/productModel'\r\n\r\nconst orderRouter = express.Router();\r\n\r\norderRouter.get(\r\n    '/summary', \r\n    isAuth, \r\n    isAdmin, \r\n    expressAsyncHandler(async (req,res) => {\r\n    const orders = await Order.aggregate([\r\n        {\r\n            $group: {\r\n            _id: null,\r\n            numOrders: { $sum: 1 },\r\n            totalSales: { $sum: '$totalPrice' },\r\n            },\r\n        },\r\n        ]);\r\n    const users = await User.aggregate([\r\n        {\r\n            $group: {\r\n            _id: null,\r\n            numUsers: { $sum: 1 },\r\n            },\r\n        },\r\n    ]);\r\n    const dailyOrders = await Order.aggregate([\r\n        {\r\n            $group: {\r\n                _id: { $dateToString: { format: '%Y-%m-%d', date: '$createdAt' } },\r\n                orders: { $sum: 1 },\r\n                sales: { $sum: '$totalprice' },\r\n            },\r\n        },\r\n    ]);\r\n    const productCategories = await Product.aggregate([\r\n      {\r\n        $group: {\r\n            _id: '$category',\r\n            count: {$sum: 1},\r\n        },\r\n      },\r\n    ]);\r\n        res.send({\r\n            users,\r\n            orders: orders.length === 0 ? [{numOrders: 0, totalSales: 0}] : orders,\r\n            dailyOrders,\r\n            productCategories\r\n        });\r\n}));\r\norderRouter.get(\r\n    '/', \r\n    isAuth, \r\n    isAdmin, \r\n    expressAsyncHandler(async (req, res) => {\r\n        const orders = await Order.find({}).populate('user');\r\n        res.send(orders);\r\n}));\r\norderRouter.get('/mine', isAuth, expressAsyncHandler(async (req, res) => {\r\n    const orders = await Order.find({user: req.user._id});\r\n    res.send(orders);\r\n}));\r\norderRouter.get(\r\n    '/:id',\r\n    isAuth,\r\n    expressAsyncHandler(async (req, res) => {\r\n        const order = await Order.findById(req.params.id);\r\n        if (order) {\r\n            res.send(order);\r\n        } else {\r\n            res.status(404).send({ message: 'Order Not found' });\r\n        }\r\n    })\r\n);\r\norderRouter.post(\r\n    '/', \r\n    isAuth, \r\n    expressAsyncHandler(async (req, res) => {\r\n        const order = new Order({\r\n            orderItems: req.body.orderItems,\r\n            user: req.user._id,\r\n            shipping: req.body.shipping,\r\n            payment: req.body.payment,\r\n            itemsPrice: req.body.itemsPrice,\r\n            taxPrice: req.body.taxPrice,\r\n            shippingPrice: req.body.shippingPrice,\r\n            totalPrice: req.body.totalPrice\r\n        });\r\n        const createdOrder = await order.save();\r\n        res.status(201).send({ message: 'New order Created', order: createdOrder})\r\n    })\r\n);\r\norderRouter.delete(\r\n    '/:id',\r\n    isAuth,\r\n    isAdmin,\r\n    expressAsyncHandler(async (req, res) => {\r\n        const order = await Order.findById(req.params.id);\r\n        if (order) {\r\n        const deletedOrder = await order.remove();\r\n        res.send({ message: 'Product Deleted', product: deletedOrder });\r\n        } else {\r\n        res.status(404).send({ message: 'Order Not Found' });\r\n        }\r\n    })\r\n);\r\norderRouter.put('/:id/pay', isAuth, expressAsyncHandler(async (req, res) => {\r\n    const order = await Order.findById(req.params.id);\r\n    if (order) {\r\n        order.isPaid = true;\r\n        order.paidAt = Date.now();\r\n        order.payment.paymentResult = {\r\n            payerID: req.body.payerID,\r\n            paymentID: req.body.paymentID,\r\n            orderID: req.body.orderID,\r\n        };\r\n        const updatedOrder = await order.save();\r\n        res.send({ message: 'Order paid', order: updatedOrder});\r\n    } else {\r\n        res.status(404).send({ message: 'Order not found.'});\r\n    }\r\n}));\r\norderRouter.put(\r\n    '/:id/deliver',\r\n    isAuth,\r\n    expressAsyncHandler(async (req, res) => {\r\n      const order = await Order.findById(req.params.id);\r\n      if (order) {\r\n        order.isDelivered = true;\r\n        order.deliveredAt = Date.now();\r\n        const updatedOrder = await order.save();\r\n        res.send({ message: 'Order Delivered', order: updatedOrder });\r\n      } else {\r\n        res.status(404).send({ message: 'Order Not Found.' });\r\n      }\r\n    })\r\n  );\r\n\r\nexport default orderRouter;"]}},"mtime":1653232115368},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\models\\\\orderModel.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst orderSchema = new _mongoose.default.Schema({\n  orderItems: [{\n    name: {\n      type: String,\n      required: true\n    },\n    image: {\n      type: String,\n      required: true\n    },\n    price: {\n      type: Number,\n      required: true\n    },\n    qty: {\n      type: Number,\n      required: true\n    },\n    product: {\n      type: _mongoose.default.Schema.Types.ObjectId,\n      ref: 'Product',\n      required: true\n    }\n  }],\n  user: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  shipping: {\n    address: String,\n    city: String,\n    postalCode: String,\n    country: String\n  },\n  payment: {\n    paymentMethod: String,\n    paymentResult: {\n      orderID: String,\n      payerID: String,\n      paymentID: String\n    }\n  },\n  itemsPrice: Number,\n  taxPrice: Number,\n  shippingPrice: Number,\n  totalPrice: Number,\n  paidAt: Date,\n  isPaid: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  isDelivered: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  deliveredAt: Date\n}, {\n  timestamps: true\n});\n\nconst Order = _mongoose.default.model('Order', orderSchema);\n\nvar _default = Order;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyTW9kZWwuanMiXSwibmFtZXMiOlsib3JkZXJTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsIm9yZGVySXRlbXMiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiaW1hZ2UiLCJwcmljZSIsIk51bWJlciIsInF0eSIsInByb2R1Y3QiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwidXNlciIsInNoaXBwaW5nIiwiYWRkcmVzcyIsImNpdHkiLCJwb3N0YWxDb2RlIiwiY291bnRyeSIsInBheW1lbnQiLCJwYXltZW50TWV0aG9kIiwicGF5bWVudFJlc3VsdCIsIm9yZGVySUQiLCJwYXllcklEIiwicGF5bWVudElEIiwiaXRlbXNQcmljZSIsInRheFByaWNlIiwic2hpcHBpbmdQcmljZSIsInRvdGFsUHJpY2UiLCJwYWlkQXQiLCJEYXRlIiwiaXNQYWlkIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJpc0RlbGl2ZXJlZCIsImRlbGl2ZXJlZEF0IiwidGltZXN0YW1wcyIsIk9yZGVyIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLE1BQU1BLFdBQVcsR0FBRyxJQUFJQyxrQkFBU0MsTUFBYixDQUNoQjtBQUNJQyxFQUFBQSxVQUFVLEVBQUUsQ0FDUjtBQUNJQyxJQUFBQSxJQUFJLEVBQUU7QUFBQ0MsTUFBQUEsSUFBSSxFQUFFQyxNQUFQO0FBQWVDLE1BQUFBLFFBQVEsRUFBRTtBQUF6QixLQURWO0FBRUlDLElBQUFBLEtBQUssRUFBRTtBQUFDSCxNQUFBQSxJQUFJLEVBQUVDLE1BQVA7QUFBZUMsTUFBQUEsUUFBUSxFQUFFO0FBQXpCLEtBRlg7QUFHSUUsSUFBQUEsS0FBSyxFQUFFO0FBQUNKLE1BQUFBLElBQUksRUFBRUssTUFBUDtBQUFlSCxNQUFBQSxRQUFRLEVBQUU7QUFBekIsS0FIWDtBQUlJSSxJQUFBQSxHQUFHLEVBQUU7QUFBQ04sTUFBQUEsSUFBSSxFQUFFSyxNQUFQO0FBQWVILE1BQUFBLFFBQVEsRUFBRTtBQUF6QixLQUpUO0FBS0lLLElBQUFBLE9BQU8sRUFBRTtBQUNMUCxNQUFBQSxJQUFJLEVBQUVKLGtCQUFTQyxNQUFULENBQWdCVyxLQUFoQixDQUFzQkMsUUFEdkI7QUFFTEMsTUFBQUEsR0FBRyxFQUFFLFNBRkE7QUFHTFIsTUFBQUEsUUFBUSxFQUFFO0FBSEw7QUFMYixHQURRLENBRGhCO0FBY0lTLEVBQUFBLElBQUksRUFBRTtBQUFDWCxJQUFBQSxJQUFJLEVBQUVKLGtCQUFTQyxNQUFULENBQWdCVyxLQUFoQixDQUFzQkMsUUFBN0I7QUFBdUNDLElBQUFBLEdBQUcsRUFBRSxNQUE1QztBQUFvRFIsSUFBQUEsUUFBUSxFQUFFO0FBQTlELEdBZFY7QUFlSVUsRUFBQUEsUUFBUSxFQUFFO0FBQ05DLElBQUFBLE9BQU8sRUFBRVosTUFESDtBQUVOYSxJQUFBQSxJQUFJLEVBQUViLE1BRkE7QUFHTmMsSUFBQUEsVUFBVSxFQUFFZCxNQUhOO0FBSU5lLElBQUFBLE9BQU8sRUFBRWY7QUFKSCxHQWZkO0FBcUJJZ0IsRUFBQUEsT0FBTyxFQUFFO0FBQ0xDLElBQUFBLGFBQWEsRUFBRWpCLE1BRFY7QUFFTGtCLElBQUFBLGFBQWEsRUFBRTtBQUNYQyxNQUFBQSxPQUFPLEVBQUVuQixNQURFO0FBRVhvQixNQUFBQSxPQUFPLEVBQUVwQixNQUZFO0FBR1hxQixNQUFBQSxTQUFTLEVBQUVyQjtBQUhBO0FBRlYsR0FyQmI7QUE2QklzQixFQUFBQSxVQUFVLEVBQUVsQixNQTdCaEI7QUE4QkltQixFQUFBQSxRQUFRLEVBQUVuQixNQTlCZDtBQStCSW9CLEVBQUFBLGFBQWEsRUFBRXBCLE1BL0JuQjtBQWdDSXFCLEVBQUFBLFVBQVUsRUFBRXJCLE1BaENoQjtBQWlDSXNCLEVBQUFBLE1BQU0sRUFBRUMsSUFqQ1o7QUFrQ0lDLEVBQUFBLE1BQU0sRUFBRTtBQUFDN0IsSUFBQUEsSUFBSSxFQUFFOEIsT0FBUDtBQUFnQjVCLElBQUFBLFFBQVEsRUFBRSxJQUExQjtBQUFnQzZCLElBQUFBLE9BQU8sRUFBRTtBQUF6QyxHQWxDWjtBQW1DSUMsRUFBQUEsV0FBVyxFQUFFO0FBQUNoQyxJQUFBQSxJQUFJLEVBQUU4QixPQUFQO0FBQWdCNUIsSUFBQUEsUUFBUSxFQUFFLElBQTFCO0FBQWdDNkIsSUFBQUEsT0FBTyxFQUFFO0FBQXpDLEdBbkNqQjtBQW9DSUUsRUFBQUEsV0FBVyxFQUFFTDtBQXBDakIsQ0FEZ0IsRUF1Q2hCO0FBQ0lNLEVBQUFBLFVBQVUsRUFBRTtBQURoQixDQXZDZ0IsQ0FBcEI7O0FBMkNBLE1BQU1DLEtBQUssR0FBR3ZDLGtCQUFTd0MsS0FBVCxDQUFlLE9BQWYsRUFBd0J6QyxXQUF4QixDQUFkOztlQUNld0MsSyIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc0xvamluaGFcXGJhY2tlbmRcXG1vZGVsc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3Qgb3JkZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxyXG4gICAge1xyXG4gICAgICAgIG9yZGVySXRlbXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZToge3R5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgICAgICAgICAgICAgaW1hZ2U6IHt0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgICAgICAgICAgICAgIHByaWNlOiB7dHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICAgICAgICAgICAgICBxdHk6IHt0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnUHJvZHVjdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgdXNlcjoge3R5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnVXNlcicsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgICAgICBzaGlwcGluZzoge1xyXG4gICAgICAgICAgICBhZGRyZXNzOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIGNpdHk6IFN0cmluZyxcclxuICAgICAgICAgICAgcG9zdGFsQ29kZTogU3RyaW5nLFxyXG4gICAgICAgICAgICBjb3VudHJ5OiBTdHJpbmcsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYXltZW50OiB7XHJcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IFN0cmluZyxcclxuICAgICAgICAgICAgcGF5bWVudFJlc3VsdDoge1xyXG4gICAgICAgICAgICAgICAgb3JkZXJJRDogU3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgcGF5ZXJJRDogU3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudElEOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGl0ZW1zUHJpY2U6IE51bWJlcixcclxuICAgICAgICB0YXhQcmljZTogTnVtYmVyLFxyXG4gICAgICAgIHNoaXBwaW5nUHJpY2U6IE51bWJlcixcclxuICAgICAgICB0b3RhbFByaWNlOiBOdW1iZXIsXHJcbiAgICAgICAgcGFpZEF0OiBEYXRlLFxyXG4gICAgICAgIGlzUGFpZDoge3R5cGU6IEJvb2xlYW4sIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiBmYWxzZX0sXHJcbiAgICAgICAgaXNEZWxpdmVyZWQ6IHt0eXBlOiBCb29sZWFuLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogZmFsc2V9LFxyXG4gICAgICAgIGRlbGl2ZXJlZEF0OiBEYXRlLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0aW1lc3RhbXBzOiB0cnVlLFxyXG4gICAgfVxyXG4pO1xyXG5jb25zdCBPcmRlciA9IG1vbmdvb3NlLm1vZGVsKCdPcmRlcicsIG9yZGVyU2NoZW1hKTtcclxuZXhwb3J0IGRlZmF1bHQgT3JkZXI7Il19","map":{"version":3,"sources":["orderModel.js"],"names":["orderSchema","mongoose","Schema","orderItems","name","type","String","required","image","price","Number","qty","product","Types","ObjectId","ref","user","shipping","address","city","postalCode","country","payment","paymentMethod","paymentResult","orderID","payerID","paymentID","itemsPrice","taxPrice","shippingPrice","totalPrice","paidAt","Date","isPaid","Boolean","default","isDelivered","deliveredAt","timestamps","Order","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,WAAW,GAAG,IAAIC,kBAASC,MAAb,CAChB;AACIC,EAAAA,UAAU,EAAE,CACR;AACIC,IAAAA,IAAI,EAAE;AAACC,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,QAAQ,EAAE;AAAzB,KADV;AAEIC,IAAAA,KAAK,EAAE;AAACH,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,QAAQ,EAAE;AAAzB,KAFX;AAGIE,IAAAA,KAAK,EAAE;AAACJ,MAAAA,IAAI,EAAEK,MAAP;AAAeH,MAAAA,QAAQ,EAAE;AAAzB,KAHX;AAIII,IAAAA,GAAG,EAAE;AAACN,MAAAA,IAAI,EAAEK,MAAP;AAAeH,MAAAA,QAAQ,EAAE;AAAzB,KAJT;AAKIK,IAAAA,OAAO,EAAE;AACLP,MAAAA,IAAI,EAAEJ,kBAASC,MAAT,CAAgBW,KAAhB,CAAsBC,QADvB;AAELC,MAAAA,GAAG,EAAE,SAFA;AAGLR,MAAAA,QAAQ,EAAE;AAHL;AALb,GADQ,CADhB;AAcIS,EAAAA,IAAI,EAAE;AAACX,IAAAA,IAAI,EAAEJ,kBAASC,MAAT,CAAgBW,KAAhB,CAAsBC,QAA7B;AAAuCC,IAAAA,GAAG,EAAE,MAA5C;AAAoDR,IAAAA,QAAQ,EAAE;AAA9D,GAdV;AAeIU,EAAAA,QAAQ,EAAE;AACNC,IAAAA,OAAO,EAAEZ,MADH;AAENa,IAAAA,IAAI,EAAEb,MAFA;AAGNc,IAAAA,UAAU,EAAEd,MAHN;AAINe,IAAAA,OAAO,EAAEf;AAJH,GAfd;AAqBIgB,EAAAA,OAAO,EAAE;AACLC,IAAAA,aAAa,EAAEjB,MADV;AAELkB,IAAAA,aAAa,EAAE;AACXC,MAAAA,OAAO,EAAEnB,MADE;AAEXoB,MAAAA,OAAO,EAAEpB,MAFE;AAGXqB,MAAAA,SAAS,EAAErB;AAHA;AAFV,GArBb;AA6BIsB,EAAAA,UAAU,EAAElB,MA7BhB;AA8BImB,EAAAA,QAAQ,EAAEnB,MA9Bd;AA+BIoB,EAAAA,aAAa,EAAEpB,MA/BnB;AAgCIqB,EAAAA,UAAU,EAAErB,MAhChB;AAiCIsB,EAAAA,MAAM,EAAEC,IAjCZ;AAkCIC,EAAAA,MAAM,EAAE;AAAC7B,IAAAA,IAAI,EAAE8B,OAAP;AAAgB5B,IAAAA,QAAQ,EAAE,IAA1B;AAAgC6B,IAAAA,OAAO,EAAE;AAAzC,GAlCZ;AAmCIC,EAAAA,WAAW,EAAE;AAAChC,IAAAA,IAAI,EAAE8B,OAAP;AAAgB5B,IAAAA,QAAQ,EAAE,IAA1B;AAAgC6B,IAAAA,OAAO,EAAE;AAAzC,GAnCjB;AAoCIE,EAAAA,WAAW,EAAEL;AApCjB,CADgB,EAuChB;AACIM,EAAAA,UAAU,EAAE;AADhB,CAvCgB,CAApB;;AA2CA,MAAMC,KAAK,GAAGvC,kBAASwC,KAAT,CAAe,OAAf,EAAwBzC,WAAxB,CAAd;;eACewC,K","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\models\\","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst orderSchema = new mongoose.Schema(\r\n    {\r\n        orderItems: [\r\n            {\r\n                name: {type: String, required: true},\r\n                image: {type: String, required: true},\r\n                price: {type: Number, required: true},\r\n                qty: {type: Number, required: true},\r\n                product: {\r\n                    type: mongoose.Schema.Types.ObjectId,\r\n                    ref: 'Product',\r\n                    required: true,\r\n                },\r\n            },\r\n        ],\r\n        user: {type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true},\r\n        shipping: {\r\n            address: String,\r\n            city: String,\r\n            postalCode: String,\r\n            country: String,\r\n        },\r\n        payment: {\r\n            paymentMethod: String,\r\n            paymentResult: {\r\n                orderID: String,\r\n                payerID: String,\r\n                paymentID: String,\r\n            }\r\n        },\r\n        itemsPrice: Number,\r\n        taxPrice: Number,\r\n        shippingPrice: Number,\r\n        totalPrice: Number,\r\n        paidAt: Date,\r\n        isPaid: {type: Boolean, required: true, default: false},\r\n        isDelivered: {type: Boolean, required: true, default: false},\r\n        deliveredAt: Date,\r\n    },\r\n    {\r\n        timestamps: true,\r\n    }\r\n);\r\nconst Order = mongoose.model('Order', orderSchema);\r\nexport default Order;"]}},"mtime":1650139224451},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\productRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\n\nvar _utils = require(\"../utils\");\n\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst productRouter = _express.default.Router();\n\nproductRouter.get('/', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const products = await _productModel.default.find({});\n  res.send(products);\n}));\nproductRouter.get('/:id', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  res.send(product);\n}));\nproductRouter.post('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = new _productModel.default({\n    name: 'sample product',\n    description: 'sample desc',\n    category: 'sample category',\n    brand: 'sample brand',\n    image: '/images/product-1.jpg'\n  });\n  const createdProduct = await product.save();\n\n  if (createdProduct) {\n    res.status(201).send({\n      message: 'Product created',\n      product: createdProduct\n    });\n  } else {\n    res.status(500).send({\n      message: 'Error in creating product'\n    });\n  }\n}));\nproductRouter.put('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const productId = req.params.id;\n  const product = await _productModel.default.findById(productId);\n\n  if (product) {\n    product.name = req.body.name;\n    product.price = req.body.price;\n    product.image = req.body.image;\n    product.brand = req.body.brand;\n    product.category = req.body.category;\n    product.countInStock = req.body.countInStock;\n    product.description = req.body.description;\n    const updatedProduct = await product.save();\n\n    if (updatedProduct) {\n      res.send({\n        message: 'Product Updated',\n        product: updatedProduct\n      });\n    } else {\n      res.status(500).send({\n        message: 'Error in updating product'\n      });\n    }\n  } else {\n    res.status(404).send({\n      message: 'Product Not Found'\n    });\n  }\n}));\nproductRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n\n  if (product) {\n    const deletedProduct = await product.remove();\n    res.send({\n      message: 'Product Deleted',\n      product: deletedProduct\n    });\n  } else {\n    res.status(404).send({\n      message: 'Product Not Found'\n    });\n  }\n}));\nvar _default = productRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3RSb3V0ZXIuanMiXSwibmFtZXMiOlsicHJvZHVjdFJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJwcm9kdWN0cyIsIlByb2R1Y3QiLCJmaW5kIiwic2VuZCIsInByb2R1Y3QiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwicG9zdCIsImlzQXV0aCIsImlzQWRtaW4iLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsImJyYW5kIiwiaW1hZ2UiLCJjcmVhdGVkUHJvZHVjdCIsInNhdmUiLCJzdGF0dXMiLCJtZXNzYWdlIiwicHV0IiwicHJvZHVjdElkIiwiYm9keSIsInByaWNlIiwiY291bnRJblN0b2NrIiwidXBkYXRlZFByb2R1Y3QiLCJkZWxldGUiLCJkZWxldGVkUHJvZHVjdCIsInJlbW92ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsYUFBYSxHQUFHQyxpQkFBUUMsTUFBUixFQUF0Qjs7QUFDQUYsYUFBYSxDQUFDRyxHQUFkLENBQWtCLEdBQWxCLEVBQXVCLGtDQUFvQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDM0QsUUFBTUMsUUFBUSxHQUFHLE1BQU1DLHNCQUFRQyxJQUFSLENBQWEsRUFBYixDQUF2QjtBQUNBSCxFQUFBQSxHQUFHLENBQUNJLElBQUosQ0FBU0gsUUFBVDtBQUNILENBSHNCLENBQXZCO0FBSUFOLGFBQWEsQ0FBQ0csR0FBZCxDQUFrQixNQUFsQixFQUEwQixrQ0FBb0IsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQzlELFFBQU1LLE9BQU8sR0FBRyxNQUFNSCxzQkFBUUksUUFBUixDQUFpQlAsR0FBRyxDQUFDUSxNQUFKLENBQVdDLEVBQTVCLENBQXRCO0FBQ0FSLEVBQUFBLEdBQUcsQ0FBQ0ksSUFBSixDQUFTQyxPQUFUO0FBQ0gsQ0FIeUIsQ0FBMUI7QUFJQVYsYUFBYSxDQUFDYyxJQUFk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QUFDdEMsUUFBTUssT0FBTyxHQUFHLE1BQU1ILHNCQUFRSSxRQUFSLENBQWlCUCxHQUFHLENBQUNRLE1BQUosQ0FBV0MsRUFBNUIsQ0FBdEI7O0FBQ0EsTUFBSUgsT0FBSixFQUFhO0FBQ1gsVUFBTXVCLGNBQWMsR0FBRyxNQUFNdkIsT0FBTyxDQUFDd0IsTUFBUixFQUE3QjtBQUNBN0IsSUFBQUEsR0FBRyxDQUFDSSxJQUFKLENBQVM7QUFBRWdCLE1BQUFBLE9BQU8sRUFBRSxpQkFBWDtBQUE4QmYsTUFBQUEsT0FBTyxFQUFFdUI7QUFBdkMsS0FBVDtBQUNELEdBSEQsTUFHTztBQUNMNUIsSUFBQUEsR0FBRyxDQUFDbUIsTUFBSixDQUFXLEdBQVgsRUFBZ0JmLElBQWhCLENBQXFCO0FBQUVnQixNQUFBQSxPQUFPLEVBQUU7QUFBWCxLQUFyQjtBQUNEO0FBQ0YsQ0FSRCxDQUpKO2VBY2V6QixhIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcZ3VpbGhlcm1lXFxEb3dubG9hZHNcXGpzTG9qaW5oYVxcYmFja2VuZFxccm91dGVyc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSBcImV4cHJlc3MtYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBpc0F1dGgsIGlzQWRtaW4gfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCBQcm9kdWN0IGZyb20gXCIuLi9tb2RlbHMvcHJvZHVjdE1vZGVsXCI7XHJcblxyXG5jb25zdCBwcm9kdWN0Um91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxucHJvZHVjdFJvdXRlci5nZXQoJy8nLCBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBQcm9kdWN0LmZpbmQoe30pO1xyXG4gICAgcmVzLnNlbmQocHJvZHVjdHMpO1xyXG59KSk7XHJcbnByb2R1Y3RSb3V0ZXIuZ2V0KCcvOmlkJywgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgcmVzLnNlbmQocHJvZHVjdCk7XHJcbn0pKTtcclxucHJvZHVjdFJvdXRlci5wb3N0KFxyXG4gICAgJy8nLFxyXG4gICAgaXNBdXRoLFxyXG4gICAgaXNBZG1pbixcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IG5ldyBQcm9kdWN0KHtcclxuICAgICAgICAgICAgbmFtZTogJ3NhbXBsZSBwcm9kdWN0JyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdzYW1wbGUgZGVzYycsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnc2FtcGxlIGNhdGVnb3J5JyxcclxuICAgICAgICAgICAgYnJhbmQ6ICdzYW1wbGUgYnJhbmQnLFxyXG4gICAgICAgICAgICBpbWFnZTogJy9pbWFnZXMvcHJvZHVjdC0xLmpwZycsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZFByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0LnNhdmUoKTtcclxuICAgICAgICBpZiAoY3JlYXRlZFByb2R1Y3Qpe1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IG1lc3NhZ2U6ICdQcm9kdWN0IGNyZWF0ZWQnLCBwcm9kdWN0OiBjcmVhdGVkUHJvZHVjdH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogJ0Vycm9yIGluIGNyZWF0aW5nIHByb2R1Y3QnfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuKTtcclxucHJvZHVjdFJvdXRlci5wdXQoJy86aWQnLCBpc0F1dGgsIGlzQWRtaW4sIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBwcm9kdWN0SWQgPSByZXEucGFyYW1zLmlkO1xyXG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQocHJvZHVjdElkKTtcclxuICAgIGlmIChwcm9kdWN0KSB7XHJcbiAgICAgICAgcHJvZHVjdC5uYW1lID0gcmVxLmJvZHkubmFtZTtcclxuICAgICAgICBwcm9kdWN0LnByaWNlID0gcmVxLmJvZHkucHJpY2U7XHJcbiAgICAgICAgcHJvZHVjdC5pbWFnZSA9IHJlcS5ib2R5LmltYWdlO1xyXG4gICAgICAgIHByb2R1Y3QuYnJhbmQgPSByZXEuYm9keS5icmFuZDtcclxuICAgICAgICBwcm9kdWN0LmNhdGVnb3J5ID0gcmVxLmJvZHkuY2F0ZWdvcnk7XHJcbiAgICAgICAgcHJvZHVjdC5jb3VudEluU3RvY2sgPSByZXEuYm9keS5jb3VudEluU3RvY2s7XHJcbiAgICAgICAgcHJvZHVjdC5kZXNjcmlwdGlvbiA9IHJlcS5ib2R5LmRlc2NyaXB0aW9uO1xyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGVkUHJvZHVjdCA9IGF3YWl0IHByb2R1Y3Quc2F2ZSgpO1xyXG4gICAgICAgIGlmICh1cGRhdGVkUHJvZHVjdCl7XHJcbiAgICAgICAgICAgIHJlcy5zZW5kKHttZXNzYWdlOiAnUHJvZHVjdCBVcGRhdGVkJywgcHJvZHVjdDogdXBkYXRlZFByb2R1Y3R9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7bWVzc2FnZTogJ0Vycm9yIGluIHVwZGF0aW5nIHByb2R1Y3QnfSlcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHttZXNzYWdlOiAnUHJvZHVjdCBOb3QgRm91bmQnfSlcclxuICAgIH1cclxufSkpO1xyXG5wcm9kdWN0Um91dGVyLmRlbGV0ZShcclxuICAgICcvOmlkJyxcclxuICAgIGlzQXV0aCxcclxuICAgIGlzQWRtaW4sXHJcbiAgICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgICAgaWYgKHByb2R1Y3QpIHtcclxuICAgICAgICBjb25zdCBkZWxldGVkUHJvZHVjdCA9IGF3YWl0IHByb2R1Y3QucmVtb3ZlKCk7XHJcbiAgICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVjdCBEZWxldGVkJywgcHJvZHVjdDogZGVsZXRlZFByb2R1Y3QgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVjdCBOb3QgRm91bmQnIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4pO1xyXG5leHBvcnQgZGVmYXVsdCBwcm9kdWN0Um91dGVyOyJdfQ==","map":{"version":3,"sources":["productRouter.js"],"names":["productRouter","express","Router","get","req","res","products","Product","find","send","product","findById","params","id","post","isAuth","isAdmin","name","description","category","brand","image","createdProduct","save","status","message","put","productId","body","price","countInStock","updatedProduct","delete","deletedProduct","remove"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,aAAa,GAAGC,iBAAQC,MAAR,EAAtB;;AACAF,aAAa,CAACG,GAAd,CAAkB,GAAlB,EAAuB,kCAAoB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC3D,QAAMC,QAAQ,GAAG,MAAMC,sBAAQC,IAAR,CAAa,EAAb,CAAvB;AACAH,EAAAA,GAAG,CAACI,IAAJ,CAASH,QAAT;AACH,CAHsB,CAAvB;AAIAN,aAAa,CAACG,GAAd,CAAkB,MAAlB,EAA0B,kCAAoB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC9D,QAAMK,OAAO,GAAG,MAAMH,sBAAQI,QAAR,CAAiBP,GAAG,CAACQ,MAAJ,CAAWC,EAA5B,CAAtB;AACAR,EAAAA,GAAG,CAACI,IAAJ,CAASC,OAAT;AACH,CAHyB,CAA1B;AAIAV,aAAa,CAACc,IAAd,CACI,GADJ,EAEIC,aAFJ,EAGIC,cAHJ,EAII,kCAAoB,OAAOZ,GAAP,EAAYC,GAAZ,KAAoB;AACpC,QAAMK,OAAO,GAAG,IAAIH,qBAAJ,CAAY;AACxBU,IAAAA,IAAI,EAAE,gBADkB;AAExBC,IAAAA,WAAW,EAAE,aAFW;AAGxBC,IAAAA,QAAQ,EAAE,iBAHc;AAIxBC,IAAAA,KAAK,EAAE,cAJiB;AAKxBC,IAAAA,KAAK,EAAE;AALiB,GAAZ,CAAhB;AAOA,QAAMC,cAAc,GAAG,MAAMZ,OAAO,CAACa,IAAR,EAA7B;;AACA,MAAID,cAAJ,EAAmB;AACfjB,IAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBf,IAAhB,CAAqB;AAAEgB,MAAAA,OAAO,EAAE,iBAAX;AAA8Bf,MAAAA,OAAO,EAAEY;AAAvC,KAArB;AACH,GAFD,MAEO;AACHjB,IAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBf,IAAhB,CAAqB;AAAEgB,MAAAA,OAAO,EAAE;AAAX,KAArB;AACH;AACJ,CAdD,CAJJ;AAoBAzB,aAAa,CAAC0B,GAAd,CAAkB,MAAlB,EAA0BX,aAA1B,EAAkCC,cAAlC,EAA2C,kCAAoB,OAAOZ,GAAP,EAAYC,GAAZ,KAAoB;AAC/E,QAAMsB,SAAS,GAAGvB,GAAG,CAACQ,MAAJ,CAAWC,EAA7B;AACA,QAAMH,OAAO,GAAG,MAAMH,sBAAQI,QAAR,CAAiBgB,SAAjB,CAAtB;;AACA,MAAIjB,OAAJ,EAAa;AACTA,IAAAA,OAAO,CAACO,IAAR,GAAeb,GAAG,CAACwB,IAAJ,CAASX,IAAxB;AACAP,IAAAA,OAAO,CAACmB,KAAR,GAAgBzB,GAAG,CAACwB,IAAJ,CAASC,KAAzB;AACAnB,IAAAA,OAAO,CAACW,KAAR,GAAgBjB,GAAG,CAACwB,IAAJ,CAASP,KAAzB;AACAX,IAAAA,OAAO,CAACU,KAAR,GAAgBhB,GAAG,CAACwB,IAAJ,CAASR,KAAzB;AACAV,IAAAA,OAAO,CAACS,QAAR,GAAmBf,GAAG,CAACwB,IAAJ,CAAST,QAA5B;AACAT,IAAAA,OAAO,CAACoB,YAAR,GAAuB1B,GAAG,CAACwB,IAAJ,CAASE,YAAhC;AACApB,IAAAA,OAAO,CAACQ,WAAR,GAAsBd,GAAG,CAACwB,IAAJ,CAASV,WAA/B;AAEA,UAAMa,cAAc,GAAG,MAAMrB,OAAO,CAACa,IAAR,EAA7B;;AACA,QAAIQ,cAAJ,EAAmB;AACf1B,MAAAA,GAAG,CAACI,IAAJ,CAAS;AAACgB,QAAAA,OAAO,EAAE,iBAAV;AAA6Bf,QAAAA,OAAO,EAAEqB;AAAtC,OAAT;AACH,KAFD,MAEO;AACH1B,MAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBf,IAAhB,CAAqB;AAACgB,QAAAA,OAAO,EAAE;AAAV,OAArB;AACH;AACJ,GAfD,MAeO;AACHpB,IAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBf,IAAhB,CAAqB;AAACgB,MAAAA,OAAO,EAAE;AAAV,KAArB;AACH;AACJ,CArB0C,CAA3C;AAsBAzB,aAAa,CAACgC,MAAd,CACI,MADJ,EAEIjB,aAFJ,EAGIC,cAHJ,EAII,kCAAoB,OAAOZ,GAAP,EAAYC,GAAZ,KAAoB;AACtC,QAAMK,OAAO,GAAG,MAAMH,sBAAQI,QAAR,CAAiBP,GAAG,CAACQ,MAAJ,CAAWC,EAA5B,CAAtB;;AACA,MAAIH,OAAJ,EAAa;AACX,UAAMuB,cAAc,GAAG,MAAMvB,OAAO,CAACwB,MAAR,EAA7B;AACA7B,IAAAA,GAAG,CAACI,IAAJ,CAAS;AAAEgB,MAAAA,OAAO,EAAE,iBAAX;AAA8Bf,MAAAA,OAAO,EAAEuB;AAAvC,KAAT;AACD,GAHD,MAGO;AACL5B,IAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBf,IAAhB,CAAqB;AAAEgB,MAAAA,OAAO,EAAE;AAAX,KAArB;AACD;AACF,CARD,CAJJ;eAcezB,a","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\routers\\","sourcesContent":["import express from \"express\";\r\nimport expressAsyncHandler from \"express-async-handler\";\r\nimport { isAuth, isAdmin } from '../utils';\r\nimport Product from \"../models/productModel\";\r\n\r\nconst productRouter = express.Router();\r\nproductRouter.get('/', expressAsyncHandler(async (req, res) => {\r\n    const products = await Product.find({});\r\n    res.send(products);\r\n}));\r\nproductRouter.get('/:id', expressAsyncHandler(async (req, res) => {\r\n    const product = await Product.findById(req.params.id);\r\n    res.send(product);\r\n}));\r\nproductRouter.post(\r\n    '/',\r\n    isAuth,\r\n    isAdmin,\r\n    expressAsyncHandler(async (req, res) => {\r\n        const product = new Product({\r\n            name: 'sample product',\r\n            description: 'sample desc',\r\n            category: 'sample category',\r\n            brand: 'sample brand',\r\n            image: '/images/product-1.jpg',\r\n        });\r\n        const createdProduct = await product.save();\r\n        if (createdProduct){\r\n            res.status(201).send({ message: 'Product created', product: createdProduct});\r\n        } else {\r\n            res.status(500).send({ message: 'Error in creating product'});\r\n        }\r\n    })\r\n);\r\nproductRouter.put('/:id', isAuth, isAdmin, expressAsyncHandler(async (req, res) => {\r\n    const productId = req.params.id;\r\n    const product = await Product.findById(productId);\r\n    if (product) {\r\n        product.name = req.body.name;\r\n        product.price = req.body.price;\r\n        product.image = req.body.image;\r\n        product.brand = req.body.brand;\r\n        product.category = req.body.category;\r\n        product.countInStock = req.body.countInStock;\r\n        product.description = req.body.description;\r\n\r\n        const updatedProduct = await product.save();\r\n        if (updatedProduct){\r\n            res.send({message: 'Product Updated', product: updatedProduct});\r\n        } else {\r\n            res.status(500).send({message: 'Error in updating product'})\r\n        }\r\n    } else {\r\n        res.status(404).send({message: 'Product Not Found'})\r\n    }\r\n}));\r\nproductRouter.delete(\r\n    '/:id',\r\n    isAuth,\r\n    isAdmin,\r\n    expressAsyncHandler(async (req, res) => {\r\n      const product = await Product.findById(req.params.id);\r\n      if (product) {\r\n        const deletedProduct = await product.remove();\r\n        res.send({ message: 'Product Deleted', product: deletedProduct });\r\n      } else {\r\n        res.status(404).send({ message: 'Product Not Found' });\r\n      }\r\n    })\r\n);\r\nexport default productRouter;"]}},"mtime":1651420861677},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\models\\\\productModel.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst productSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  description: {\n    type: String,\n    required: true\n  },\n  category: {\n    type: String,\n    required: true\n  },\n  brand: {\n    type: String,\n    required: true\n  },\n  image: {\n    type: String,\n    required: true\n  },\n  price: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  countInStock: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  rating: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  numReviews: {\n    type: String,\n    default: 0,\n    required: true\n  }\n}, {\n  timestamps: true\n});\n\nconst Product = _mongoose.default.model('Product', productSchema);\n\nvar _default = Product;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3RNb2RlbC5qcyJdLCJuYW1lcyI6WyJwcm9kdWN0U2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsImJyYW5kIiwiaW1hZ2UiLCJwcmljZSIsIk51bWJlciIsImRlZmF1bHQiLCJjb3VudEluU3RvY2siLCJyYXRpbmciLCJudW1SZXZpZXdzIiwidGltZXN0YW1wcyIsIlByb2R1Y3QiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBRUEsTUFBTUEsYUFBYSxHQUFHLElBQUlDLGtCQUFTQyxNQUFiLENBQ2xCO0FBQ0FDLEVBQUFBLElBQUksRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUROO0FBRUFDLEVBQUFBLFdBQVcsRUFBRTtBQUFFSCxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUZiO0FBR0FFLEVBQUFBLFFBQVEsRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUhWO0FBSUFHLEVBQUFBLEtBQUssRUFBRTtBQUFFTCxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUpQO0FBS0FJLEVBQUFBLEtBQUssRUFBRTtBQUFFTixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUxQO0FBTUFLLEVBQUFBLEtBQUssRUFBRTtBQUFFUCxJQUFBQSxJQUFJLEVBQUVRLE1BQVI7QUFBZ0JDLElBQUFBLE9BQU8sRUFBRSxHQUF6QjtBQUE4QlAsSUFBQUEsUUFBUSxFQUFFO0FBQXhDLEdBTlA7QUFPQVEsRUFBQUEsWUFBWSxFQUFFO0FBQUVWLElBQUFBLElBQUksRUFBRVEsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFLENBQXpCO0FBQTRCUCxJQUFBQSxRQUFRLEVBQUU7QUFBdEMsR0FQZDtBQVFBUyxFQUFBQSxNQUFNLEVBQUU7QUFBRVgsSUFBQUEsSUFBSSxFQUFFUSxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUUsR0FBekI7QUFBK0JQLElBQUFBLFFBQVEsRUFBRTtBQUF6QyxHQVJSO0FBU0FVLEVBQUFBLFVBQVUsRUFBRTtBQUFFWixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JRLElBQUFBLE9BQU8sRUFBRSxDQUF6QjtBQUE0QlAsSUFBQUEsUUFBUSxFQUFFO0FBQXRDO0FBVFosQ0FEa0IsRUFZbEI7QUFBQ1csRUFBQUEsVUFBVSxFQUFFO0FBQWIsQ0Faa0IsQ0FBdEI7O0FBY0EsTUFBTUMsT0FBTyxHQUFHakIsa0JBQVNrQixLQUFULENBQWUsU0FBZixFQUEwQm5CLGFBQTFCLENBQWhCOztlQUNla0IsTyIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc0xvamluaGFcXGJhY2tlbmRcXG1vZGVsc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3QgcHJvZHVjdFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXHJcbiAgICB7XHJcbiAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgZGVzY3JpcHRpb246IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICBjYXRlZ29yeTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIGJyYW5kOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgaW1hZ2U6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICBwcmljZTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAuMCwgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgY291bnRJblN0b2NrOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCwgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgcmF0aW5nOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMC4wLCAgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgbnVtUmV2aWV3czogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IDAsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIH0sXHJcbiAgICB7dGltZXN0YW1wczogdHJ1ZX1cclxuKTtcclxuY29uc3QgUHJvZHVjdCA9IG1vbmdvb3NlLm1vZGVsKCdQcm9kdWN0JywgcHJvZHVjdFNjaGVtYSk7XHJcbmV4cG9ydCBkZWZhdWx0IFByb2R1Y3Q7Il19","map":{"version":3,"sources":["productModel.js"],"names":["productSchema","mongoose","Schema","name","type","String","required","description","category","brand","image","price","Number","default","countInStock","rating","numReviews","timestamps","Product","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,aAAa,GAAG,IAAIC,kBAASC,MAAb,CAClB;AACAC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GADN;AAEAC,EAAAA,WAAW,EAAE;AAAEH,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAFb;AAGAE,EAAAA,QAAQ,EAAE;AAAEJ,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAHV;AAIAG,EAAAA,KAAK,EAAE;AAAEL,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAJP;AAKAI,EAAAA,KAAK,EAAE;AAAEN,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GALP;AAMAK,EAAAA,KAAK,EAAE;AAAEP,IAAAA,IAAI,EAAEQ,MAAR;AAAgBC,IAAAA,OAAO,EAAE,GAAzB;AAA8BP,IAAAA,QAAQ,EAAE;AAAxC,GANP;AAOAQ,EAAAA,YAAY,EAAE;AAAEV,IAAAA,IAAI,EAAEQ,MAAR;AAAgBC,IAAAA,OAAO,EAAE,CAAzB;AAA4BP,IAAAA,QAAQ,EAAE;AAAtC,GAPd;AAQAS,EAAAA,MAAM,EAAE;AAAEX,IAAAA,IAAI,EAAEQ,MAAR;AAAgBC,IAAAA,OAAO,EAAE,GAAzB;AAA+BP,IAAAA,QAAQ,EAAE;AAAzC,GARR;AASAU,EAAAA,UAAU,EAAE;AAAEZ,IAAAA,IAAI,EAAEC,MAAR;AAAgBQ,IAAAA,OAAO,EAAE,CAAzB;AAA4BP,IAAAA,QAAQ,EAAE;AAAtC;AATZ,CADkB,EAYlB;AAACW,EAAAA,UAAU,EAAE;AAAb,CAZkB,CAAtB;;AAcA,MAAMC,OAAO,GAAGjB,kBAASkB,KAAT,CAAe,SAAf,EAA0BnB,aAA1B,CAAhB;;eACekB,O","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\models\\","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst productSchema = new mongoose.Schema(\r\n    {\r\n    name: { type: String, required: true},\r\n    description: { type: String, required: true},\r\n    category: { type: String, required: true},\r\n    brand: { type: String, required: true},\r\n    image: { type: String, required: true},\r\n    price: { type: Number, default: 0.0, required: true},\r\n    countInStock: { type: Number, default: 0, required: true},\r\n    rating: { type: Number, default: 0.0,  required: true},\r\n    numReviews: { type: String, default: 0, required: true},\r\n    },\r\n    {timestamps: true}\r\n);\r\nconst Product = mongoose.model('Product', productSchema);\r\nexport default Product;"]}},"mtime":1650575177281},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\uploadRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _multer = _interopRequireDefault(require(\"multer\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst storage = _multer.default.diskStorage({\n  destination(req, file, cb) {\n    cb(null, 'uploads/');\n  },\n\n  filename(req, file, cb) {\n    cb(null, `${Date.now()}.jpg`);\n  }\n\n});\n\nconst upload = (0, _multer.default)({\n  storage\n});\n\nconst uploadRouter = _express.default.Router();\n\nuploadRouter.post('/', _utils.isAuth, _utils.isAdmin, upload.single('image'), (req, res) => {\n  res.status(201).send({\n    image: `/${req.file.path}`\n  });\n});\nvar _default = uploadRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwbG9hZFJvdXRlci5qcyJdLCJuYW1lcyI6WyJzdG9yYWdlIiwibXVsdGVyIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwiRGF0ZSIsIm5vdyIsInVwbG9hZCIsInVwbG9hZFJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJwb3N0IiwiaXNBdXRoIiwiaXNBZG1pbiIsInNpbmdsZSIsInJlcyIsInN0YXR1cyIsInNlbmQiLCJpbWFnZSIsInBhdGgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLE9BQU8sR0FBR0MsZ0JBQU9DLFdBQVAsQ0FBbUI7QUFDL0JDLEVBQUFBLFdBQVcsQ0FBQ0MsR0FBRCxFQUFNQyxJQUFOLEVBQVlDLEVBQVosRUFBZ0I7QUFDdkJBLElBQUFBLEVBQUUsQ0FBQyxJQUFELEVBQU8sVUFBUCxDQUFGO0FBQ0gsR0FIOEI7O0FBSS9CQyxFQUFBQSxRQUFRLENBQUNILEdBQUQsRUFBTUMsSUFBTixFQUFZQyxFQUFaLEVBQWdCO0FBQ3BCQSxJQUFBQSxFQUFFLENBQUMsSUFBRCxFQUFRLEdBQUVFLElBQUksQ0FBQ0MsR0FBTCxFQUFXLE1BQXJCLENBQUY7QUFDSDs7QUFOOEIsQ0FBbkIsQ0FBaEI7O0FBUUEsTUFBTUMsTUFBTSxHQUFHLHFCQUFPO0FBQUNWLEVBQUFBO0FBQUQsQ0FBUCxDQUFmOztBQUNBLE1BQU1XLFlBQVksR0FBR0MsaUJBQVFDLE1BQVIsRUFBckI7O0FBRUFGLFlBQVksQ0FBQ0csSUFBYixDQUFrQixHQUFsQixFQUF1QkMsYUFBdkIsRUFBK0JDLGNBQS9CLEVBQXdDTixNQUFNLENBQUNPLE1BQVAsQ0FBYyxPQUFkLENBQXhDLEVBQWdFLENBQUNiLEdBQUQsRUFBTWMsR0FBTixLQUFjO0FBQzFFQSxFQUFBQSxHQUFHLENBQUNDLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFDQyxJQUFBQSxLQUFLLEVBQUcsSUFBR2pCLEdBQUcsQ0FBQ0MsSUFBSixDQUFTaUIsSUFBSztBQUExQixHQUFyQjtBQUNILENBRkQ7ZUFHZVgsWSIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc0xvamluaGFcXGJhY2tlbmRcXHJvdXRlcnNcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgbXVsdGVyIGZyb20gJ211bHRlcic7XHJcbmltcG9ydCB7IGlzQWRtaW4sIGlzQXV0aCB9IGZyb20gJy4uL3V0aWxzJztcclxuXHJcbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xyXG4gICAgZGVzdGluYXRpb24ocmVxLCBmaWxlLCBjYikge1xyXG4gICAgICAgIGNiKG51bGwsICd1cGxvYWRzLycpXHJcbiAgICB9LFxyXG4gICAgZmlsZW5hbWUocmVxLCBmaWxlLCBjYikge1xyXG4gICAgICAgIGNiKG51bGwsIGAke0RhdGUubm93KCl9LmpwZ2ApO1xyXG4gICAgfSxcclxufSk7XHJcbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7c3RvcmFnZX0pO1xyXG5jb25zdCB1cGxvYWRSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxudXBsb2FkUm91dGVyLnBvc3QoJy8nLCBpc0F1dGgsIGlzQWRtaW4sIHVwbG9hZC5zaW5nbGUoJ2ltYWdlJyksIChyZXEsIHJlcykgPT4ge1xyXG4gICAgcmVzLnN0YXR1cygyMDEpLnNlbmQoe2ltYWdlOiBgLyR7cmVxLmZpbGUucGF0aH1gfSk7XHJcbn0pO1xyXG5leHBvcnQgZGVmYXVsdCB1cGxvYWRSb3V0ZXI7Il19","map":{"version":3,"sources":["uploadRouter.js"],"names":["storage","multer","diskStorage","destination","req","file","cb","filename","Date","now","upload","uploadRouter","express","Router","post","isAuth","isAdmin","single","res","status","send","image","path"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,OAAO,GAAGC,gBAAOC,WAAP,CAAmB;AAC/BC,EAAAA,WAAW,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAgB;AACvBA,IAAAA,EAAE,CAAC,IAAD,EAAO,UAAP,CAAF;AACH,GAH8B;;AAI/BC,EAAAA,QAAQ,CAACH,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAgB;AACpBA,IAAAA,EAAE,CAAC,IAAD,EAAQ,GAAEE,IAAI,CAACC,GAAL,EAAW,MAArB,CAAF;AACH;;AAN8B,CAAnB,CAAhB;;AAQA,MAAMC,MAAM,GAAG,qBAAO;AAACV,EAAAA;AAAD,CAAP,CAAf;;AACA,MAAMW,YAAY,GAAGC,iBAAQC,MAAR,EAArB;;AAEAF,YAAY,CAACG,IAAb,CAAkB,GAAlB,EAAuBC,aAAvB,EAA+BC,cAA/B,EAAwCN,MAAM,CAACO,MAAP,CAAc,OAAd,CAAxC,EAAgE,CAACb,GAAD,EAAMc,GAAN,KAAc;AAC1EA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,IAAAA,KAAK,EAAG,IAAGjB,GAAG,CAACC,IAAJ,CAASiB,IAAK;AAA1B,GAArB;AACH,CAFD;eAGeX,Y","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\routers\\","sourcesContent":["import express from 'express';\r\nimport multer from 'multer';\r\nimport { isAdmin, isAuth } from '../utils';\r\n\r\nconst storage = multer.diskStorage({\r\n    destination(req, file, cb) {\r\n        cb(null, 'uploads/')\r\n    },\r\n    filename(req, file, cb) {\r\n        cb(null, `${Date.now()}.jpg`);\r\n    },\r\n});\r\nconst upload = multer({storage});\r\nconst uploadRouter = express.Router();\r\n\r\nuploadRouter.post('/', isAuth, isAdmin, upload.single('image'), (req, res) => {\r\n    res.status(201).send({image: `/${req.file.path}`});\r\n});\r\nexport default uploadRouter;"]}},"mtime":1651327448019},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\userRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\n\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst userRouter = _express.default.Router();\n\nuserRouter.get(\"/createadmin\", (0, _expressAsyncHandler.default)(async (req, res) => {\n  try {\n    const user = new _userModel.default({\n      name: 'admin',\n      email: 'admin@example.com',\n      password: 'jslojinha',\n      isAdmin: true\n    });\n    const createdUser = await user.save();\n    res.send(createdUser);\n  } catch (err) {\n    res.status(500).send({\n      message: err.message\n    });\n  }\n}));\nuserRouter.post('/signin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const signinUser = await _userModel.default.findOne({\n    email: req.body.email,\n    password: req.body.password\n  });\n\n  if (!signinUser) {\n    res.status(401).send({\n      message: 'Invalid Email or Password'\n    });\n  } else {\n    res.send({\n      _id: signinUser._id,\n      name: signinUser.name,\n      email: signinUser.email,\n      isAdmin: signinUser.isAdmin,\n      token: (0, _utils.generateToken)(signinUser)\n    });\n  }\n}));\nuserRouter.post('/register', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = new _userModel.default({\n    name: req.body.name,\n    email: req.body.email,\n    password: req.body.password\n  });\n  const createdUser = await user.save();\n\n  if (!createdUser) {\n    res.status(401).send({\n      message: 'Informações inválidas'\n    });\n  } else {\n    res.send({\n      _id: createdUser._id,\n      name: createdUser.name,\n      email: createdUser.email,\n      isAdmin: createdUser.isAdmin,\n      token: (0, _utils.generateToken)(createdUser)\n    });\n  }\n}));\nuserRouter.put('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = await _userModel.default.findById(req.params.id);\n\n  if (!user) {\n    res.status(401).send({\n      message: 'Usuário não encontrado'\n    });\n  } else {\n    user.name = req.body.name || user.name;\n    user.email = req.body.email || user.email;\n    user.password = req.body.password || user.password;\n    const updatedUser = await user.save();\n    res.send({\n      _id: updatedUser._id,\n      name: updatedUser.name,\n      email: updatedUser.email,\n      isAdmin: updatedUser.isAdmin,\n      token: (0, _utils.generateToken)(updatedUser)\n    });\n  }\n}));\nvar _default = userRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJSb3V0ZXIuanMiXSwibmFtZXMiOlsidXNlclJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJ1c2VyIiwiVXNlciIsIm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiaXNBZG1pbiIsImNyZWF0ZWRVc2VyIiwic2F2ZSIsInNlbmQiLCJlcnIiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsInNpZ25pblVzZXIiLCJmaW5kT25lIiwiYm9keSIsIl9pZCIsInRva2VuIiwicHV0IiwiaXNBdXRoIiwiZmluZEJ5SWQiLCJwYXJhbXMiLCJpZCIsInVwZGF0ZWRVc2VyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxVQUFVLEdBQUdDLGlCQUFRQyxNQUFSLEVBQW5COztBQUVBRixVQUFVLENBQUNHLEdBQVgsQ0FDSSxjQURKLEVBRUksa0NBQXFCLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUN6QyxNQUFJO0FBQ0EsVUFBTUMsSUFBSSxHQUFHLElBQUlDLGtCQUFKLENBQVM7QUFDbEJDLE1BQUFBLElBQUksRUFBRSxPQURZO0FBRWxCQyxNQUFBQSxLQUFLLEVBQUUsbUJBRlc7QUFHbEJDLE1BQUFBLFFBQVEsRUFBRSxXQUhRO0FBSWxCQyxNQUFBQSxPQUFPLEVBQUU7QUFKUyxLQUFULENBQWI7QUFNQSxVQUFNQyxXQUFXLEdBQUcsTUFBTU4sSUFBSSxDQUFDTyxJQUFMLEVBQTFCO0FBQ0FSLElBQUFBLEdBQUcsQ0FBQ1MsSUFBSixDQUFTRixXQUFUO0FBQ0gsR0FURCxDQVNFLE9BQU9HLEdBQVAsRUFBWTtBQUNWVixJQUFBQSxHQUFHLENBQUNXLE1BQUosQ0FBVyxHQUFYLEVBQWdCRixJQUFoQixDQUFxQjtBQUFFRyxNQUFBQSxPQUFPLEVBQUVGLEdBQUcsQ0FBQ0U7QUFBZixLQUFyQjtBQUNIO0FBQ0osQ0FiRyxDQUZKO0FBZ0JBakIsVUFBVSxDQUFDa0Is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SCxJQUFBQSxJQUFJLENBQUNJLFFBQUwsR0FBZ0JOLEdBQUcsQ0FBQ2lCLElBQUosQ0FBU1gsUUFBVCxJQUFxQkosSUFBSSxDQUFDSSxRQUExQztBQUNBLFVBQU1tQixXQUFXLEdBQUcsTUFBTXZCLElBQUksQ0FBQ08sSUFBTCxFQUExQjtBQUNBUixJQUFBQSxHQUFHLENBQUNTLElBQUosQ0FBUztBQUNUUSxNQUFBQSxHQUFHLEVBQUVPLFdBQVcsQ0FBQ1AsR0FEUjtBQUVUZCxNQUFBQSxJQUFJLEVBQUVxQixXQUFXLENBQUNyQixJQUZUO0FBR1RDLE1BQUFBLEtBQUssRUFBRW9CLFdBQVcsQ0FBQ3BCLEtBSFY7QUFJVEUsTUFBQUEsT0FBTyxFQUFFa0IsV0FBVyxDQUFDbEIsT0FKWjtBQUtUWSxNQUFBQSxLQUFLLEVBQUUsMEJBQWNNLFdBQWQ7QUFMRSxLQUFUO0FBT0g7QUFDSixDQW5CRyxDQUhKO2VBdUJlN0IsVSIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc0xvamluaGFcXGJhY2tlbmRcXHJvdXRlcnNcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xyXG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlck1vZGVsJztcclxuaW1wb3J0IHsgZ2VuZXJhdGVUb2tlbiwgaXNBdXRoIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuY29uc3QgdXNlclJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG51c2VyUm91dGVyLmdldChcclxuICAgIFwiL2NyZWF0ZWFkbWluXCIsIFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlciAoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdhZG1pbicsXHJcbiAgICAgICAgICAgIGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogJ2pzbG9qaW5oYScsXHJcbiAgICAgICAgICAgIGlzQWRtaW46IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKVxyXG4gICAgICAgIHJlcy5zZW5kKGNyZWF0ZWRVc2VyKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbn0pKTtcclxudXNlclJvdXRlci5wb3N0KFxyXG4gICAgJy9zaWduaW4nLCBcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIgKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNpZ25pblVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xyXG4gICAgICAgICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiByZXEuYm9keS5wYXNzd29yZFxyXG4gICAgfSk7XHJcbiAgICBpZiAoIXNpZ25pblVzZXIpe1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIEVtYWlsIG9yIFBhc3N3b3JkJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiBzaWduaW5Vc2VyLl9pZCxcclxuICAgICAgICBuYW1lOiBzaWduaW5Vc2VyLm5hbWUsXHJcbiAgICAgICAgZW1haWw6IHNpZ25pblVzZXIuZW1haWwsIFxyXG4gICAgICAgIGlzQWRtaW46IHNpZ25pblVzZXIuaXNBZG1pbixcclxuICAgICAgICB0b2tlbjogZ2VuZXJhdGVUb2tlbihzaWduaW5Vc2VyKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KSk7XHJcbnVzZXJSb3V0ZXIucG9zdChcclxuICAgICcvcmVnaXN0ZXInLCBcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIgKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHtcclxuICAgICAgICBuYW1lOiByZXEuYm9keS5uYW1lLFxyXG4gICAgICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcclxuICAgICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGNyZWF0ZWRVc2VyID0gYXdhaXQgdXNlci5zYXZlKCk7XHJcbiAgICBpZiAoIWNyZWF0ZWRVc2VyKXtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAnSW5mb3JtYcOnw7VlcyBpbnbDoWxpZGFzJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiBjcmVhdGVkVXNlci5faWQsXHJcbiAgICAgICAgbmFtZTogY3JlYXRlZFVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogY3JlYXRlZFVzZXIuZW1haWwsIFxyXG4gICAgICAgIGlzQWRtaW46IGNyZWF0ZWRVc2VyLmlzQWRtaW4sXHJcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4oY3JlYXRlZFVzZXIpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pKTtcclxudXNlclJvdXRlci5wdXQoXHJcbiAgICAnLzppZCcsXHJcbiAgICBpc0F1dGgsIFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlciAoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmICghdXNlcil7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoeyBcclxuICAgICAgICAgICAgbWVzc2FnZTogJ1VzdcOhcmlvIG7Do28gZW5jb250cmFkbydcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXNlci5uYW1lID0gcmVxLmJvZHkubmFtZSB8fCB1c2VyLm5hbWU7XHJcbiAgICAgICAgdXNlci5lbWFpbCA9IHJlcS5ib2R5LmVtYWlsIHx8IHVzZXIuZW1haWw7XHJcbiAgICAgICAgdXNlci5wYXNzd29yZCA9IHJlcS5ib2R5LnBhc3N3b3JkIHx8IHVzZXIucGFzc3dvcmQ7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKTtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiB1cGRhdGVkVXNlci5faWQsXHJcbiAgICAgICAgbmFtZTogdXBkYXRlZFVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogdXBkYXRlZFVzZXIuZW1haWwsIFxyXG4gICAgICAgIGlzQWRtaW46IHVwZGF0ZWRVc2VyLmlzQWRtaW4sXHJcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4odXBkYXRlZFVzZXIpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pKTtcclxuZXhwb3J0IGRlZmF1bHQgdXNlclJvdXRlcjsiXX0=","map":{"version":3,"sources":["userRouter.js"],"names":["userRouter","express","Router","get","req","res","user","User","name","email","password","isAdmin","createdUser","save","send","err","status","message","post","signinUser","findOne","body","_id","token","put","isAuth","findById","params","id","updatedUser"],"mappings":"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","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\routers\\","sourcesContent":["import express from 'express';\r\nimport expressAsyncHandler from 'express-async-handler';\r\nimport User from '../models/userModel';\r\nimport { generateToken, isAuth } from '../utils';\r\n\r\nconst userRouter = express.Router();\r\n\r\nuserRouter.get(\r\n    \"/createadmin\", \r\n    expressAsyncHandler (async (req, res) => {\r\n    try {\r\n        const user = new User({\r\n            name: 'admin',\r\n            email: 'admin@example.com',\r\n            password: 'jslojinha',\r\n            isAdmin: true,\r\n        });\r\n        const createdUser = await user.save()\r\n        res.send(createdUser);\r\n    } catch (err) {\r\n        res.status(500).send({ message: err.message });\r\n    }\r\n}));\r\nuserRouter.post(\r\n    '/signin', \r\n    expressAsyncHandler (async (req, res) => {\r\n        const signinUser = await User.findOne({\r\n            email: req.body.email,\r\n            password: req.body.password\r\n    });\r\n    if (!signinUser){\r\n        res.status(401).send({ \r\n            message: 'Invalid Email or Password'\r\n        });\r\n    } else {\r\n        res.send({\r\n        _id: signinUser._id,\r\n        name: signinUser.name,\r\n        email: signinUser.email, \r\n        isAdmin: signinUser.isAdmin,\r\n        token: generateToken(signinUser)\r\n        });\r\n    }\r\n}));\r\nuserRouter.post(\r\n    '/register', \r\n    expressAsyncHandler (async (req, res) => {\r\n    const user = new User({\r\n        name: req.body.name,\r\n        email: req.body.email,\r\n        password: req.body.password,\r\n    });\r\n    const createdUser = await user.save();\r\n    if (!createdUser){\r\n        res.status(401).send({ \r\n            message: 'Informações inválidas'\r\n        });\r\n    } else {\r\n        res.send({\r\n        _id: createdUser._id,\r\n        name: createdUser.name,\r\n        email: createdUser.email, \r\n        isAdmin: createdUser.isAdmin,\r\n        token: generateToken(createdUser)\r\n        });\r\n    }\r\n}));\r\nuserRouter.put(\r\n    '/:id',\r\n    isAuth, \r\n    expressAsyncHandler (async (req, res) => {\r\n    const user = await User.findById(req.params.id);\r\n    if (!user){\r\n        res.status(401).send({ \r\n            message: 'Usuário não encontrado'\r\n        });\r\n    } else {\r\n        user.name = req.body.name || user.name;\r\n        user.email = req.body.email || user.email;\r\n        user.password = req.body.password || user.password;\r\n        const updatedUser = await user.save();\r\n        res.send({\r\n        _id: updatedUser._id,\r\n        name: updatedUser.name,\r\n        email: updatedUser.email, \r\n        isAdmin: updatedUser.isAdmin,\r\n        token: generateToken(updatedUser)\r\n        });\r\n    }\r\n}));\r\nexport default userRouter;"]}},"mtime":1649959603881},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\models\\\\userModel.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    index: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  isAdmin: {\n    type: Boolean,\n    required: true,\n    default: false\n  }\n});\n\nconst User = _mongoose.default.model('User', userSchema);\n\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJNb2RlbC5qcyJdLCJuYW1lcyI6WyJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJpbmRleCIsInVuaXF1ZSIsInBhc3N3b3JkIiwiaXNBZG1pbiIsIkJvb2xlYW4iLCJkZWZhdWx0IiwiVXNlciIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxNQUFNQSxVQUFVLEdBQUcsSUFBSUMsa0JBQVNDLE1BQWIsQ0FBb0I7QUFDbkNDLEVBQUFBLElBQUksRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUQ2QjtBQUVuQ0MsRUFBQUEsS0FBSyxFQUFFO0FBQ0hILElBQUFBLElBQUksRUFBRUMsTUFESDtBQUVIQyxJQUFBQSxRQUFRLEVBQUUsSUFGUDtBQUdIRSxJQUFBQSxLQUFLLEVBQUUsSUFISjtBQUlIQyxJQUFBQSxNQUFNLEVBQUU7QUFKTCxHQUY0QjtBQVFuQ0MsRUFBQUEsUUFBUSxFQUFFO0FBQUVOLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsUUFBUSxFQUFFO0FBQTFCLEdBUnlCO0FBU25DSyxFQUFBQSxPQUFPLEVBQUU7QUFBRVAsSUFBQUEsSUFBSSxFQUFFUSxPQUFSO0FBQWlCTixJQUFBQSxRQUFRLEVBQUUsSUFBM0I7QUFBaUNPLElBQUFBLE9BQU8sRUFBRTtBQUExQztBQVQwQixDQUFwQixDQUFuQjs7QUFXQSxNQUFNQyxJQUFJLEdBQUdiLGtCQUFTYyxLQUFULENBQWUsTUFBZixFQUF1QmYsVUFBdkIsQ0FBYjs7ZUFDZWMsSSIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc0xvamluaGFcXGJhY2tlbmRcXG1vZGVsc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICBlbWFpbDoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZywgXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsIFxyXG4gICAgICAgIGluZGV4OiB0cnVlLCBcclxuICAgICAgICB1bmlxdWU6IHRydWVcclxuICAgIH0sXHJcbiAgICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIGlzQWRtaW46IHsgdHlwZTogQm9vbGVhbiwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IGZhbHNlfSxcclxufSk7XHJcbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpO1xyXG5leHBvcnQgZGVmYXVsdCBVc2VyOyJdfQ==","map":{"version":3,"sources":["userModel.js"],"names":["userSchema","mongoose","Schema","name","type","String","required","email","index","unique","password","isAdmin","Boolean","default","User","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,UAAU,GAAG,IAAIC,kBAASC,MAAb,CAAoB;AACnCC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAD6B;AAEnCC,EAAAA,KAAK,EAAE;AACHH,IAAAA,IAAI,EAAEC,MADH;AAEHC,IAAAA,QAAQ,EAAE,IAFP;AAGHE,IAAAA,KAAK,EAAE,IAHJ;AAIHC,IAAAA,MAAM,EAAE;AAJL,GAF4B;AAQnCC,EAAAA,QAAQ,EAAE;AAAEN,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GARyB;AASnCK,EAAAA,OAAO,EAAE;AAAEP,IAAAA,IAAI,EAAEQ,OAAR;AAAiBN,IAAAA,QAAQ,EAAE,IAA3B;AAAiCO,IAAAA,OAAO,EAAE;AAA1C;AAT0B,CAApB,CAAnB;;AAWA,MAAMC,IAAI,GAAGb,kBAASc,KAAT,CAAe,MAAf,EAAuBf,UAAvB,CAAb;;eACec,I","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\models\\","sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst userSchema = new mongoose.Schema({\r\n    name: { type: String, required: true},\r\n    email: {\r\n        type: String, \r\n        required: true, \r\n        index: true, \r\n        unique: true\r\n    },\r\n    password: { type: String, required: true},\r\n    isAdmin: { type: Boolean, required: true, default: false},\r\n});\r\nconst User = mongoose.model('User', userSchema);\r\nexport default User;"]}},"mtime":1649779361062},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\utils.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAuth = exports.isAdmin = exports.generateToken = void 0;\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_dotenv.default.config();\n\nconst generateToken = user => _jsonwebtoken.default.sign({\n  _id: user._id,\n  name: user.name,\n  email: user.email,\n  isAdmin: user.isAdmin\n}, process.env.JWT_SECRET);\n\nexports.generateToken = generateToken;\n\nconst isAuth = (req, res, next) => {\n  const bearerToken = req.headers.authorization;\n\n  if (!bearerToken) {\n    res.status(401).send({\n      message: 'token is not supplied'\n    });\n  } else {\n    const token = bearerToken.slice(7, bearerToken.length);\n\n    _jsonwebtoken.default.verify(token, process.env.JWT_SECRET, (err, data) => {\n      if (err) {\n        res.status(401).send({\n          message: 'invalid token'\n        });\n      } else {\n        req.user = data;\n        next();\n      }\n    });\n  }\n};\n\nexports.isAuth = isAuth;\n\nconst isAdmin = (req, res, next) => {\n  if (req.user && req.user.isAdmin) {\n    next();\n  } else {\n    res.status(401).send({\n      message: 'Token is not valid for admin user'\n    });\n  }\n};\n\nexports.isAdmin = isAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsImdlbmVyYXRlVG9rZW4iLCJ1c2VyIiwiand0Iiwic2lnbiIsIl9pZCIsIm5hbWUiLCJlbWFpbCIsImlzQWRtaW4iLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImlzQXV0aCIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJUb2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhdHVzIiwic2VuZCIsIm1lc3NhZ2UiLCJ0b2tlbiIsInNsaWNlIiwibGVuZ3RoIiwidmVyaWZ5IiwiZXJyIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUFBLGdCQUFPQyxNQUFQOztBQUVPLE1BQU1DLGFBQWEsR0FBSUMsSUFBRCxJQUFVQyxzQkFBSUMsSUFBSixDQUNuQztBQUNJQyxFQUFBQSxHQUFHLEVBQUVILElBQUksQ0FBQ0csR0FEZDtBQUVJQyxFQUFBQSxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFGZjtBQUdJQyxFQUFBQSxLQUFLLEVBQUVMLElBQUksQ0FBQ0ssS0FIaEI7QUFJSUMsRUFBQUEsT0FBTyxFQUFFTixJQUFJLENBQUNNO0FBSmxCLENBRG1DLEVBT25DQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFQdUIsQ0FBaEM7Ozs7QUFTQSxNQUFNQyxNQUFNLEdBQUcsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7QUFDdEMsUUFBTUMsV0FBVyxHQUFHSCxHQUFHLENBQUNJLE9BQUosQ0FBWUMsYUFBaEM7O0FBQ0EsTUFBSSxDQUFDRixXQUFMLEVBQWtCO0FBQ2ZGLElBQUFBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVDLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQXJCO0FBQ0YsR0FGRCxNQUVPO0FBQ0gsVUFBTUMsS0FBSyxHQUFHTixXQUFXLENBQUNPLEtBQVosQ0FBa0IsQ0FBbEIsRUFBcUJQLFdBQVcsQ0FBQ1EsTUFBakMsQ0FBZDs7QUFDQXJCLDBCQUFJc0IsTUFBSixDQUFXSCxLQUFYLEVBQWtCYixPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUIsRUFBMEMsQ0FBQ2UsR0FBRCxFQUFNQyxJQUFOLEtBQWU7QUFDckQsVUFBSUQsR0FBSixFQUFTO0FBQ0xaLFFBQUFBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUNDLFVBQUFBLE9BQU8sRUFBRTtBQUFWLFNBQXJCO0FBQ0gsT0FGRCxNQUVPO0FBQ0hSLFFBQUFBLEdBQUcsQ0FBQ1gsSUFBSixHQUFXeUIsSUFBWDtBQUNBWixRQUFBQSxJQUFJO0FBQ1A7QUFDSixLQVBEO0FBUUg7QUFDSixDQWZNOzs7O0FBZ0JBLE1BQU1QLE9BQU8sR0FBRyxDQUFDSyxHQUFELEVBQU1DLEdBQU4sRUFBV0MsSUFBWCxLQUFvQjtBQUN2QyxNQUFJRixHQUFHLENBQUNYLElBQUosSUFBWVcsR0FBRyxDQUFDWCxJQUFKLENBQVNNLE9BQXpCLEVBQWlDO0FBQzdCTyxJQUFBQSxJQUFJO0FBQ1AsR0FGRCxNQUVPO0FBQ0hELElBQUFBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVDLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQXJCO0FBQ0g7QUFDSixDQU5NIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcZ3VpbGhlcm1lXFxEb3dubG9hZHNcXGpzTG9qaW5oYVxcYmFja2VuZFxcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7XHJcblxyXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVUb2tlbiA9ICh1c2VyKSA9PiBqd3Quc2lnbihcclxuICAgIHtcclxuICAgICAgICBfaWQ6IHVzZXIuX2lkLFxyXG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICBpc0FkbWluOiB1c2VyLmlzQWRtaW5cclxuICAgIH0sXHJcbiAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVUXHJcbik7XHJcbmV4cG9ydCBjb25zdCBpc0F1dGggPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIGNvbnN0IGJlYXJlclRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuICAgIGlmICghYmVhcmVyVG9rZW4pIHtcclxuICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogJ3Rva2VuIGlzIG5vdCBzdXBwbGllZCcgfSkgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gYmVhcmVyVG9rZW4uc2xpY2UoNywgYmVhcmVyVG9rZW4ubGVuZ3RoKTtcclxuICAgICAgICBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCAoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHttZXNzYWdlOiAnaW52YWxpZCB0b2tlbid9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlcS51c2VyID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIG5leHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn07XHJcbmV4cG9ydCBjb25zdCBpc0FkbWluID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgICBpZiAocmVxLnVzZXIgJiYgcmVxLnVzZXIuaXNBZG1pbil7XHJcbiAgICAgICAgbmV4dCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IG1lc3NhZ2U6ICdUb2tlbiBpcyBub3QgdmFsaWQgZm9yIGFkbWluIHVzZXInfSk7XHJcbiAgICB9XHJcbn07Il19","map":{"version":3,"sources":["utils.js"],"names":["dotenv","config","generateToken","user","jwt","sign","_id","name","email","isAdmin","process","env","JWT_SECRET","isAuth","req","res","next","bearerToken","headers","authorization","status","send","message","token","slice","length","verify","err","data"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEAA,gBAAOC,MAAP;;AAEO,MAAMC,aAAa,GAAIC,IAAD,IAAUC,sBAAIC,IAAJ,CACnC;AACIC,EAAAA,GAAG,EAAEH,IAAI,CAACG,GADd;AAEIC,EAAAA,IAAI,EAAEJ,IAAI,CAACI,IAFf;AAGIC,EAAAA,KAAK,EAAEL,IAAI,CAACK,KAHhB;AAIIC,EAAAA,OAAO,EAAEN,IAAI,CAACM;AAJlB,CADmC,EAOnCC,OAAO,CAACC,GAAR,CAAYC,UAPuB,CAAhC;;;;AASA,MAAMC,MAAM,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACtC,QAAMC,WAAW,GAAGH,GAAG,CAACI,OAAJ,CAAYC,aAAhC;;AACA,MAAI,CAACF,WAAL,EAAkB;AACfF,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB;AACF,GAFD,MAEO;AACH,UAAMC,KAAK,GAAGN,WAAW,CAACO,KAAZ,CAAkB,CAAlB,EAAqBP,WAAW,CAACQ,MAAjC,CAAd;;AACArB,0BAAIsB,MAAJ,CAAWH,KAAX,EAAkBb,OAAO,CAACC,GAAR,CAAYC,UAA9B,EAA0C,CAACe,GAAD,EAAMC,IAAN,KAAe;AACrD,UAAID,GAAJ,EAAS;AACLZ,QAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAE;AAAV,SAArB;AACH,OAFD,MAEO;AACHR,QAAAA,GAAG,CAACX,IAAJ,GAAWyB,IAAX;AACAZ,QAAAA,IAAI;AACP;AACJ,KAPD;AAQH;AACJ,CAfM;;;;AAgBA,MAAMP,OAAO,GAAG,CAACK,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACvC,MAAIF,GAAG,CAACX,IAAJ,IAAYW,GAAG,CAACX,IAAJ,CAASM,OAAzB,EAAiC;AAC7BO,IAAAA,IAAI;AACP,GAFD,MAEO;AACHD,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB;AACH;AACJ,CANM","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\","sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nexport const generateToken = (user) => jwt.sign(\r\n    {\r\n        _id: user._id,\r\n        name: user.name,\r\n        email: user.email,\r\n        isAdmin: user.isAdmin\r\n    },\r\n    process.env.JWT_SECRET\r\n);\r\nexport const isAuth = (req, res, next) => {\r\n    const bearerToken = req.headers.authorization;\r\n    if (!bearerToken) {\r\n       res.status(401).send({ message: 'token is not supplied' }) \r\n    } else {\r\n        const token = bearerToken.slice(7, bearerToken.length);\r\n        jwt.verify(token, process.env.JWT_SECRET, (err, data) => {\r\n            if (err) {\r\n                res.status(401).send({message: 'invalid token'});\r\n            } else {\r\n                req.user = data;\r\n                next();\r\n            }\r\n        })\r\n    }\r\n};\r\nexport const isAdmin = (req, res, next) => {\r\n    if (req.user && req.user.isAdmin){\r\n        next();\r\n    } else {\r\n        res.status(401).send({ message: 'Token is not valid for admin user'});\r\n    }\r\n};"]}},"mtime":1654431312400},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\orderRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\n\nvar _orderModel = _interopRequireDefault(require(\"../models/orderModel\"));\n\nvar _utils = require(\"../utils\");\n\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\n\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst orderRouter = _express.default.Router();\n\norderRouter.get('/summary', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.aggregate([{\n    $group: {\n      _id: null,\n      numOrders: {\n        $sum: 1\n      },\n      totalSales: {\n        $sum: '$totalPrice'\n      }\n    }\n  }]);\n  const users = await _userModel.default.aggregate([{\n    $group: {\n      _id: null,\n      numUsers: {\n        $sum: 1\n      }\n    }\n  }]);\n  const dailyOrders = await _orderModel.default.aggregate([{\n    $group: {\n      _id: {\n        $dateToString: {\n          format: '%Y-%m-%d',\n          date: '$createdAt'\n        }\n      },\n      orders: {\n        $sum: 1\n      },\n      sales: {\n        $sum: '$totalprice'\n      }\n    }\n  }]);\n  const productCategories = await _productModel.default.aggregate([{\n    $group: {\n      _id: '$category',\n      count: {\n        $sum: 1\n      }\n    }\n  }]);\n  res.send({\n    users,\n    orders: orders.length === 0 ? [{\n      numOrders: 0,\n      totalSales: 0\n    }] : orders,\n    dailyOrders,\n    productCategories\n  });\n}));\norderRouter.get('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({}).populate('user');\n  res.send(orders);\n}));\norderRouter.get('/mine', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({\n    user: req.user._id\n  });\n  res.send(orders);\n}));\norderRouter.get('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n\n  if (order) {\n    res.send(order);\n  } else {\n    res.status(404).send({\n      message: 'Order Not found'\n    });\n  }\n}));\norderRouter.post('/', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = new _orderModel.default({\n    orderItems: req.body.orderItems,\n    user: req.user._id,\n    shipping: req.body.shipping,\n    payment: req.body.payment,\n    itemsPrice: req.body.itemsPrice,\n    taxPrice: req.body.taxPrice,\n    shippingPrice: req.body.shippingPrice,\n    totalPrice: req.body.totalPrice\n  });\n  const createdOrder = await order.save();\n  res.status(201).send({\n    message: 'New order Created',\n    order: createdOrder\n  });\n}));\norderRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n\n  if (order) {\n    const deletedOrder = await order.remove();\n    res.send({\n      message: 'Product Deleted',\n      product: deletedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found'\n    });\n  }\n}));\norderRouter.put('/:id/pay', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n\n  if (order) {\n    order.isPaid = true;\n    order.paidAt = Date.now();\n    order.payment.paymentResult = {\n      payerID: req.body.payerID,\n      paymentID: req.body.paymentID,\n      orderID: req.body.orderID\n    };\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order paid',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order not found.'\n    });\n  }\n}));\norderRouter.put('/:id/deliver', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n\n  if (order) {\n    order.isDelivered = true;\n    order.deliveredAt = Date.now();\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order Delivered',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found.'\n    });\n  }\n}));\nvar _default = orderRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyUm91dGVyLmpzIl0sIm5hbWVzIjpbIm9yZGVyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImlzQXV0aCIsImlzQWRtaW4iLCJyZXEiLCJyZXMiLCJvcmRlcnMiLCJPcmRlciIsImFnZ3JlZ2F0ZSIsIiRncm91cCIsIl9pZCIsIm51bU9yZGVycyIsIiRzdW0iLCJ0b3RhbFNhbGVzIiwidXNlcnMiLCJVc2VyIiwibnVtVXNlcnMiLCJkYWlseU9yZGVycyIsIiRkYXRlVG9TdHJpbmciLCJmb3JtYXQiLCJkYXRlIiwic2FsZXMiLCJwcm9kdWN0Q2F0ZWdvcmllcyIsIlByb2R1Y3QiLCJjb3VudCIsInNlbmQiLCJsZW5ndGgiLCJmaW5kIiwicG9wdWxhdGUiLCJ1c2VyIiwib3JkZXIiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwic3RhdHVzIiwibWVzc2FnZSIsInBvc3QiLCJvcmRlckl0ZW1zIiwiYm9keSIsInNoaXBwaW5nIiwicGF5bWVudCIsIml0ZW1zUHJpY2UiLCJ0YXhQcmljZSIsInNoaXBwaW5nUHJpY2UiLCJ0b3RhbFByaWNlIiwiY3JlYXRlZE9yZGVyIiwic2F2ZSIsImRlbGV0ZSIsImRlbGV0ZWRPcmRlciIsInJlbW92ZSIsInByb2R1Y3QiLCJwdXQiLCJpc1BhaWQiLCJwYWlkQXQiLCJEYXRlIiwibm93IiwicGF5bWVudFJlc3VsdCIsInBheWVySUQiLCJwYXltZW50SUQiLCJvcmRlcklEIiwidXBkYXRlZE9yZGVyIiwiaXNEZWxpdmVyZWQiLCJkZWxpdmVyZWRBdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsV0FBVyxHQUFHQyxpQkFBUUMsTUFBUixFQUFwQjs7QUFFQUYsV0FBVyxDQUFDRyxHQUFaLENBQ0ksVUFESixFQUVJQyxhQUZKLEVBR0lDLGNBSEosRUFJSSxrQ0FBb0IsT0FBT0MsR0FBUCxFQUFXQyxHQUFYLEtBQW1CO0FBQ3ZD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SixDQUFXLEdBQVgsRUFBZ0JULElBQWhCLENBQXFCO0FBQUVVLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQXJCO0FBQ0Q7QUFDRixDQVZELENBSEo7ZUFnQmVyQyxXIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcZ3VpbGhlcm1lXFxEb3dubG9hZHNcXGpzTG9qaW5oYVxcYmFja2VuZFxccm91dGVyc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSBcImV4cHJlc3MtYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgT3JkZXIgZnJvbSBcIi4uL21vZGVscy9vcmRlck1vZGVsXCI7XHJcbmltcG9ydCB7aXNBZG1pbiwgaXNBdXRofSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyTW9kZWwnO1xyXG5pbXBvcnQgUHJvZHVjdCBmcm9tICcuLi9tb2RlbHMvcHJvZHVjdE1vZGVsJ1xyXG5cclxuY29uc3Qgb3JkZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxub3JkZXJSb3V0ZXIuZ2V0KFxyXG4gICAgJy9zdW1tYXJ5JywgXHJcbiAgICBpc0F1dGgsIFxyXG4gICAgaXNBZG1pbiwgXHJcbiAgICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEscmVzKSA9PiB7XHJcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBPcmRlci5hZ2dyZWdhdGUoW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJGdyb3VwOiB7XHJcbiAgICAgICAgICAgIF9pZDogbnVsbCxcclxuICAgICAgICAgICAgbnVtT3JkZXJzOiB7ICRzdW06IDEgfSxcclxuICAgICAgICAgICAgdG90YWxTYWxlczogeyAkc3VtOiAnJHRvdGFsUHJpY2UnIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBdKTtcclxuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5hZ2dyZWdhdGUoW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJGdyb3VwOiB7XHJcbiAgICAgICAgICAgIF9pZDogbnVsbCxcclxuICAgICAgICAgICAgbnVtVXNlcnM6IHsgJHN1bTogMSB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICBdKTtcclxuICAgIGNvbnN0IGRhaWx5T3JkZXJzID0gYXdhaXQgT3JkZXIuYWdncmVnYXRlKFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICRncm91cDoge1xyXG4gICAgICAgICAgICAgICAgX2lkOiB7ICRkYXRlVG9TdHJpbmc6IHsgZm9ybWF0OiAnJVktJW0tJWQnLCBkYXRlOiAnJGNyZWF0ZWRBdCcgfSB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJzOiB7ICRzdW06IDEgfSxcclxuICAgICAgICAgICAgICAgIHNhbGVzOiB7ICRzdW06ICckdG90YWxwcmljZScgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgXSk7XHJcbiAgICBjb25zdCBwcm9kdWN0Q2F0ZWdvcmllcyA9IGF3YWl0IFByb2R1Y3QuYWdncmVnYXRlKFtcclxuICAgICAge1xyXG4gICAgICAgICRncm91cDoge1xyXG4gICAgICAgICAgICBfaWQ6ICckY2F0ZWdvcnknLFxyXG4gICAgICAgICAgICBjb3VudDogeyRzdW06IDF9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICBdKTtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgICAgIHVzZXJzLFxyXG4gICAgICAgICAgICBvcmRlcnM6IG9yZGVycy5sZW5ndGggPT09IDAgPyBbe251bU9yZGVyczogMCwgdG90YWxTYWxlczogMH1dIDogb3JkZXJzLFxyXG4gICAgICAgICAgICBkYWlseU9yZGVycyxcclxuICAgICAgICAgICAgcHJvZHVjdENhdGVnb3JpZXNcclxuICAgICAgICB9KTtcclxufSkpO1xyXG5vcmRlclJvdXRlci5nZXQoXHJcbiAgICAnLycsIFxyXG4gICAgaXNBdXRoLCBcclxuICAgIGlzQWRtaW4sIFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgICAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBPcmRlci5maW5kKHt9KS5wb3B1bGF0ZSgndXNlcicpO1xyXG4gICAgICAgIHJlcy5zZW5kKG9yZGVycyk7XHJcbn0pKTtcclxub3JkZXJSb3V0ZXIuZ2V0KCcvbWluZScsIGlzQXV0aCwgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IE9yZGVyLmZpbmQoe3VzZXI6IHJlcS51c2VyLl9pZH0pO1xyXG4gICAgcmVzLnNlbmQob3JkZXJzKTtcclxufSkpO1xyXG5vcmRlclJvdXRlci5nZXQoXHJcbiAgICAnLzppZCcsXHJcbiAgICBpc0F1dGgsXHJcbiAgICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcbiAgICAgICAgaWYgKG9yZGVyKSB7XHJcbiAgICAgICAgICAgIHJlcy5zZW5kKG9yZGVyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgZm91bmQnIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbik7XHJcbm9yZGVyUm91dGVyLnBvc3QoXHJcbiAgICAnLycsIFxyXG4gICAgaXNBdXRoLCBcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBuZXcgT3JkZXIoe1xyXG4gICAgICAgICAgICBvcmRlckl0ZW1zOiByZXEuYm9keS5vcmRlckl0ZW1zLFxyXG4gICAgICAgICAgICB1c2VyOiByZXEudXNlci5faWQsXHJcbiAgICAgICAgICAgIHNoaXBwaW5nOiByZXEuYm9keS5zaGlwcGluZyxcclxuICAgICAgICAgICAgcGF5bWVudDogcmVxLmJvZHkucGF5bWVudCxcclxuICAgICAgICAgICAgaXRlbXNQcmljZTogcmVxLmJvZHkuaXRlbXNQcmljZSxcclxuICAgICAgICAgICAgdGF4UHJpY2U6IHJlcS5ib2R5LnRheFByaWNlLFxyXG4gICAgICAgICAgICBzaGlwcGluZ1ByaWNlOiByZXEuYm9keS5zaGlwcGluZ1ByaWNlLFxyXG4gICAgICAgICAgICB0b3RhbFByaWNlOiByZXEuYm9keS50b3RhbFByaWNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZE9yZGVyID0gYXdhaXQgb3JkZXIuc2F2ZSgpO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5zZW5kKHsgbWVzc2FnZTogJ05ldyBvcmRlciBDcmVhdGVkJywgb3JkZXI6IGNyZWF0ZWRPcmRlcn0pXHJcbiAgICB9KVxyXG4pO1xyXG5vcmRlclJvdXRlci5kZWxldGUoXHJcbiAgICAnLzppZCcsXHJcbiAgICBpc0F1dGgsXHJcbiAgICBpc0FkbWluLFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgICAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgICAgIGlmIChvcmRlcikge1xyXG4gICAgICAgIGNvbnN0IGRlbGV0ZWRPcmRlciA9IGF3YWl0IG9yZGVyLnJlbW92ZSgpO1xyXG4gICAgICAgIHJlcy5zZW5kKHsgbWVzc2FnZTogJ1Byb2R1Y3QgRGVsZXRlZCcsIHByb2R1Y3Q6IGRlbGV0ZWRPcmRlciB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIE5vdCBGb3VuZCcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuKTtcclxub3JkZXJSb3V0ZXIucHV0KCcvOmlkL3BheScsIGlzQXV0aCwgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcbiAgICBpZiAob3JkZXIpIHtcclxuICAgICAgICBvcmRlci5pc1BhaWQgPSB0cnVlO1xyXG4gICAgICAgIG9yZGVyLnBhaWRBdCA9IERhdGUubm93KCk7XHJcbiAgICAgICAgb3JkZXIucGF5bWVudC5wYXltZW50UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICBwYXllcklEOiByZXEuYm9keS5wYXllcklELFxyXG4gICAgICAgICAgICBwYXltZW50SUQ6IHJlcS5ib2R5LnBheW1lbnRJRCxcclxuICAgICAgICAgICAgb3JkZXJJRDogcmVxLmJvZHkub3JkZXJJRCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRPcmRlciA9IGF3YWl0IG9yZGVyLnNhdmUoKTtcclxuICAgICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBwYWlkJywgb3JkZXI6IHVwZGF0ZWRPcmRlcn0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBub3QgZm91bmQuJ30pO1xyXG4gICAgfVxyXG59KSk7XHJcbm9yZGVyUm91dGVyLnB1dChcclxuICAgICcvOmlkL2RlbGl2ZXInLFxyXG4gICAgaXNBdXRoLFxyXG4gICAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgICAgaWYgKG9yZGVyKSB7XHJcbiAgICAgICAgb3JkZXIuaXNEZWxpdmVyZWQgPSB0cnVlO1xyXG4gICAgICAgIG9yZGVyLmRlbGl2ZXJlZEF0ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSBhd2FpdCBvcmRlci5zYXZlKCk7XHJcbiAgICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgRGVsaXZlcmVkJywgb3JkZXI6IHVwZGF0ZWRPcmRlciB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgRm91bmQuJyB9KTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgb3JkZXJSb3V0ZXI7Il19","map":{"version":3,"sources":["orderRouter.js"],"names":["orderRouter","express","Router","get","isAuth","isAdmin","req","res","orders","Order","aggregate","$group","_id","numOrders","$sum","totalSales","users","User","numUsers","dailyOrders","$dateToString","format","date","sales","productCategories","Product","count","send","length","find","populate","user","order","findById","params","id","status","message","post","orderItems","body","shipping","payment","itemsPrice","taxPrice","shippingPrice","totalPrice","createdOrder","save","delete","deletedOrder","remove","product","put","isPaid","paidAt","Date","now","paymentResult","payerID","paymentID","orderID","updatedOrder","isDelivered","deliveredAt"],"mappings":"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","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\routers\\","sourcesContent":["import express from \"express\";\r\nimport expressAsyncHandler from \"express-async-handler\";\r\nimport Order from \"../models/orderModel\";\r\nimport {isAdmin, isAuth} from '../utils';\r\nimport User from '../models/userModel';\r\nimport Product from '../models/productModel'\r\n\r\nconst orderRouter = express.Router();\r\n\r\norderRouter.get(\r\n    '/summary', \r\n    isAuth, \r\n    isAdmin, \r\n    expressAsyncHandler(async (req,res) => {\r\n    const orders = await Order.aggregate([\r\n        {\r\n            $group: {\r\n            _id: null,\r\n            numOrders: { $sum: 1 },\r\n            totalSales: { $sum: '$totalPrice' },\r\n            },\r\n        },\r\n        ]);\r\n    const users = await User.aggregate([\r\n        {\r\n            $group: {\r\n            _id: null,\r\n            numUsers: { $sum: 1 },\r\n            },\r\n        },\r\n    ]);\r\n    const dailyOrders = await Order.aggregate([\r\n        {\r\n            $group: {\r\n                _id: { $dateToString: { format: '%Y-%m-%d', date: '$createdAt' } },\r\n                orders: { $sum: 1 },\r\n                sales: { $sum: '$totalprice' },\r\n            },\r\n        },\r\n    ]);\r\n    const productCategories = await Product.aggregate([\r\n      {\r\n        $group: {\r\n            _id: '$category',\r\n            count: {$sum: 1},\r\n        },\r\n      },\r\n    ]);\r\n        res.send({\r\n            users,\r\n            orders: orders.length === 0 ? [{numOrders: 0, totalSales: 0}] : orders,\r\n            dailyOrders,\r\n            productCategories\r\n        });\r\n}));\r\norderRouter.get(\r\n    '/', \r\n    isAuth, \r\n    isAdmin, \r\n    expressAsyncHandler(async (req, res) => {\r\n        const orders = await Order.find({}).populate('user');\r\n        res.send(orders);\r\n}));\r\norderRouter.get('/mine', isAuth, expressAsyncHandler(async (req, res) => {\r\n    const orders = await Order.find({user: req.user._id});\r\n    res.send(orders);\r\n}));\r\norderRouter.get(\r\n    '/:id',\r\n    isAuth,\r\n    expressAsyncHandler(async (req, res) => {\r\n        const order = await Order.findById(req.params.id);\r\n        if (order) {\r\n            res.send(order);\r\n        } else {\r\n            res.status(404).send({ message: 'Order Not found' });\r\n        }\r\n    })\r\n);\r\norderRouter.post(\r\n    '/', \r\n    isAuth, \r\n    expressAsyncHandler(async (req, res) => {\r\n        const order = new Order({\r\n            orderItems: req.body.orderItems,\r\n            user: req.user._id,\r\n            shipping: req.body.shipping,\r\n            payment: req.body.payment,\r\n            itemsPrice: req.body.itemsPrice,\r\n            taxPrice: req.body.taxPrice,\r\n            shippingPrice: req.body.shippingPrice,\r\n            totalPrice: req.body.totalPrice\r\n        });\r\n        const createdOrder = await order.save();\r\n        res.status(201).send({ message: 'New order Created', order: createdOrder})\r\n    })\r\n);\r\norderRouter.delete(\r\n    '/:id',\r\n    isAuth,\r\n    isAdmin,\r\n    expressAsyncHandler(async (req, res) => {\r\n        const order = await Order.findById(req.params.id);\r\n        if (order) {\r\n        const deletedOrder = await order.remove();\r\n        res.send({ message: 'Product Deleted', product: deletedOrder });\r\n        } else {\r\n        res.status(404).send({ message: 'Order Not Found' });\r\n        }\r\n    })\r\n);\r\norderRouter.put('/:id/pay', isAuth, expressAsyncHandler(async (req, res) => {\r\n    const order = await Order.findById(req.params.id);\r\n    if (order) {\r\n        order.isPaid = true;\r\n        order.paidAt = Date.now();\r\n        order.payment.paymentResult = {\r\n            payerID: req.body.payerID,\r\n            paymentID: req.body.paymentID,\r\n            orderID: req.body.orderID,\r\n        };\r\n        const updatedOrder = await order.save();\r\n        res.send({ message: 'Order paid', order: updatedOrder});\r\n    } else {\r\n        res.status(404).send({ message: 'Order not found.'});\r\n    }\r\n}));\r\norderRouter.put(\r\n    '/:id/deliver',\r\n    isAuth,\r\n    expressAsyncHandler(async (req, res) => {\r\n      const order = await Order.findById(req.params.id);\r\n      if (order) {\r\n        order.isDelivered = true;\r\n        order.deliveredAt = Date.now();\r\n        const updatedOrder = await order.save();\r\n        res.send({ message: 'Order Delivered', order: updatedOrder });\r\n      } else {\r\n        res.status(404).send({ message: 'Order Not Found.' });\r\n      }\r\n    })\r\n  );\r\n\r\nexport default orderRouter;"]}},"mtime":1653232115368},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\models\\\\orderModel.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst orderSchema = new _mongoose.default.Schema({\n  orderItems: [{\n    name: {\n      type: String,\n      required: true\n    },\n    image: {\n      type: String,\n      required: true\n    },\n    price: {\n      type: Number,\n      required: true\n    },\n    qty: {\n      type: Number,\n      required: true\n    },\n    product: {\n      type: _mongoose.default.Schema.Types.ObjectId,\n      ref: 'Product',\n      required: true\n    }\n  }],\n  user: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  shipping: {\n    address: String,\n    city: String,\n    postalCode: String,\n    country: String\n  },\n  payment: {\n    paymentMethod: String,\n    paymentResult: {\n      orderID: String,\n      payerID: String,\n      paymentID: String\n    }\n  },\n  itemsPrice: Number,\n  taxPrice: Number,\n  shippingPrice: Number,\n  totalPrice: Number,\n  paidAt: Date,\n  isPaid: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  isDelivered: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  deliveredAt: Date\n}, {\n  timestamps: true\n});\n\nconst Order = _mongoose.default.model('Order', orderSchema);\n\nvar _default = Order;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyTW9kZWwuanMiXSwibmFtZXMiOlsib3JkZXJTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsIm9yZGVySXRlbXMiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiaW1hZ2UiLCJwcmljZSIsIk51bWJlciIsInF0eSIsInByb2R1Y3QiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwidXNlciIsInNoaXBwaW5nIiwiYWRkcmVzcyIsImNpdHkiLCJwb3N0YWxDb2RlIiwiY291bnRyeSIsInBheW1lbnQiLCJwYXltZW50TWV0aG9kIiwicGF5bWVudFJlc3VsdCIsIm9yZGVySUQiLCJwYXllcklEIiwicGF5bWVudElEIiwiaXRlbXNQcmljZSIsInRheFByaWNlIiwic2hpcHBpbmdQcmljZSIsInRvdGFsUHJpY2UiLCJwYWlkQXQiLCJEYXRlIiwiaXNQYWlkIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJpc0RlbGl2ZXJlZCIsImRlbGl2ZXJlZEF0IiwidGltZXN0YW1wcyIsIk9yZGVyIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLE1BQU1BLFdBQVcsR0FBRyxJQUFJQyxrQkFBU0MsTUFBYixDQUNoQjtBQUNJQyxFQUFBQSxVQUFVLEVBQUUsQ0FDUjtBQUNJQyxJQUFBQSxJQUFJLEVBQUU7QUFBQ0MsTUFBQUEsSUFBSSxFQUFFQyxNQUFQO0FBQWVDLE1BQUFBLFFBQVEsRUFBRTtBQUF6QixLQURWO0FBRUlDLElBQUFBLEtBQUssRUFBRTtBQUFDSCxNQUFBQSxJQUFJLEVBQUVDLE1BQVA7QUFBZUMsTUFBQUEsUUFBUSxFQUFFO0FBQXpCLEtBRlg7QUFHSUUsSUFBQUEsS0FBSyxFQUFFO0FBQUNKLE1BQUFBLElBQUksRUFBRUssTUFBUDtBQUFlSCxNQUFBQSxRQUFRLEVBQUU7QUFBekIsS0FIWDtBQUlJSSxJQUFBQSxHQUFHLEVBQUU7QUFBQ04sTUFBQUEsSUFBSSxFQUFFSyxNQUFQO0FBQWVILE1BQUFBLFFBQVEsRUFBRTtBQUF6QixLQUpUO0FBS0lLLElBQUFBLE9BQU8sRUFBRTtBQUNMUCxNQUFBQSxJQUFJLEVBQUVKLGtCQUFTQyxNQUFULENBQWdCVyxLQUFoQixDQUFzQkMsUUFEdkI7QUFFTEMsTUFBQUEsR0FBRyxFQUFFLFNBRkE7QUFHTFIsTUFBQUEsUUFBUSxFQUFFO0FBSEw7QUFMYixHQURRLENBRGhCO0FBY0lTLEVBQUFBLElBQUksRUFBRTtBQUFDWCxJQUFBQSxJQUFJLEVBQUVKLGtCQUFTQyxNQUFULENBQWdCVyxLQUFoQixDQUFzQkMsUUFBN0I7QUFBdUNDLElBQUFBLEdBQUcsRUFBRSxNQUE1QztBQUFvRFIsSUFBQUEsUUFBUSxFQUFFO0FBQTlELEdBZFY7QUFlSVUsRUFBQUEsUUFBUSxFQUFFO0FBQ05DLElBQUFBLE9BQU8sRUFBRVosTUFESDtBQUVOYSxJQUFBQSxJQUFJLEVBQUViLE1BRkE7QUFHTmMsSUFBQUEsVUFBVSxFQUFFZCxNQUhOO0FBSU5lLElBQUFBLE9BQU8sRUFBRWY7QUFKSCxHQWZkO0FBcUJJZ0IsRUFBQUEsT0FBTyxFQUFFO0FBQ0xDLElBQUFBLGFBQWEsRUFBRWpCLE1BRFY7QUFFTGtCLElBQUFBLGFBQWEsRUFBRTtBQUNYQyxNQUFBQSxPQUFPLEVBQUVuQixNQURFO0FBRVhvQixNQUFBQSxPQUFPLEVBQUVwQixNQUZFO0FBR1hxQixNQUFBQSxTQUFTLEVBQUVyQjtBQUhBO0FBRlYsR0FyQmI7QUE2QklzQixFQUFBQSxVQUFVLEVBQUVsQixNQTdCaEI7QUE4QkltQixFQUFBQSxRQUFRLEVBQUVuQixNQTlCZDtBQStCSW9CLEVBQUFBLGFBQWEsRUFBRXBCLE1BL0JuQjtBQWdDSXFCLEVBQUFBLFVBQVUsRUFBRXJCLE1BaENoQjtBQWlDSXNCLEVBQUFBLE1BQU0sRUFBRUMsSUFqQ1o7QUFrQ0lDLEVBQUFBLE1BQU0sRUFBRTtBQUFDN0IsSUFBQUEsSUFBSSxFQUFFOEIsT0FBUDtBQUFnQjVCLElBQUFBLFFBQVEsRUFBRSxJQUExQjtBQUFnQzZCLElBQUFBLE9BQU8sRUFBRTtBQUF6QyxHQWxDWjtBQW1DSUMsRUFBQUEsV0FBVyxFQUFFO0FBQUNoQyxJQUFBQSxJQUFJLEVBQUU4QixPQUFQO0FBQWdCNUIsSUFBQUEsUUFBUSxFQUFFLElBQTFCO0FBQWdDNkIsSUFBQUEsT0FBTyxFQUFFO0FBQXpDLEdBbkNqQjtBQW9DSUUsRUFBQUEsV0FBVyxFQUFFTDtBQXBDakIsQ0FEZ0IsRUF1Q2hCO0FBQ0lNLEVBQUFBLFVBQVUsRUFBRTtBQURoQixDQXZDZ0IsQ0FBcEI7O0FBMkNBLE1BQU1DLEtBQUssR0FBR3ZDLGtCQUFTd0MsS0FBVCxDQUFlLE9BQWYsRUFBd0J6QyxXQUF4QixDQUFkOztlQUNld0MsSyIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc0xvamluaGFcXGJhY2tlbmRcXG1vZGVsc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3Qgb3JkZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxyXG4gICAge1xyXG4gICAgICAgIG9yZGVySXRlbXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZToge3R5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgICAgICAgICAgICAgaW1hZ2U6IHt0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgICAgICAgICAgICAgIHByaWNlOiB7dHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICAgICAgICAgICAgICBxdHk6IHt0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnUHJvZHVjdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgdXNlcjoge3R5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnVXNlcicsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgICAgICBzaGlwcGluZzoge1xyXG4gICAgICAgICAgICBhZGRyZXNzOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIGNpdHk6IFN0cmluZyxcclxuICAgICAgICAgICAgcG9zdGFsQ29kZTogU3RyaW5nLFxyXG4gICAgICAgICAgICBjb3VudHJ5OiBTdHJpbmcsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYXltZW50OiB7XHJcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6IFN0cmluZyxcclxuICAgICAgICAgICAgcGF5bWVudFJlc3VsdDoge1xyXG4gICAgICAgICAgICAgICAgb3JkZXJJRDogU3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgcGF5ZXJJRDogU3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudElEOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGl0ZW1zUHJpY2U6IE51bWJlcixcclxuICAgICAgICB0YXhQcmljZTogTnVtYmVyLFxyXG4gICAgICAgIHNoaXBwaW5nUHJpY2U6IE51bWJlcixcclxuICAgICAgICB0b3RhbFByaWNlOiBOdW1iZXIsXHJcbiAgICAgICAgcGFpZEF0OiBEYXRlLFxyXG4gICAgICAgIGlzUGFpZDoge3R5cGU6IEJvb2xlYW4sIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiBmYWxzZX0sXHJcbiAgICAgICAgaXNEZWxpdmVyZWQ6IHt0eXBlOiBCb29sZWFuLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogZmFsc2V9LFxyXG4gICAgICAgIGRlbGl2ZXJlZEF0OiBEYXRlLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0aW1lc3RhbXBzOiB0cnVlLFxyXG4gICAgfVxyXG4pO1xyXG5jb25zdCBPcmRlciA9IG1vbmdvb3NlLm1vZGVsKCdPcmRlcicsIG9yZGVyU2NoZW1hKTtcclxuZXhwb3J0IGRlZmF1bHQgT3JkZXI7Il19","map":{"version":3,"sources":["orderModel.js"],"names":["orderSchema","mongoose","Schema","orderItems","name","type","String","required","image","price","Number","qty","product","Types","ObjectId","ref","user","shipping","address","city","postalCode","country","payment","paymentMethod","paymentResult","orderID","payerID","paymentID","itemsPrice","taxPrice","shippingPrice","totalPrice","paidAt","Date","isPaid","Boolean","default","isDelivered","deliveredAt","timestamps","Order","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,WAAW,GAAG,IAAIC,kBAASC,MAAb,CAChB;AACIC,EAAAA,UAAU,EAAE,CACR;AACIC,IAAAA,IAAI,EAAE;AAACC,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,QAAQ,EAAE;AAAzB,KADV;AAEIC,IAAAA,KAAK,EAAE;AAACH,MAAAA,IAAI,EAAEC,MAAP;AAAeC,MAAAA,QAAQ,EAAE;AAAzB,KAFX;AAGIE,IAAAA,KAAK,EAAE;AAACJ,MAAAA,IAAI,EAAEK,MAAP;AAAeH,MAAAA,QAAQ,EAAE;AAAzB,KAHX;AAIII,IAAAA,GAAG,EAAE;AAACN,MAAAA,IAAI,EAAEK,MAAP;AAAeH,MAAAA,QAAQ,EAAE;AAAzB,KAJT;AAKIK,IAAAA,OAAO,EAAE;AACLP,MAAAA,IAAI,EAAEJ,kBAASC,MAAT,CAAgBW,KAAhB,CAAsBC,QADvB;AAELC,MAAAA,GAAG,EAAE,SAFA;AAGLR,MAAAA,QAAQ,EAAE;AAHL;AALb,GADQ,CADhB;AAcIS,EAAAA,IAAI,EAAE;AAACX,IAAAA,IAAI,EAAEJ,kBAASC,MAAT,CAAgBW,KAAhB,CAAsBC,QAA7B;AAAuCC,IAAAA,GAAG,EAAE,MAA5C;AAAoDR,IAAAA,QAAQ,EAAE;AAA9D,GAdV;AAeIU,EAAAA,QAAQ,EAAE;AACNC,IAAAA,OAAO,EAAEZ,MADH;AAENa,IAAAA,IAAI,EAAEb,MAFA;AAGNc,IAAAA,UAAU,EAAEd,MAHN;AAINe,IAAAA,OAAO,EAAEf;AAJH,GAfd;AAqBIgB,EAAAA,OAAO,EAAE;AACLC,IAAAA,aAAa,EAAEjB,MADV;AAELkB,IAAAA,aAAa,EAAE;AACXC,MAAAA,OAAO,EAAEnB,MADE;AAEXoB,MAAAA,OAAO,EAAEpB,MAFE;AAGXqB,MAAAA,SAAS,EAAErB;AAHA;AAFV,GArBb;AA6BIsB,EAAAA,UAAU,EAAElB,MA7BhB;AA8BImB,EAAAA,QAAQ,EAAEnB,MA9Bd;AA+BIoB,EAAAA,aAAa,EAAEpB,MA/BnB;AAgCIqB,EAAAA,UAAU,EAAErB,MAhChB;AAiCIsB,EAAAA,MAAM,EAAEC,IAjCZ;AAkCIC,EAAAA,MAAM,EAAE;AAAC7B,IAAAA,IAAI,EAAE8B,OAAP;AAAgB5B,IAAAA,QAAQ,EAAE,IAA1B;AAAgC6B,IAAAA,OAAO,EAAE;AAAzC,GAlCZ;AAmCIC,EAAAA,WAAW,EAAE;AAAChC,IAAAA,IAAI,EAAE8B,OAAP;AAAgB5B,IAAAA,QAAQ,EAAE,IAA1B;AAAgC6B,IAAAA,OAAO,EAAE;AAAzC,GAnCjB;AAoCIE,EAAAA,WAAW,EAAEL;AApCjB,CADgB,EAuChB;AACIM,EAAAA,UAAU,EAAE;AADhB,CAvCgB,CAApB;;AA2CA,MAAMC,KAAK,GAAGvC,kBAASwC,KAAT,CAAe,OAAf,EAAwBzC,WAAxB,CAAd;;eACewC,K","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\models\\","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst orderSchema = new mongoose.Schema(\r\n    {\r\n        orderItems: [\r\n            {\r\n                name: {type: String, required: true},\r\n                image: {type: String, required: true},\r\n                price: {type: Number, required: true},\r\n                qty: {type: Number, required: true},\r\n                product: {\r\n                    type: mongoose.Schema.Types.ObjectId,\r\n                    ref: 'Product',\r\n                    required: true,\r\n                },\r\n            },\r\n        ],\r\n        user: {type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true},\r\n        shipping: {\r\n            address: String,\r\n            city: String,\r\n            postalCode: String,\r\n            country: String,\r\n        },\r\n        payment: {\r\n            paymentMethod: String,\r\n            paymentResult: {\r\n                orderID: String,\r\n                payerID: String,\r\n                paymentID: String,\r\n            }\r\n        },\r\n        itemsPrice: Number,\r\n        taxPrice: Number,\r\n        shippingPrice: Number,\r\n        totalPrice: Number,\r\n        paidAt: Date,\r\n        isPaid: {type: Boolean, required: true, default: false},\r\n        isDelivered: {type: Boolean, required: true, default: false},\r\n        deliveredAt: Date,\r\n    },\r\n    {\r\n        timestamps: true,\r\n    }\r\n);\r\nconst Order = mongoose.model('Order', orderSchema);\r\nexport default Order;"]}},"mtime":1650139224451},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\productRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\n\nvar _utils = require(\"../utils\");\n\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst productRouter = _express.default.Router();\n\nproductRouter.get('/', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const products = await _productModel.default.find({});\n  res.send(products);\n}));\nproductRouter.get('/:id', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  res.send(product);\n}));\nproductRouter.post('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = new _productModel.default({\n    name: 'sample product',\n    description: 'sample desc',\n    category: 'sample category',\n    brand: 'sample brand',\n    image: '/images/product-1.jpg'\n  });\n  const createdProduct = await product.save();\n\n  if (createdProduct) {\n    res.status(201).send({\n      message: 'Product created',\n      product: createdProduct\n    });\n  } else {\n    res.status(500).send({\n      message: 'Error in creating product'\n    });\n  }\n}));\nproductRouter.put('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const productId = req.params.id;\n  const product = await _productModel.default.findById(productId);\n\n  if (product) {\n    product.name = req.body.name;\n    product.price = req.body.price;\n    product.image = req.body.image;\n    product.brand = req.body.brand;\n    product.category = req.body.category;\n    product.countInStock = req.body.countInStock;\n    product.description = req.body.description;\n    const updatedProduct = await product.save();\n\n    if (updatedProduct) {\n      res.send({\n        message: 'Product Updated',\n        product: updatedProduct\n      });\n    } else {\n      res.status(500).send({\n        message: 'Error in updating product'\n      });\n    }\n  } else {\n    res.status(404).send({\n      message: 'Product Not Found'\n    });\n  }\n}));\nproductRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n\n  if (product) {\n    const deletedProduct = await product.remove();\n    res.send({\n      message: 'Product Deleted',\n      product: deletedProduct\n    });\n  } else {\n    res.status(404).send({\n      message: 'Product Not Found'\n    });\n  }\n}));\nvar _default = productRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3RSb3V0ZXIuanMiXSwibmFtZXMiOlsicHJvZHVjdFJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJwcm9kdWN0cyIsIlByb2R1Y3QiLCJmaW5kIiwic2VuZCIsInByb2R1Y3QiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwicG9zdCIsImlzQXV0aCIsImlzQWRtaW4iLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsImJyYW5kIiwiaW1hZ2UiLCJjcmVhdGVkUHJvZHVjdCIsInNhdmUiLCJzdGF0dXMiLCJtZXNzYWdlIiwicHV0IiwicHJvZHVjdElkIiwiYm9keSIsInByaWNlIiwiY291bnRJblN0b2NrIiwidXBkYXRlZFByb2R1Y3QiLCJkZWxldGUiLCJkZWxldGVkUHJvZHVjdCIsInJlbW92ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsYUFBYSxHQUFHQyxpQkFBUUMsTUFBUixFQUF0Qjs7QUFDQUYsYUFBYSxDQUFDRyxHQUFkLENBQWtCLEdBQWxCLEVBQXVCLGtDQUFvQixPQUFPQyxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDM0QsUUFBTUMsUUFBUSxHQUFHLE1BQU1DLHNCQUFRQyxJQUFSLENBQWEsRUFBYixDQUF2QjtBQUNBSCxFQUFBQSxHQUFHLENBQUNJLElBQUosQ0FBU0gsUUFBVDtBQUNILENBSHNCLENBQXZCO0FBSUFOLGFBQWEsQ0FBQ0csR0FBZCxDQUFrQixNQUFsQixFQUEwQixrQ0FBb0IsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQzlELFFBQU1LLE9BQU8sR0FBRyxNQUFNSCxzQkFBUUksUUFBUixDQUFpQlAsR0FBRyxDQUFDUSxNQUFKLENBQVdDLEVBQTVCLENBQXRCO0FBQ0FSLEVBQUFBLEdBQUcsQ0FBQ0ksSUFBSixDQUFTQyxPQUFUO0FBQ0gsQ0FIeUIsQ0FBMUI7QUFJQVYsYUFBYSxDQUFDYyxJQUFk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QUFDdEMsUUFBTUssT0FBTyxHQUFHLE1BQU1ILHNCQUFRSSxRQUFSLENBQWlCUCxHQUFHLENBQUNRLE1BQUosQ0FBV0MsRUFBNUIsQ0FBdEI7O0FBQ0EsTUFBSUgsT0FBSixFQUFhO0FBQ1gsVUFBTXVCLGNBQWMsR0FBRyxNQUFNdkIsT0FBTyxDQUFDd0IsTUFBUixFQUE3QjtBQUNBN0IsSUFBQUEsR0FBRyxDQUFDSSxJQUFKLENBQVM7QUFBRWdCLE1BQUFBLE9BQU8sRUFBRSxpQkFBWDtBQUE4QmYsTUFBQUEsT0FBTyxFQUFFdUI7QUFBdkMsS0FBVDtBQUNELEdBSEQsTUFHTztBQUNMNUIsSUFBQUEsR0FBRyxDQUFDbUIsTUFBSixDQUFXLEdBQVgsRUFBZ0JmLElBQWhCLENBQXFCO0FBQUVnQixNQUFBQSxPQUFPLEVBQUU7QUFBWCxLQUFyQjtBQUNEO0FBQ0YsQ0FSRCxDQUpKO2VBY2V6QixhIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcZ3VpbGhlcm1lXFxEb3dubG9hZHNcXGpzTG9qaW5oYVxcYmFja2VuZFxccm91dGVyc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSBcImV4cHJlc3MtYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBpc0F1dGgsIGlzQWRtaW4gfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCBQcm9kdWN0IGZyb20gXCIuLi9tb2RlbHMvcHJvZHVjdE1vZGVsXCI7XHJcblxyXG5jb25zdCBwcm9kdWN0Um91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxucHJvZHVjdFJvdXRlci5nZXQoJy8nLCBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBQcm9kdWN0LmZpbmQoe30pO1xyXG4gICAgcmVzLnNlbmQocHJvZHVjdHMpO1xyXG59KSk7XHJcbnByb2R1Y3RSb3V0ZXIuZ2V0KCcvOmlkJywgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgcmVzLnNlbmQocHJvZHVjdCk7XHJcbn0pKTtcclxucHJvZHVjdFJvdXRlci5wb3N0KFxyXG4gICAgJy8nLFxyXG4gICAgaXNBdXRoLFxyXG4gICAgaXNBZG1pbixcclxuICAgIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IG5ldyBQcm9kdWN0KHtcclxuICAgICAgICAgICAgbmFtZTogJ3NhbXBsZSBwcm9kdWN0JyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdzYW1wbGUgZGVzYycsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnc2FtcGxlIGNhdGVnb3J5JyxcclxuICAgICAgICAgICAgYnJhbmQ6ICdzYW1wbGUgYnJhbmQnLFxyXG4gICAgICAgICAgICBpbWFnZTogJy9pbWFnZXMvcHJvZHVjdC0xLmpwZycsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZFByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0LnNhdmUoKTtcclxuICAgICAgICBpZiAoY3JlYXRlZFByb2R1Y3Qpe1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IG1lc3NhZ2U6ICdQcm9kdWN0IGNyZWF0ZWQnLCBwcm9kdWN0OiBjcmVhdGVkUHJvZHVjdH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogJ0Vycm9yIGluIGNyZWF0aW5nIHByb2R1Y3QnfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuKTtcclxucHJvZHVjdFJvdXRlci5wdXQoJy86aWQnLCBpc0F1dGgsIGlzQWRtaW4sIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBwcm9kdWN0SWQgPSByZXEucGFyYW1zLmlkO1xyXG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQocHJvZHVjdElkKTtcclxuICAgIGlmIChwcm9kdWN0KSB7XHJcbiAgICAgICAgcHJvZHVjdC5uYW1lID0gcmVxLmJvZHkubmFtZTtcclxuICAgICAgICBwcm9kdWN0LnByaWNlID0gcmVxLmJvZHkucHJpY2U7XHJcbiAgICAgICAgcHJvZHVjdC5pbWFnZSA9IHJlcS5ib2R5LmltYWdlO1xyXG4gICAgICAgIHByb2R1Y3QuYnJhbmQgPSByZXEuYm9keS5icmFuZDtcclxuICAgICAgICBwcm9kdWN0LmNhdGVnb3J5ID0gcmVxLmJvZHkuY2F0ZWdvcnk7XHJcbiAgICAgICAgcHJvZHVjdC5jb3VudEluU3RvY2sgPSByZXEuYm9keS5jb3VudEluU3RvY2s7XHJcbiAgICAgICAgcHJvZHVjdC5kZXNjcmlwdGlvbiA9IHJlcS5ib2R5LmRlc2NyaXB0aW9uO1xyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGVkUHJvZHVjdCA9IGF3YWl0IHByb2R1Y3Quc2F2ZSgpO1xyXG4gICAgICAgIGlmICh1cGRhdGVkUHJvZHVjdCl7XHJcbiAgICAgICAgICAgIHJlcy5zZW5kKHttZXNzYWdlOiAnUHJvZHVjdCBVcGRhdGVkJywgcHJvZHVjdDogdXBkYXRlZFByb2R1Y3R9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7bWVzc2FnZTogJ0Vycm9yIGluIHVwZGF0aW5nIHByb2R1Y3QnfSlcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHttZXNzYWdlOiAnUHJvZHVjdCBOb3QgRm91bmQnfSlcclxuICAgIH1cclxufSkpO1xyXG5wcm9kdWN0Um91dGVyLmRlbGV0ZShcclxuICAgICcvOmlkJyxcclxuICAgIGlzQXV0aCxcclxuICAgIGlzQWRtaW4sXHJcbiAgICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgICAgaWYgKHByb2R1Y3QpIHtcclxuICAgICAgICBjb25zdCBkZWxldGVkUHJvZHVjdCA9IGF3YWl0IHByb2R1Y3QucmVtb3ZlKCk7XHJcbiAgICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVjdCBEZWxldGVkJywgcHJvZHVjdDogZGVsZXRlZFByb2R1Y3QgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVjdCBOb3QgRm91bmQnIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4pO1xyXG5leHBvcnQgZGVmYXVsdCBwcm9kdWN0Um91dGVyOyJdfQ==","map":{"version":3,"sources":["productRouter.js"],"names":["productRouter","express","Router","get","req","res","products","Product","find","send","product","findById","params","id","post","isAuth","isAdmin","name","description","category","brand","image","createdProduct","save","status","message","put","productId","body","price","countInStock","updatedProduct","delete","deletedProduct","remove"],"mappings":"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","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\routers\\","sourcesContent":["import express from \"express\";\r\nimport expressAsyncHandler from \"express-async-handler\";\r\nimport { isAuth, isAdmin } from '../utils';\r\nimport Product from \"../models/productModel\";\r\n\r\nconst productRouter = express.Router();\r\nproductRouter.get('/', expressAsyncHandler(async (req, res) => {\r\n    const products = await Product.find({});\r\n    res.send(products);\r\n}));\r\nproductRouter.get('/:id', expressAsyncHandler(async (req, res) => {\r\n    const product = await Product.findById(req.params.id);\r\n    res.send(product);\r\n}));\r\nproductRouter.post(\r\n    '/',\r\n    isAuth,\r\n    isAdmin,\r\n    expressAsyncHandler(async (req, res) => {\r\n        const product = new Product({\r\n            name: 'sample product',\r\n            description: 'sample desc',\r\n            category: 'sample category',\r\n            brand: 'sample brand',\r\n            image: '/images/product-1.jpg',\r\n        });\r\n        const createdProduct = await product.save();\r\n        if (createdProduct){\r\n            res.status(201).send({ message: 'Product created', product: createdProduct});\r\n        } else {\r\n            res.status(500).send({ message: 'Error in creating product'});\r\n        }\r\n    })\r\n);\r\nproductRouter.put('/:id', isAuth, isAdmin, expressAsyncHandler(async (req, res) => {\r\n    const productId = req.params.id;\r\n    const product = await Product.findById(productId);\r\n    if (product) {\r\n        product.name = req.body.name;\r\n        product.price = req.body.price;\r\n        product.image = req.body.image;\r\n        product.brand = req.body.brand;\r\n        product.category = req.body.category;\r\n        product.countInStock = req.body.countInStock;\r\n        product.description = req.body.description;\r\n\r\n        const updatedProduct = await product.save();\r\n        if (updatedProduct){\r\n            res.send({message: 'Product Updated', product: updatedProduct});\r\n        } else {\r\n            res.status(500).send({message: 'Error in updating product'})\r\n        }\r\n    } else {\r\n        res.status(404).send({message: 'Product Not Found'})\r\n    }\r\n}));\r\nproductRouter.delete(\r\n    '/:id',\r\n    isAuth,\r\n    isAdmin,\r\n    expressAsyncHandler(async (req, res) => {\r\n      const product = await Product.findById(req.params.id);\r\n      if (product) {\r\n        const deletedProduct = await product.remove();\r\n        res.send({ message: 'Product Deleted', product: deletedProduct });\r\n      } else {\r\n        res.status(404).send({ message: 'Product Not Found' });\r\n      }\r\n    })\r\n);\r\nexport default productRouter;"]}},"mtime":1651420861677},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\models\\\\productModel.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst productSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  description: {\n    type: String,\n    required: true\n  },\n  category: {\n    type: String,\n    required: true\n  },\n  brand: {\n    type: String,\n    required: true\n  },\n  image: {\n    type: String,\n    required: true\n  },\n  price: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  countInStock: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  rating: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  numReviews: {\n    type: String,\n    default: 0,\n    required: true\n  }\n}, {\n  timestamps: true\n});\n\nconst Product = _mongoose.default.model('Product', productSchema);\n\nvar _default = Product;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3RNb2RlbC5qcyJdLCJuYW1lcyI6WyJwcm9kdWN0U2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsImJyYW5kIiwiaW1hZ2UiLCJwcmljZSIsIk51bWJlciIsImRlZmF1bHQiLCJjb3VudEluU3RvY2siLCJyYXRpbmciLCJudW1SZXZpZXdzIiwidGltZXN0YW1wcyIsIlByb2R1Y3QiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBRUEsTUFBTUEsYUFBYSxHQUFHLElBQUlDLGtCQUFTQyxNQUFiLENBQ2xCO0FBQ0FDLEVBQUFBLElBQUksRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUROO0FBRUFDLEVBQUFBLFdBQVcsRUFBRTtBQUFFSCxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUZiO0FBR0FFLEVBQUFBLFFBQVEsRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUhWO0FBSUFHLEVBQUFBLEtBQUssRUFBRTtBQUFFTCxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUpQO0FBS0FJLEVBQUFBLEtBQUssRUFBRTtBQUFFTixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUxQO0FBTUFLLEVBQUFBLEtBQUssRUFBRTtBQUFFUCxJQUFBQSxJQUFJLEVBQUVRLE1BQVI7QUFBZ0JDLElBQUFBLE9BQU8sRUFBRSxHQUF6QjtBQUE4QlAsSUFBQUEsUUFBUSxFQUFFO0FBQXhDLEdBTlA7QUFPQVEsRUFBQUEsWUFBWSxFQUFFO0FBQUVWLElBQUFBLElBQUksRUFBRVEsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFLENBQXpCO0FBQTRCUCxJQUFBQSxRQUFRLEVBQUU7QUFBdEMsR0FQZDtBQVFBUyxFQUFBQSxNQUFNLEVBQUU7QUFBRVgsSUFBQUEsSUFBSSxFQUFFUSxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUUsR0FBekI7QUFBK0JQLElBQUFBLFFBQVEsRUFBRTtBQUF6QyxHQVJSO0FBU0FVLEVBQUFBLFVBQVUsRUFBRTtBQUFFWixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JRLElBQUFBLE9BQU8sRUFBRSxDQUF6QjtBQUE0QlAsSUFBQUEsUUFBUSxFQUFFO0FBQXRDO0FBVFosQ0FEa0IsRUFZbEI7QUFBQ1csRUFBQUEsVUFBVSxFQUFFO0FBQWIsQ0Faa0IsQ0FBdEI7O0FBY0EsTUFBTUMsT0FBTyxHQUFHakIsa0JBQVNrQixLQUFULENBQWUsU0FBZixFQUEwQm5CLGFBQTFCLENBQWhCOztlQUNla0IsTyIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc0xvamluaGFcXGJhY2tlbmRcXG1vZGVsc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3QgcHJvZHVjdFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXHJcbiAgICB7XHJcbiAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgZGVzY3JpcHRpb246IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICBjYXRlZ29yeTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIGJyYW5kOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgaW1hZ2U6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICBwcmljZTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAuMCwgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgY291bnRJblN0b2NrOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCwgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgcmF0aW5nOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMC4wLCAgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgbnVtUmV2aWV3czogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IDAsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIH0sXHJcbiAgICB7dGltZXN0YW1wczogdHJ1ZX1cclxuKTtcclxuY29uc3QgUHJvZHVjdCA9IG1vbmdvb3NlLm1vZGVsKCdQcm9kdWN0JywgcHJvZHVjdFNjaGVtYSk7XHJcbmV4cG9ydCBkZWZhdWx0IFByb2R1Y3Q7Il19","map":{"version":3,"sources":["productModel.js"],"names":["productSchema","mongoose","Schema","name","type","String","required","description","category","brand","image","price","Number","default","countInStock","rating","numReviews","timestamps","Product","model"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,aAAa,GAAG,IAAIC,kBAASC,MAAb,CAClB;AACAC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GADN;AAEAC,EAAAA,WAAW,EAAE;AAAEH,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAFb;AAGAE,EAAAA,QAAQ,EAAE;AAAEJ,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAHV;AAIAG,EAAAA,KAAK,EAAE;AAAEL,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAJP;AAKAI,EAAAA,KAAK,EAAE;AAAEN,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GALP;AAMAK,EAAAA,KAAK,EAAE;AAAEP,IAAAA,IAAI,EAAEQ,MAAR;AAAgBC,IAAAA,OAAO,EAAE,GAAzB;AAA8BP,IAAAA,QAAQ,EAAE;AAAxC,GANP;AAOAQ,EAAAA,YAAY,EAAE;AAAEV,IAAAA,IAAI,EAAEQ,MAAR;AAAgBC,IAAAA,OAAO,EAAE,CAAzB;AAA4BP,IAAAA,QAAQ,EAAE;AAAtC,GAPd;AAQAS,EAAAA,MAAM,EAAE;AAAEX,IAAAA,IAAI,EAAEQ,MAAR;AAAgBC,IAAAA,OAAO,EAAE,GAAzB;AAA+BP,IAAAA,QAAQ,EAAE;AAAzC,GARR;AASAU,EAAAA,UAAU,EAAE;AAAEZ,IAAAA,IAAI,EAAEC,MAAR;AAAgBQ,IAAAA,OAAO,EAAE,CAAzB;AAA4BP,IAAAA,QAAQ,EAAE;AAAtC;AATZ,CADkB,EAYlB;AAACW,EAAAA,UAAU,EAAE;AAAb,CAZkB,CAAtB;;AAcA,MAAMC,OAAO,GAAGjB,kBAASkB,KAAT,CAAe,SAAf,EAA0BnB,aAA1B,CAAhB;;eACekB,O","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\models\\","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst productSchema = new mongoose.Schema(\r\n    {\r\n    name: { type: String, required: true},\r\n    description: { type: String, required: true},\r\n    category: { type: String, required: true},\r\n    brand: { type: String, required: true},\r\n    image: { type: String, required: true},\r\n    price: { type: Number, default: 0.0, required: true},\r\n    countInStock: { type: Number, default: 0, required: true},\r\n    rating: { type: Number, default: 0.0,  required: true},\r\n    numReviews: { type: String, default: 0, required: true},\r\n    },\r\n    {timestamps: true}\r\n);\r\nconst Product = mongoose.model('Product', productSchema);\r\nexport default Product;"]}},"mtime":1650575177281},"{\"sourceRoot\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"filename\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\\\\backend\\\\routers\\\\uploadRouter.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\guilherme\\\\Downloads\\\\jsLojinha\",\"plugins\":[{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _multer = _interopRequireDefault(require(\"multer\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst storage = _multer.default.diskStorage({\n  destination(req, file, cb) {\n    cb(null, 'uploads/');\n  },\n\n  filename(req, file, cb) {\n    cb(null, `${Date.now()}.jpg`);\n  }\n\n});\n\nconst upload = (0, _multer.default)({\n  storage\n});\n\nconst uploadRouter = _express.default.Router();\n\nuploadRouter.post('/', _utils.isAuth, _utils.isAdmin, upload.single('image'), (req, res) => {\n  res.status(201).send({\n    image: `/${req.file.path}`\n  });\n});\nvar _default = uploadRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwbG9hZFJvdXRlci5qcyJdLCJuYW1lcyI6WyJzdG9yYWdlIiwibXVsdGVyIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwiRGF0ZSIsIm5vdyIsInVwbG9hZCIsInVwbG9hZFJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJwb3N0IiwiaXNBdXRoIiwiaXNBZG1pbiIsInNpbmdsZSIsInJlcyIsInN0YXR1cyIsInNlbmQiLCJpbWFnZSIsInBhdGgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLE9BQU8sR0FBR0MsZ0JBQU9DLFdBQVAsQ0FBbUI7QUFDL0JDLEVBQUFBLFdBQVcsQ0FBQ0MsR0FBRCxFQUFNQyxJQUFOLEVBQVlDLEVBQVosRUFBZ0I7QUFDdkJBLElBQUFBLEVBQUUsQ0FBQyxJQUFELEVBQU8sVUFBUCxDQUFGO0FBQ0gsR0FIOEI7O0FBSS9CQyxFQUFBQSxRQUFRLENBQUNILEdBQUQsRUFBTUMsSUFBTixFQUFZQyxFQUFaLEVBQWdCO0FBQ3BCQSxJQUFBQSxFQUFFLENBQUMsSUFBRCxFQUFRLEdBQUVFLElBQUksQ0FBQ0MsR0FBTCxFQUFXLE1BQXJCLENBQUY7QUFDSDs7QUFOOEIsQ0FBbkIsQ0FBaEI7O0FBUUEsTUFBTUMsTUFBTSxHQUFHLHFCQUFPO0FBQUNWLEVBQUFBO0FBQUQsQ0FBUCxDQUFmOztBQUNBLE1BQU1XLFlBQVksR0FBR0MsaUJBQVFDLE1BQVIsRUFBckI7O0FBRUFGLFlBQVksQ0FBQ0csSUFBYixDQUFrQixHQUFsQixFQUF1QkMsYUFBdkIsRUFBK0JDLGNBQS9CLEVBQXdDTixNQUFNLENBQUNPLE1BQVAsQ0FBYyxPQUFkLENBQXhDLEVBQWdFLENBQUNiLEdBQUQsRUFBTWMsR0FBTixLQUFjO0FBQzFFQSxFQUFBQSxHQUFHLENBQUNDLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFDQyxJQUFBQSxLQUFLLEVBQUcsSUFBR2pCLEdBQUcsQ0FBQ0MsSUFBSixDQUFTaUIsSUFBSztBQUExQixHQUFyQjtBQUNILENBRkQ7ZUFHZVgsWSIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGd1aWxoZXJtZVxcRG93bmxvYWRzXFxqc0xvamluaGFcXGJhY2tlbmRcXHJvdXRlcnNcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgbXVsdGVyIGZyb20gJ211bHRlcic7XHJcbmltcG9ydCB7IGlzQWRtaW4sIGlzQXV0aCB9IGZyb20gJy4uL3V0aWxzJztcclxuXHJcbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xyXG4gICAgZGVzdGluYXRpb24ocmVxLCBmaWxlLCBjYikge1xyXG4gICAgICAgIGNiKG51bGwsICd1cGxvYWRzLycpXHJcbiAgICB9LFxyXG4gICAgZmlsZW5hbWUocmVxLCBmaWxlLCBjYikge1xyXG4gICAgICAgIGNiKG51bGwsIGAke0RhdGUubm93KCl9LmpwZ2ApO1xyXG4gICAgfSxcclxufSk7XHJcbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7c3RvcmFnZX0pO1xyXG5jb25zdCB1cGxvYWRSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxudXBsb2FkUm91dGVyLnBvc3QoJy8nLCBpc0F1dGgsIGlzQWRtaW4sIHVwbG9hZC5zaW5nbGUoJ2ltYWdlJyksIChyZXEsIHJlcykgPT4ge1xyXG4gICAgcmVzLnN0YXR1cygyMDEpLnNlbmQoe2ltYWdlOiBgLyR7cmVxLmZpbGUucGF0aH1gfSk7XHJcbn0pO1xyXG5leHBvcnQgZGVmYXVsdCB1cGxvYWRSb3V0ZXI7Il19","map":{"version":3,"sources":["uploadRouter.js"],"names":["storage","multer","diskStorage","destination","req","file","cb","filename","Date","now","upload","uploadRouter","express","Router","post","isAuth","isAdmin","single","res","status","send","image","path"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,OAAO,GAAGC,gBAAOC,WAAP,CAAmB;AAC/BC,EAAAA,WAAW,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAgB;AACvBA,IAAAA,EAAE,CAAC,IAAD,EAAO,UAAP,CAAF;AACH,GAH8B;;AAI/BC,EAAAA,QAAQ,CAACH,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAgB;AACpBA,IAAAA,EAAE,CAAC,IAAD,EAAQ,GAAEE,IAAI,CAACC,GAAL,EAAW,MAArB,CAAF;AACH;;AAN8B,CAAnB,CAAhB;;AAQA,MAAMC,MAAM,GAAG,qBAAO;AAACV,EAAAA;AAAD,CAAP,CAAf;;AACA,MAAMW,YAAY,GAAGC,iBAAQC,MAAR,EAArB;;AAEAF,YAAY,CAACG,IAAb,CAAkB,GAAlB,EAAuBC,aAAvB,EAA+BC,cAA/B,EAAwCN,MAAM,CAACO,MAAP,CAAc,OAAd,CAAxC,EAAgE,CAACb,GAAD,EAAMc,GAAN,KAAc;AAC1EA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,IAAAA,KAAK,EAAG,IAAGjB,GAAG,CAACC,IAAJ,CAASiB,IAAK;AAA1B,GAArB;AACH,CAFD;eAGeX,Y","sourceRoot":"C:\\Users\\guilherme\\Downloads\\jsLojinha\\backend\\routers\\","sourcesContent":["import express from 'express';\r\nimport multer from 'multer';\r\nimport { isAdmin, isAuth } from '../utils';\r\n\r\nconst storage = multer.diskStorage({\r\n    destination(req, file, cb) {\r\n        cb(null, 'uploads/')\r\n    },\r\n    filename(req, file, cb) {\r\n        cb(null, `${Date.now()}.jpg`);\r\n    },\r\n});\r\nconst upload = multer({storage});\r\nconst uploadRouter = express.Router();\r\n\r\nuploadRouter.post('/', isAuth, isAdmin, upload.single('image'), (req, res) => {\r\n    res.status(201).send({image: `/${req.file.path}`});\r\n});\r\nexport default uploadRouter;"]}},"mtime":1651327448019}}